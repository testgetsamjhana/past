(this.$WP=this.$WP||[]).push(["iog21h",(e,t)=>{"use strict";var s,r,i,o,a,n,l,d,g,h,c,u,p,S,v,m,f,b,I,A,T,E,y,w,R,C,P,B,M,x,D,L,k,F,O,_,j,z,q,N,H,U,$,G,K,W,V,Q,Y,Z,X,J,ee,te,se,re,ie,oe,ae,ne,le="ads.testMode",de=55978451,ge=["2mdn.net","amazon-adsystem.com","ampproject.org","celtra.com","doubleclick.net","google.com","googletagservices.com","googlesyndication.com","adsafeprotected.com"],he=[{width:300,height:250},{width:300,height:600},{width:160,height:600},{width:728,height:90},{width:970,height:250},{width:550,height:1},{width:550,height:310}],ce=[{width:320,height:50},{width:300,height:250}];function ue(e,t){globalThis.apstag._Q.push([e,t])}var pe=[{width:300,height:250},{width:300,height:600},{width:160,height:600},{width:728,height:90},{width:970,height:250}],Se=[{width:320,height:50},{width:300,height:250}],ve=["1x1"],me=[],fe="ads.disableFraudDetection",be=({onDisableTestMode:e})=>C("div",{className:"PLEmQ D S4 q R2",children:["Ad test mode enabled",P("button",{onClick:e,className:"oYrIp _S Wb B- Q",children:"[Disable]"})]}),Ie=({children:e})=>{var[t,r]=s({}),i=a((()=>({targeting:t,setTargeting:r})),[t]);return P(Z.Provider,{value:i,children:e})},Ae={__key:51352571889205,id:"2eb473ce46357de4ae7f56927b9ecdee",loc:{},definitions:[]},Te={MOBILE:"mobileweb",TABLET:"tablet",DESKTOP:"desktop"},Ee=()=>{var e,t,s,r=M(),{page:i}=p(),o=x(),n=Te[o],l=(e=>{var{params:t}=p();return"Articles"===e&&"forumPostId"in t&&t.forumPostId?t.forumPostId.toString():"Trips"===e&&"tripId"in t&&t.tripId?t.tripId.toString():"geoId"in t&&t.geoId?"detailId"in t&&t.detailId?t.detailId.toString():t.geoId.toString():null})(i),d=i&&r&&o,[{data:g}]=B({query:Ae,variables:{page:i,locale:r,platform:n,id:l},pause:!d}),h=a((()=>{var e,t,s=null==g||null==(e=g.AdMissionControl_getPageSlotSettings)||null==(t=e[0])?void 0:t.slots,r={};return s?(s.filter(Boolean).forEach((e=>{var t={};e.overrides.filter(Boolean).forEach((e=>{e.slotDisabled&&!t.slotDisabled&&(t.slotDisabled=e.slotDisabled),e.isThorTest&&!t.isThorTest&&(t.isThorTest=e.isThorTest),e.thorExperimentKey&&!t.thorExperimentKey&&(t.thorExperimentKey=e.thorExperimentKey),e.thorBucket&&!t.thorBucket&&(t.thorBucket=e.thorBucket)})),Object.keys(t).length>0&&(r[e.slot]=t)})),r):r}),[g]);return t=a((()=>Array.from(Object.keys(e).reduce(((t,s)=>{var{isThorTest:r,thorExperimentKey:i,thorBucket:o}=e[s];return r&&i&&o&&t.add(i),t}),new Set))),[e=h]),s=D({experimentKeys:t},0===t.length),a((()=>{var t={};return Object.keys(e).forEach((r=>{var{isThorTest:i,thorExperimentKey:o,thorBucket:a}=e[r],n=i&&o&&a&&(null==s?void 0:s[o])===a;i&&!n||(t[r]=e[r])})),t}),[e,s])},ye=({children:e})=>{var t=J(),s=a((()=>({pageAdSlotSettings:t})),[t]);return P(ee.Provider,{value:s,children:e})},we=[{page:"Attraction_Review",slotPositions:["horizon","inline1","InlineNova","rail1","rail2","footer"]},{page:"AttractionsFusion",minSlots:5,slotPositions:["horizon","inline2","inline3","inline4","inline5","inline6","inline7","InlineNova","rail1","rail2","footer"]},{page:"Attractions",minSlots:5,slotPositions:["horizon","inline2","inline3","inline4","inline5","inline6","inline7","InlineNova","rail1","rail2","footer"]},{page:"Attraction_Products",slotPositions:["horizon","inline1","inline2","inline3","inline4","inline5","inline6","inline7","InlineNova","rail1","rail2","footer"]},{page:"AttractionProductReview",slotPositions:["horizon","inline1","rail1","rail2","footer"]},{page:"Tourism",slotPositions:["horizon","InlineNova","footer"]},{page:"Home",slotPositions:["horizon","InlineNova"]}],Re=({children:e})=>e,Ce=({children:e})=>{var t=I(),o=A(),{browser:a,userAgentCategory:g}=v(),{debugTool:h}=n(c),u=m(),y=S(),[B,M]=s(null),[x,D]=(()=>{var[e,t]=s(!1),o=r((e=>{t(e),E.set(le,e)}),[]);return i((()=>{var e=!0===E.get(le);t(e);var s=E.addListener(le,t);return()=>s()}),[]),[e,o]})(),{page:L}=p(),k=re.find((e=>e.page.toLowerCase()===L.valueOf().toLowerCase())),F=f();i((()=>{googletag&&googletag.cmd.push((()=>{googletag.pubads().updateCorrelator()}))}),[y]);var O="MOBILE"===g?.5:.15;return i((()=>{null!==t&&l((()=>{var e="MOBILE"===g?window.innerHeight:window.innerHeight/2,s=window.innerHeight*O,r={userAgentCategory:g,fetchMargin:`${e}px`,renderMargin:`${s}px`,browserFamily:a.family,domainName:u,recordScriptLoadFailure:F,headerBiddingTimeout:1e3,isSRAEnabled:t,fetchTimeout:3e3,renderMarginPercentage:.15,mobileScaling:3.33};x?M(new K(r)):w(R.TARGETING,(()=>{r={...r,hasTargetingConsent:!0};var e=[];e.push(new N(r)),e.push(new q(r)),e.push(new H(r)),o&&e.push(new G(r)),M(new $(r,e,null==k?void 0:k.slotPositions))}),(()=>{r={...r,hasTargetingConsent:!1},M(new z(r))}))}))}),[a,g,x,u,F,O,k,t,o,y]),C(ie.Provider,{value:B,children:[P(b,{isRubiconEnabled:!0}),C(Ie,{children:[P(T,{children:P(d,{children:h&&P(se,{testMode:x,onTestModeChange:D})})}),x&&P(Y,{onDisableTestMode:()=>D(!1)}),P(oe,{children:P(ye,{children:e})})]})]})},Pe={__key:0xe47b7de10017,id:"e47b7de100177531430992d789c646b6",loc:{},definitions:[]};function Be(){var e=u(),[t,r]=s(null);return i((()=>{var e;r(null!=(e=E.get("adTargetingUserBucketOverride"))?e:null)}),[]),e?null!==t?t:Math.abs(_(e)%100).toString():"-1"}var Me="ads.first_viewed_page_uid",xe=e=>e.toISOString().substring(0,10),De=()=>{var{page:e,params:t}=p(),r=S(),{browser:o,userAgentCategory:l}=v(),d=k(),{hotels:g}=F(),h=((e,t)=>a((()=>{if(e.includes("Fusion")){var s;switch(e){case"AttractionsFusion":s="Attractions";break;case"AttractionProductsFusion":s="Attraction_Products";break;case"HotelsFusion":s="Hotels";break;case"HotelsListFusion":s="HotelsList";break;default:s=e}return"MOBILE"===t?`Mobile${s}`:s}return e}),[e,t]))(e,l),c=((e,t)=>a((()=>"Attractions"!==e&&"MobileAttractions"!==e||!(e=>{var t;return!(null!=e&&e.pagee||(null==e||null==(t=e.filters)?void 0:t.length)>0)})(t)?null:"attract_cover"),[e,t]))(h,t),{targeting:u}=n(X),m=O(),[f,b]=s(null),{theme:I}=j(),{travelersChoiceCategory:A,travelersChoiceGeoId:T}=(()=>{var{page:e,params:t}=p();return a((()=>{if("TravelersChoice"!==e)return{travelersChoiceCategory:null,travelersChoiceGeoId:null};var s="args"in t&&t.args||"";return{travelersChoiceCategory:ne.has(s)?s.toLowerCase():null,travelersChoiceGeoId:"geo"in t&&t.geo&&t.geo.toString()||null}}),[e,t])})(),E="geoId"in t&&t.geoId||0,y="detailId"in t&&t.detailId||0,w=Be(),R={hotelTravelInfo:(null==g?void 0:g.checkInDate)&&g.checkOutDate&&{checkInDate:xe(g.checkInDate),checkOutDate:xe(g.checkOutDate),defaultDates:g.defaultDates}||null,locationId:y||E,pageType:h,browserType:o.family,userAgentCategory:l,pageName:e},[{fetching:C,data:P}]=B({query:Pe,variables:{pageAdsRequestInput:R}});return i((()=>{var e,t=null==P||null==(e=P.gptInfo)?void 0:e[0];if(!C&&t){var{pageLevelTargeting:s,adBase:i,ppid:o}=t;if(s&&i){var a=Object.fromEntries(s.map((e=>{var{key:t,value:s}=e||{};return t&&s?[t,[...s]]:null})).filter(Boolean)),n=Object.fromEntries(Object.entries(u).map((([e,t])=>[e,Array.isArray(t)?t:[t]]))),l=L.get(Me);return l||L.set(Me,`${r}`),b({...a,...n,pv_id:[r],sess:[d||null],adBase:i,ppid:o,userBucket:String(w),theme:I.toLowerCase(),cover:c,first_impression:l===r?"true":"false",logged_in:null!==m?"true":"false",...A&&{tc_category:A},...T&&{tc_geo:T}}),()=>{b(null)}}}}),[P,C,r,d,u,w,c,m,I,A,T]),f};return e("u",Be),[()=>{W=Object.freeze({GPT:{url:"//securepubads.g.doubleclick.net/tag/js/gpt.js",name:"GPT",consentRequired:!1},RUBICON_DYNAMIC:{url:"//micro.rubiconproject.com/prebid/dynamic/13406.js",name:"RUBICON_DYNAMIC",consentRequired:!0},AMAZON_PREBID:{url:"//c.amazon-adsystem.com/aax2/apstag.js",name:"AMAZON_PREBID",consentRequired:!0},BRAND_METRICS:{url:"https://cdn.brandmetrics.com/tag/632e0f7a807b443aa4539a7fc1ca3275/tripadvisor.js",name:"BRAND_METRICS",consentRequired:!0}}),V=class{constructor({fetchMargin:e="0px",renderMargin:t="0px",scriptSources:s,recordScriptLoadFailure:r=(()=>{})}){this.loadPromise=null,this.fetchMargin=void 0,this.renderMargin=void 0,this.scriptSources=void 0,this.recordScriptLoadFailure=void 0,this.scriptSources=s,this.fetchMargin=e,this.renderMargin=t,this.recordScriptLoadFailure=r}getScriptSources(){return this.scriptSources}getConsent(){return new Promise((e=>{w(R.TARGETING,(()=>e(!0)),(()=>e(!1)))}))}observe(e,t="0px"){return new Promise((s=>{var r=new IntersectionObserver((e=>{e.reduce(((e,t)=>e||t.isIntersecting),!1)&&(r.disconnect(),s())}),{rootMargin:t,threshold:0});r.observe(e)}))}loadScripts(){return this.loadPromise||(this.scriptSources,this.loadPromise=this.getConsent().then((e=>{var t=e?this.scriptSources:this.scriptSources.filter((e=>!e.consentRequired));return Promise.all(t.map((e=>y(e.url,"TAPS"))))})).then((()=>console.debug("ScriptLoader: scripts are loaded"))).catch((e=>(this.loadPromise=null,this.scriptSources,this.recordScriptLoadFailure(this.scriptSources.map((e=>e.name))),Promise.reject(e))))),this.loadPromise}load(e,t){return t||"undefined"==typeof IntersectionObserver?this.loadScripts():Promise.all([this.observe(e,this.fetchMargin).then((()=>this.loadScripts())),this.observe(e,this.renderMargin).then((()=>console.debug("ScriptLoader:",e,"is in viewport")))])}},e("GptAdServer",z=class{constructor({fetchMargin:e,renderMargin:t,browserFamily:s,recordScriptLoadFailure:r,isSRAEnabled:i,fetchTimeout:o,renderMarginPercentage:a,mobileScaling:n,hasTargetingConsent:l},d){this.slotSubscriptions={},this.subscriptions=[],this.ppid=null,this.scriptLoader=void 0,this.slotsCreated=void 0,this.slotUpdateTimes=void 0,this.isSRAEnabled=void 0,this.isAllSlotsCreated=void 0,this.lastIdCreated=void 0,this.hasSRAAlreadyHappened=void 0,this.horizonCreated=!1,this.confirmSafeFrame=e=>{try{var t,s=null==e||null==(t=e.slot)?void 0:t.getSlotElementId(),r=document.querySelector(`#${s.split(":").join("\\:")} div[id^="google_ads_iframe"] iframe`);if(!(r&&r instanceof HTMLIFrameElement))return;setTimeout((()=>{var t,s,i=r.contentDocument;if(i){var o=i.documentElement,a=Array.from(i.getElementsByTagName("iframe")).filter((e=>e.src&&e.src.includes("ad.doubleclick.net/ddm"))).length>0,n=o&&!!o.getAttribute("amp-version"),l=!!i.getElementById("google_image_div"),d=(null==e||null==(t=e.slot)||null==(s=t.getResponseInformation())?void 0:s.advertiserId)===de;if(!(n||l||d||a)){var g=Array.from(i.scripts).map((e=>e.src.replace(/.*\/\//,"").split(/[/?#]/)[0].split(".").slice(-2).join("."))).filter((e=>-1===ge.indexOf(e))).filter(Boolean);g.length&&console.error("Same-domain ad served with third-party scripts",{slotInfo:e.slot.getResponseInformation(),unapprovedDomains:g})}}}),1500)}catch(e){}},globalThis.googletag=globalThis.googletag||{cmd:[]},this.scriptLoader=new V({fetchMargin:e,renderMargin:t,scriptSources:[W.GPT],recordScriptLoadFailure:r}),this.isSRAEnabled=i,this.hasSRAAlreadyHappened=!1,this.isAllSlotsCreated=!1,this.slotsCreated=new Map,this.slotUpdateTimes=new Map,null==d||d.forEach((e=>{this.slotsCreated.set(e,{created:!1})})),googletag.cmd.push((()=>{if(l||googletag.pubads().setPrivacySettings({nonPersonalizedAds:!0}),googletag.pubads().setSafeFrameConfig({allowOverlayExpansion:!0,allowPushExpansion:!0,sandbox:"EDGE"!==s}),googletag.pubads().addEventListener("slotOnload",this.confirmSafeFrame),this.isSRAEnabled){googletag.pubads().enableLazyLoad({fetchMarginPercent:-1,renderMarginPercent:a,mobileScaling:n});var e=setInterval((()=>{this.isAllSlotsCreated||!this.lastIdCreated||this.hasSRAAlreadyHappened?this.hasSRAAlreadyHappened&&clearInterval(e):(clearInterval(e),this.triggerSRA(this.lastIdCreated,""))}),o)}else googletag.pubads().disableInitialLoad(),googletag.enableServices();googletag.pubads().addEventListener("slotRenderEnded",(e=>{var t,s=null==e||null==(t=e.slot)?void 0:t.getSlotElementId(),r={isRendered:!0,isLoaded:!1,isEmpty:de===(null==e?void 0:e.advertiserId)||(null==e?void 0:e.isEmpty)};s&&r&&this.slotSubscriptions[s]&&(this.slotSubscriptions[s](r,"slotRenderEnded"),this.subscriptions.forEach((e=>e())))})),googletag.pubads().addEventListener("slotOnload",(e=>{var t,s=null==e||null==(t=e.slot)?void 0:t.getSlotElementId(),r={isLoaded:!0};s&&r&&this.slotSubscriptions[s]&&(this.slotSubscriptions[s](r,"slotOnload"),this.subscriptions.forEach((e=>e())))})),googletag.pubads().addEventListener("slotVisibilityChanged",(e=>{var t,s=null==e||null==(t=e.slot)?void 0:t.getSlotElementId(),r={isVisible:!(null==e||!e.inViewPercentage)};s&&r&&this.slotSubscriptions[s]&&(this.slotSubscriptions[s](r,"slotVisibilityChanged"),this.subscriptions.forEach((e=>e())))})),googletag.pubads().addEventListener("impressionViewable",(e=>{var t,s=null==e||null==(t=e.slot)?void 0:t.getSlotElementId(),r={isImpressionViewable:!0};s&&r&&this.slotSubscriptions[s]&&(this.slotSubscriptions[s](r,"impressionViewable"),this.subscriptions.forEach((e=>e())))}))}))}getSlots(){return googletag.pubadsReady?(googletag.pubads().getSlots()||[]).map((e=>{var{advertiserId:t,creativeId:s,lineItemId:r,campaignId:i,creativeTemplateId:o}=e.getResponseInformation()||{};return{id:e.getSlotElementId(),targeting:Object.fromEntries(e.getTargetingKeys().map((t=>[t,e.getTargeting(t)]))),responseInformation:{isCollapser:t&&t===de,advertiserId:t,creativeId:s,lineItemId:r,campaignId:i,creativeTemplateId:o}}})):[]}getSlot(e){return googletag.pubads().getSlots().find((t=>t.getSlotElementId()===e))}getEnhancedSlot(e){if(googletag.pubadsReady){var t=this.getSlot(e);if(t){var{advertiserId:s,creativeId:r,lineItemId:i,campaignId:o,creativeTemplateId:a}=t.getResponseInformation()||{};return{id:t.getSlotElementId(),targeting:Object.fromEntries(t.getTargetingKeys().map((e=>[e,t.getTargeting(e)]))),responseInformation:{isCollapser:s&&s===de,advertiserId:s,creativeId:r,lineItemId:i,campaignId:o,creativeTemplateId:a}}}}}addEventListener(e){return this.subscriptions.push(e),()=>{var t=this.subscriptions.indexOf(e);t>-1&&this.subscriptions.splice(t,1)}}createSlot(e){var{id:t,elem:s,size:r,position:i,targeting:o,aboveTheFold:a}=e;return googletag.cmd.push((()=>{if(!this.getSlot(t)){var{adBase:e,ppid:s,...a}=o;null!==s&&(googletag.pubads().setPublisherProvidedId(s),this.ppid=s);var n=function(e){return[...e.split("|").map((e=>{var t=e.split("x");return[parseInt(t[0],10),parseInt(t[1],10)]})),"fluid"]}(r),l=googletag.defineSlot(e,n,t);if(l){var d;if(null==l.updateTargetingFromMap||l.updateTargetingFromMap(a),l.setTargeting("refreshCount","0"),null==l.getTargetingKeys||null==(d=l.getTargetingKeys())||!d.length)return void this.broadcastEmptySlot(t);if(l.setForceSafeFrame(!1),l.addService(googletag.pubads()),l.setCollapseEmptyDiv(!0),this.slotsCreated.set(i,{slotId:t,created:!0}),this.slotUpdateTimes.has(t)||this.slotUpdateTimes.set(t,Date.now()),!this.isSRAEnabled||this.hasSRAAlreadyHappened&&"horizon"!==i)googletag.display(t);else if("horizon"!==i||this.horizonCreated){this.lastIdCreated=t;var g=!0;this.slotsCreated.forEach((({created:e})=>{e||(g=!1)})),this.isAllSlotsCreated=g,g&&this.triggerSRA(t,i)}else this.horizonCreated=!0,googletag.pubads().enableSingleRequest(),googletag.enableServices(),this.refreshSlot(t)}}})),this.scriptLoader.load(s,a||this.isSRAEnabled).then((()=>{this.isSRAEnabled||this.refreshSlot(t)})).catch((()=>{this.broadcastEmptySlot(t)})),{addEventListener:e=>(this.slotSubscriptions[t],this.slotSubscriptions[t]=e,()=>{delete this.slotSubscriptions[t]})}}triggerSRA(e,t){googletag.cmd.push((()=>{if(this.hasSRAAlreadyHappened)if(this.getSlot(e)){var t=this.slotUpdateTimes.get(e);(!t||t<=Date.now()-15e3)&&this.refreshSlot(e)}else googletag.display(e);else googletag.pubads().enableSingleRequest(),googletag.enableServices(),googletag.display(e),this.hasSRAAlreadyHappened=!0}))}refreshSlot(e){this.broadcastRefreshStart(e),googletag.cmd.push((()=>{var t=this.getSlot(e);t&&(this.slotUpdateTimes.set(e,Date.now()),googletag.pubads().refresh([t],{changeCorrelator:!1}),t.setTargeting("refreshCount",String(parseInt(t.getTargeting("refreshCount")[0],10)+1)))}))}destroySlot(e){googletag.cmd.push((()=>{var t=this.getSlot(e);t&&(googletag.destroySlots([t]),this.subscriptions.forEach((e=>e())))}))}broadcastRefreshStart(e){var t,s;null==(t=(s=this.slotSubscriptions)[e])||t.call(s,{},"slotRefreshStart")}broadcastEmptySlot(e){var t,s;null==(t=(s=this.slotSubscriptions)[e])||t.call(s,{isEmpty:!0,isLoaded:!0,isRendered:!0},"forcedEmpty")}}),e("RubiconAdServer",q=class{constructor(e){this.context=void 0,this.config=void 0,this.rubiconSupportedFormats=void 0,globalThis.pbjs=globalThis.pbjs||{que:[]},this.config=e,this.context=null,this.rubiconSupportedFormats="MOBILE"===e.userAgentCategory?ce:he}setContext(e){this.context=e}getScripts(e=!0){return e?[W.RUBICON_DYNAMIC]:[]}slotSupportsBidding(e){var t=[];return e.getSizes().forEach((e=>{"string"!=typeof e&&t.push(e)})),!!Array.isArray(t)&&t.map((e=>({width:e.getWidth(),height:e.getHeight()}))).some((e=>this.rubiconSupportedFormats.some((t=>t.width===e.width&&t.height===e.height))))}refreshSlot(e,t,s){googletag.cmd.push((()=>{var r,i=null==(r=this.context)?void 0:r.getSlot(e);i&&this.slotSupportsBidding(i)?(()=>{var[e=""]=i.getTargeting("loctype"),[t=""]=i.getTargeting("platform");pbjs.que.push((()=>{pbjs.rp.requestBids({callback:()=>{s()},timeout:this.config.headerBiddingTimeout,gptSlotObjects:[i],data:{inventory:{loctype:e,platform:t}}})}))})():t()}))}triggerSRARefresh(e,t){googletag.cmd.push((()=>{var s,r,i=[];null==(s=this.context)||null==(r=s.slotsCreated)||r.forEach((e=>{if(e.created&&e.slotId){var t,s=null==(t=this.context)?void 0:t.getSlot(e.slotId);s&&this.slotSupportsBidding(s)&&i.push(s)}})),0!==i.length?(()=>{var[e=""]=i[0].getTargeting("loctype"),[s=""]=i[0].getTargeting("platform");pbjs.que.push((()=>{pbjs.rp.requestBids({callback:()=>{t()},timeout:this.config.headerBiddingTimeout,gptSlotObjects:i,data:{inventory:{loctype:e,platform:s}}})}))})():e()}))}}),Q={init(){ue("i",arguments)},fetchBids(){ue("f",arguments)},setDisplayBids(){},targetingKeys:()=>[],_Q:[]},e("AmazonAdServer",N=class{constructor(e){this.context=void 0,this.config=void 0,this.amazonSupportedFormats=void 0,this.getScripts=e=>e?[W.AMAZON_PREBID]:[],this.config=e,this.context=null,globalThis.apstag=globalThis.apstag||Q,this.amazonSupportedFormats="MOBILE"===e.userAgentCategory?Se:pe,apstag.init({pubID:"3940",adServer:"googletag",videoAdServer:"DFP",useSafeFrames:!0,deals:!0})}setContext(e){this.context=e}slotSupportsBidding(e){var t=[];return e.getSizes().forEach((e=>{"string"!=typeof e&&t.push(e)})),!!Array.isArray(t)&&t.map((e=>({width:e.getWidth(),height:e.getHeight()}))).some((e=>this.amazonSupportedFormats.some((t=>t.width===e.width&&t.height===e.height))))}refreshSlot(e,t,s){googletag.cmd.push((()=>{var r,i=null==(r=this.context)?void 0:r.getSlot(e);i&&this.slotSupportsBidding(i)?(()=>{var e=[];i.getSizes().forEach((t=>{"string"!=typeof t&&e.push(t)}));var t=e.map((e=>[e.getWidth(),e.getHeight()]));apstag.fetchBids({slots:[{slotID:i.getSlotElementId(),slotName:i.getAdUnitPath(),sizes:t}],timeout:this.config.headerBiddingTimeout},(()=>{apstag.setDisplayBids(),s()}))})():t()}))}triggerSRARefresh(e,t){googletag.cmd.push((()=>{var s,r,i=[];null==(s=this.context)||null==(r=s.slotsCreated)||r.forEach((e=>{if(e.created&&e.slotId){var t,s=null==(t=this.context)?void 0:t.getSlot(e.slotId);s&&this.slotSupportsBidding(s)&&i.push(s)}})),0!==i.length?(()=>{var e=[];i.forEach((t=>{var s=[];t.getSizes().forEach((e=>{"string"!=typeof e&&s.push(e)}));var r=s.map((e=>[e.getWidth(),e.getHeight()]));e.push({slotID:t.getSlotElementId(),slotName:t.getAdUnitPath(),sizes:r})})),apstag.fetchBids({slots:e,timeout:this.config.headerBiddingTimeout},(()=>{apstag.setDisplayBids(),t()}))})():e()}))}}),e("IasAdServer",H=class{constructor(e){this.context=void 0,this.config=void 0,this.adSlotId=void 0,this.config=e,this.context=null,this.adSlotId=""}setContext(e){this.context=e}getScripts(e=!0){return[]}getUrl(e){return"https://pixel.adsafeprotected.com/services/pub?"+["anId=930842",e.map((e=>{var t=[];e.getSizes().forEach((e=>{"string"!=typeof e&&t.push(e)}));var s=t.map((e=>e.getWidth&&e.getHeight?`${e.getWidth()}.${e.getHeight()}`:"1.1"));return`slot={id:${e.getSlotElementId()},ss:[${s.toString()}],p:${e.getAdUnitPath()}}`})).join("&"),`wr=${window.innerWidth}.${window.innerHeight}`,`sr=${window.screen.width}.${window.screen.height}`].join("&")}shouldSkipDecorateSlotWithIAS(e){this.adSlotId=e.getSlotElementId();var[,t,s]=this.adSlotId.split(":");return ve.includes(t)||me.includes(s)}refreshSlot(e,t,s){googletag.cmd.push((()=>{var r,i=null==(r=this.context)?void 0:r.getSlot(e);if(i)if(this.shouldSkipDecorateSlotWithIAS(i))t();else{var o=this.getUrl([i]);(()=>{var e=setTimeout((()=>{t()}),this.config.headerBiddingTimeout);fetch(o,{credentials:"same-origin",headers:{"X-Purpose":"review"}}).then((e=>e.json())).then((r=>{r.code&&r.message&&(console.error(`Error in IAS response. Code: ${r.code}. Message: ${r.message}`),t()),clearTimeout(e);var{fr:o,brandSafety:a}=r,{id:n,vw:l}=r.slots.slot,d=E.get(le),g=E.get(fe);d||g||i.setTargeting("fr",o),i.setTargeting("id",n),i.setTargeting("vw",l),i.updateTargetingFromMap(a),s()})).catch((()=>{t()}))})()}else t()}))}triggerSRARefresh(e,t){googletag.cmd.push((()=>{var s,r,i=[];if(null==(s=this.context)||null==(r=s.slotsCreated)||r.forEach((e=>{if(e.created&&e.slotId){var t,s=null==(t=this.context)?void 0:t.getSlot(e.slotId);s&&(this.shouldSkipDecorateSlotWithIAS(s)||i.push(s))}})),0!==i.length){var o=this.getUrl(i);(()=>{var s=setTimeout((()=>{e()}),this.config.headerBiddingTimeout);fetch(o,{credentials:"same-origin",headers:{"X-Purpose":"review"}}).then((e=>e.json())).then((r=>{r.code&&r.message&&(console.error(`Error in IAS response. Code: ${r.code}. Message: ${r.message}`),e()),clearTimeout(s);var{fr:o,brandSafety:a}=r,{id:n,vw:l}=r.slots.slot,d=E.get(le),g=E.get(fe);i.forEach((e=>{d||g||e.setTargeting("fr",o),e.setTargeting("id",n),e.setTargeting("vw",l),e.updateTargetingFromMap(a)})),t()})).catch((()=>{e()}))})()}else e()}))}}),U=class{constructor(){this.skippedServers=0,this.requestedRefresh=!1,this.bidsFetched=0}},e("PreBiddingGptAdServer",$=class extends z{constructor(e,t,s){super(e,s),this.servers=void 0,this.slotStatuses=void 0,this.slotPositions=void 0,this.servers=t,this.slotStatuses=new Map,this.slotPositions=s;var r=this.servers.flatMap((e=>(e.setContext(this),e.getScripts(!0))));r.length&&(this.scriptLoader=new V({fetchMargin:e.fetchMargin,renderMargin:e.renderMargin,scriptSources:[W.GPT,...r],recordScriptLoadFailure:e.recordScriptLoadFailure}))}createSlot(e){return super.createSlot(e)}skipServerSRA(e,t){var s=this.slotStatuses.get(e)||new U;s.skippedServers<this.servers.length-1?(s.skippedServers+=1,this.slotStatuses.set(e,s)):(s.requestedRefresh=!0,this.slotStatuses.set(e,s),super.triggerSRA(e,t))}doTriggerSRA(e,t){var s=this.slotStatuses.get(e)||new U;s.requestedRefresh||(s.bidsFetched+=1,s.bidsFetched<this.servers.length-s.skippedServers?this.slotStatuses.set(e,s):this.getSlot(e)&&(s.requestedRefresh=!0,this.slotStatuses.set(e,s),super.triggerSRA(e,t)))}triggerSRA(e,t){this.isSRAEnabled&&(this.slotStatuses.set(e,new U),this.servers.forEach((s=>{s.triggerSRARefresh((()=>this.skipServerSRA(e,t)),(()=>this.doTriggerSRA(e,t)))})))}skipServer(e){var t=this.slotStatuses.get(e)||new U;t.skippedServers<this.servers.length-1?(t.skippedServers+=1,this.slotStatuses.set(e,t)):(t.requestedRefresh=!0,this.slotStatuses.set(e,t),super.refreshSlot(e))}doRefresh(e){var t=this.slotStatuses.get(e)||new U;t.requestedRefresh||(t.bidsFetched+=1,t.bidsFetched<this.servers.length-t.skippedServers?this.slotStatuses.set(e,t):this.getSlot(e)&&(t.requestedRefresh=!0,this.slotStatuses.set(e,t),super.refreshSlot(e)))}refreshSlot(e){this.slotStatuses.set(e,new U),this.servers.forEach((t=>{t.refreshSlot(e,(()=>this.skipServer(e)),(()=>this.doRefresh(e)))}))}}),e("BrandMetricsAdServer",G=class{constructor(e){this.context=void 0,this.config=void 0,this.config=e,this.context=null}setContext(e){this.context=e}getScripts(e=!0){return e?[W.BRAND_METRICS]:[]}refreshSlot(e,t){t()}triggerSRARefresh(e){e()}}),e("TestAdServer",K=class e extends z{constructor(e){super(e)}static getAdBase(e){return e.replace(/\.s\//,".test.s/")}createSlot({id:t,targeting:s,...r}){return super.createSlot({id:t,targeting:{...s,adBase:e.getAdBase(s.adBase)},...r})}destroySlot(e){super.destroySlot(e)}refreshSlot(e){super.refreshSlot(e)}}),Y=be,X=Z=o({targeting:{},setTargeting:()=>{}}),J=Ee,te=ee=o({pageAdSlotSettings:null}),se=g((()=>t("fxp4ln"))),globalThis.googletag=globalThis.googletag||{cmd:[]},re=we,ie=o(null),oe=h(Re),ae=Ce,ne=new Set(["Destinations","Beaches","Hotels","Restaurants","ThingsToDo"]),e({AD_TEST_MODE_STORAGE_KEY:le,AdServer:ie,AdServerProvider:ae,AmazonAdServer:N,BrandMetricsAdServer:G,FETCH_TIMEOUT:3e3,GptAdServer:z,HEADER_BIDDING_TIMEOUT:1e3,IasAdServer:H,PageAdSlotSettings:te,PageAdSlotSettingsProvider:ye,PageTargeting:X,PageTargetingProvider:Ie,PreBiddingGptAdServer:$,RubiconAdServer:q,TestAdServer:K,TestModeIndicator:Y,u:Be,usePageTargeting:De})},[e=>(s=e.useState,r=e.useCallback,i=e.useEffect,o=e.createContext,a=e.useMemo,n=e.useContext,l=e.startTransition,d=e.Suspense,g=e.lazy,h=e.memo),e=>(c=e.LithiumBootstrapContext,u=e.useDeviceId),e=>(p=e.useRoute,S=e.usePageviewUid),e=>v=e.useUserAgent,e=>m=e.useDomainName,e=>f=e.useLogAdScriptLoadFailure,e=>b=e.default,e=>(I=e.useSRATest,A=e.useBrandMetricsIntegrationTest),e=>T=e.ErrorBoundary,e=>E=e.default,e=>y=e.importScript,e=>(w=e.requestConsent,R=e.CategoriesEnum),e=>(C=e.jsxs,P=e.jsx),e=>B=e.useQuery,e=>M=e.useLocale,e=>x=e.useViewportCategory,e=>D=e.default,e=>L=e.default,e=>k=e.useSessionId,e=>F=e.useTravelInfo,e=>O=e.useUserId,e=>_=e.stringHash,e=>j=e.useTheme]]},["1o4yt4","p5p2yo","fgwvq1","1nnprh","qlcuu5","tbkd43","1btbaw","1nexzi","183pm0","19b9b1","1q7wvk","1973cc","121h32","1mqwhq","17thqz","1ys6v1","gugp1d","tp1g68","1al4vi","1etaac","52far5","1eww82","1u9jlw"]]);
