(this.$WP=this.$WP||[]).push(["1qrggy",(e,r)=>{"use strict";var t,a,n,u,i,s,l,o,c,d,_,f,E,p,h,R={__key:0xdf34cfbfbd6d,id:"df34cfbfbd6d4c5ca6e4357be8a2460d",loc:{},definitions:[]},S=e=>{var r,t,[{data:a,fetching:n}]=u({query:R,variables:{locationId:e}},{HRM_updateTrialSubscription:()=>"invalidateAndRefetch"}),i=null==a||null==(r=a.HRM_getLocationsReputationManagementSubscriptionInfo)||null==(t=r[0])?void 0:t.subscriptionName;return{isSubscriber:"REPUTATION_PRO"===i||"REVIEW_HUB"===i,isChecking:n,checked:!!a&&!n}},v={__key:46379621309405,id:"2a2e98da5bdd2e9fb028144b0aed84f9",loc:{},definitions:[]},O={__key:94659377364728,id:"56179a8ffef8986ad0736555919d83ad",loc:{},definitions:[]},T=e=>{var r=(e=>{var r,[{data:t,fetching:a,error:u}]=n({query:O,variables:{locationId:e||0},pause:null==e}),i=null==t||null==(r=t.locations)?void 0:r[0];return null==i?{data:void 0,fetching:a,error:u}:{data:{placeType:i.placeType,countryId:i.countryId},fetching:a,error:u}})(e),{data:t}=r,a=null;return"EATERY"!==(null==t?void 0:t.placeType)&&"ACCOMMODATION"!==(null==t?void 0:t.placeType)||(a=null==t?void 0:t.placeType),{...r,data:a}},I=e=>{var r,t,[a]=u({query:R,variables:{locationId:e}},{HRM_updateTrialSubscription:()=>"invalidateAndRefetch"}),{data:n,fetching:i,error:s}=a,l=null==n||null==(r=n.HRM_getLocationsReputationManagementSubscriptionInfo)?void 0:r[0];if(null==l)return{fetching:i,error:s};var{subscriptionName:o,packageName:c,trialInfo:d,features:_,hasCancelledSubscription:f}=l;return{data:{subscriptionName:o,packageName:c,features:(null!=_?_:[]).filter(Boolean),trialInfo:{status:null!=(t=null==d?void 0:d.status)?t:null},hasCancelledSubscription:f||!1},fetching:i,error:s}},b=e=>{var r,{data:t,fetching:a,error:n}=I(e);return{featureSet:new Set((null==t||null==(r=t.features)?void 0:r.filter(Boolean))||[]),fetching:a,error:n}},A=["REVIEW_INSIGHTS","FB_GOOG_REVIEWS","RESPONSE_TEMPLATES"],P=["REVIEW_INSIGHTS","ARC","FB_GOOG_REVIEWS","RESPONSE_TEMPLATES","NOTIFICATIONS"],g=e=>{var{isSubscriber:r}=S(e),{featureSet:a,fetching:n,error:u}=b(e),{data:i,fetching:s,error:l}=T(e),o=n||s,c=u||l;return{data:t((()=>r?new Set:"EATERY"===i?new Set(A.filter((e=>!a.has(e)))):"ACCOMMODATION"===i?new Set(P.filter((e=>!a.has(e)))):new Set),[i,a,r]),error:c,fetching:o}},C=e=>{var{featureSet:r,fetching:a,error:n}=b(e),{data:u,fetching:_,error:f}=g(e),E=a||_,p=n||f;return t((()=>{var e;return E?e=[]:(e=[d],r.has("FORK_REVIEWS")&&e.push(i),(r.has("FB_GOOG_REVIEWS")||u.has("FB_GOOG_REVIEWS"))&&e.push(s,l),r.has("BCOM_XPED_REVIEWS")&&e.push(o,c)),{fetching:E,error:p,data:e}}),[E,r,u,p])},y=e=>{var{locationId:r,children:t}=e,{featureSet:a}=b(r),{data:n}=g(r);if("and"in e&&!0===e.and){var{feature:u,upsellFeature:i}=e;if(a.has(u)&&n.has(i))return"function"==typeof t?t(!0):t}else if(!0===e.or){var{feature:s,upsellFeature:l}=e;if(a.has(s)||n.has(l))return"function"==typeof t?t(!0):t}else if("feature"in e&&null!=e.feature){var{feature:o}=e;if(a.has(o))return"function"==typeof t?t(!0):t}else if("upsellFeature"in e&&null!=e.upsellFeature){var{upsellFeature:c}=e;if(n.has(c))return"function"==typeof t?t(!0):t}return"function"==typeof t?_(f,{children:t(!1)}):null},M=({locationId:e,locationType:r,children:t})=>{var{data:a}=T(e);return a!==r?null:t},m=e=>{var{data:r}=T(e),t=(e=>{var{localize:r}=E(),{subscribeBannerMcid:t}=a(p);return a=>{switch(a.constantKey){case"HOW_TO_RESPOND_PAGE_PATH":return"/TripAdvisorInsights/respond";case"LOCALIZED_PRODUCT_NAME":return r.string("hrm_template_tooltip_fremium_rp");case"PRODUCT_NAME":return"reputationpro";case"READ_STATUS_FEATURE_DATE_STRING":return"9999-11-30";case"UPSELL_BANNER_TITLE":return r.string("hrm_review_insights_banner_header");case"UPSELL_PATH":return`/business/reputationpro?detail=${e}&mcid=${t}`;case"UPSELL_PLATFORM_REVIEWS":return null;default:return a}}})(e),n=(()=>{var{localize:e}=E();return r=>{switch(r.constantKey){case"HOW_TO_RESPOND_PAGE_PATH":return"/ForRestaurants-reviews";case"LOCALIZED_PRODUCT_NAME":return e.string("rs_reputation_product_name_short");case"PRODUCT_NAME":return"reviewhub";case"READ_STATUS_FEATURE_DATE_STRING":return"2021-03-23";case"UPSELL_BANNER_TITLE":return e.string("hrm_review_hub_banner_header");case"UPSELL_PATH":return"/ForRestaurants/ta_reviewhub";case"UPSELL_PLATFORM_REVIEWS":return e.string("rs_repman_tooltip_platforms",{sPlatform:r.platform});default:return r}}})();if(null==r)return()=>null;switch(r){case"ACCOMMODATION":return t;case"EATERY":return n;default:return r}},L=({locationId:e,children:r,...t})=>{var a=m(e)(t);return null==a?null:r(a)},N=e=>{var{featureSet:r,fetching:a,error:n}=b(e);return t((()=>{var e=[];return a||(e=[d],r.has("FORK_REVIEWS")&&e.push(i),r.has("FB_GOOG_REVIEWS")&&e.push(s,l),r.has("BCOM_XPED_REVIEWS")&&e.push(o,c)),{data:e,fetching:a,error:n}}),[n,r,a])},F=(e,r)=>{var[{data:a}]=n({query:v,variables:{locationId:e},pause:!h.has(r)});return t((()=>{var e,r,t,n=(t=null==a||null==(e=a.locationSubscriptions)||null==(r=e[0])?void 0:r.subscriptions)&&t.filter((e=>e&&"ACTIVE"===e.status&&"TA"===e.provider)).length>0||!1;return{isEnabled:n,attributes:[{name:"isRmSubscriber",value:n}]}}),[a])},D=e=>{var{isSubscriber:r}=S(e);return r};return[()=>{h=new Set(["OwnerResponse","RMReviewCollection","OwnerNotificationSetting","RMHome"]),e({LocationPlaceTypeCheck:M,ProvideReputationConstant:L,ReputationFeatureCheck:y,useAsyncHrmSubscriberCheck:S,useAvailableProviders:C,useHrmFullStoryAttributes:F,useHrmSubscriberCheck:D,useLocationPlaceType:T,useRMSubscriptionInfo:I,useReputationConstantProvider:m,useReputationFeatureSet:b,useSupportedProviders:N,useUpsellReputationFeatureSet:g})},[e=>(t=e.useMemo,a=e.useContext),e=>n=e.useQuery,e=>u=e.useInvalidatableQuery,e=>(i=e.THEFORK_PROVIDER,s=e.GOOGLE_PROVIDER,l=e.FACEBOOK_PROVIDER,o=e.BCOM_PROVIDER,c=e.EXPEDIA_PROVIDER,d=e.TA_PROVIDER),e=>(_=e.jsx,f=e.Fragment),e=>E=e.useLocalize,e=>p=e.ReviewsMcidContext]]},["1o4yt4","1mqwhq","1fbuhs","kipze9","121h32","17thqz","15xwfg"]]);
