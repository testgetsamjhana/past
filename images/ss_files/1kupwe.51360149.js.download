(this.$WP=this.$WP||[]).push(["1kupwe",(e,t)=>{"use strict";var a,r,d,i,n,o,l,c,u,s,m,I,f,p,v,h,y,E,C,g,w,M,T,b,N,A,S,L,R,k,_,x,O,D,V,P,q,U,H,B,F,$,j,z,G,W=["BLURRED_ALT"],Y=e=>e.isIbOffer||!e.clickToken?null:y(v,{name:"external-link-no-box"}),Z=({data:e,status:t,providerDisplayName:a,buttonText:r,priceText:d,strikeThroughText:i,detailsHeight:n,layout:o})=>{var{localize:l}=s(),c=I({event:"CLICKOUT"});return"AVAILABLE"!==t?null:h("div",{className:`GlgOJ z R2 e ${W.includes(o)?"gUoES":""}\n     ${"LANDSCAPE"===o?"sEiWH":""} ${"BLURRED_ALT"===o?"UYmSS":""}`,children:[h("div",{className:"gHkKZ Vt F2",style:{height:n},children:[h("div",{...f(e,void 0),className:"tOcbq q _S",onClick:c,children:[a,Y(e)]}),h("div",{className:"FwOoB F2 q",children:[i&&y("div",{className:"qMZmt Wa",children:i}),y("div",{className:"jXQqC b",children:d})]})]}),y("div",{...f(e,void 0,!1),className:"qkSLf F2",onClick:e=>c(e,null),children:y(m,{legacyStyled:!0,variant:"commerce",size:"LANDSCAPE"===o?"small":"medium",fullWidth:W.includes(o),children:y("span",{className:"q",children:r||l("view_deal")})})})]})},K={__key:0xe66457ddf43a,id:"e66457ddf43a3caea0288bd37b000360",loc:{},definitions:[]},Q=(e,t)=>{var[d,i]=a("");return r((()=>{var a=setTimeout((()=>{if(e){var a=T.generateUrlHashString(t);i(a),T.updateHash(t)}else i(""),T.removeHash()}),0);return()=>clearTimeout(a)}),[e,t,t.referenceCompoundMediaId,t.selectedIndex]),d},J=({close:e})=>{var t=x();return t?y(O,{mobileRenderer:()=>y(D,{children:h("div",{className:"NdjYr w _Z",children:[y(P,{onBack:e}),y(b,{height:"100%",width:"100%"})]})}),desktopRenderer:()=>{if(!t)return null;var{width:a,height:r}=t;if(!a||!r)return null;var d=V(a,r,!0),i={top:`${d.mh}px`,bottom:`${d.mh}px`,left:`${d.mw}px`,right:`${d.mw}px`};return y(D,{children:h("div",{className:"NdjYr",style:i,children:[y("div",{className:"CVNBL",children:y(q,{onCloseClick:e})}),y("div",{className:"unrsl w _Z",children:y(b,{height:"100%",width:"100%"})})]})})}}):null},X={referenceCompoundMediaId:null,media:null,selectedIndex:null,addedToHistory:!1},ee=(e,t)=>{switch(t.type){case"ALBUM":return{...e,albumId:t.albumId,typeId:t.albumId!==N.TRAVELER_ALBUM?A[S(L().mediaGroup)]:A.TRAVELER,categoryId:t.categoryId?t.categoryId:t.albumId,media:void 0,referenceCompoundMediaId:t.referenceCompoundMediaId};case"CATEGORY":return{...e,categoryId:t.categoryId,referenceCompoundMediaId:void 0,media:void 0};case"TYPE":return{...e,typeId:t.typeId,referenceCompoundMediaId:void 0,media:void 0};case"SORT":return{...e,sort:t.sort,referenceCompoundMediaId:void 0,media:void 0};case"DETAIL":return{...e,selectedIndex:t.selectedIndex,media:t.media};case"INVALIDATE_REFERENCE_MEDIA":return{...e,media:null,referenceMedia:void 0,referenceCompoundMediaId:void 0};case"UPDATE_REFERENCE_MEDIA":return{...e,referenceMedia:t.referenceMedia,media:{media:t.referenceMedia,loading:!1}};case"DETAIL_DISMISS":return{...e,media:e.referenceMedia?{loading:!1,media:e.referenceMedia}:null};case"UPDATE_LOCATION_INFO":return{...e,locationName:t.locationName,locationTotalMediaCount:t.locationTotalMediaCount};case"OPEN":return{...e,...t.state};case"RESET_STATE":return{...e,...X};default:return e}},te=({locationId:e,offer:t,businessContact:a})=>y(C,{query:K,variables:{locationId:e},children:({fetching:r,data:d})=>{var i,n,o,l;if(r||!d)return y(ae,{locationId:e,locationName:"",offer:t,businessContact:a});var c=null==d||null==(i=d.locations)||null==(n=i[0])?void 0:n.name,u=null==d||null==(o=d.locations)||null==(l=o[0])?void 0:l.mediaCount;return y(ae,{locationId:e,locationName:c,locationTotalMediaCount:u,offer:t,businessContact:a})}}),ae=({locationId:e,locationName:t,locationTotalMediaCount:d,offer:u,businessContact:s})=>{var m=R(),[I]=a(T.getHash()),[f,p]=a(U(I)),[v]=a(((e,t)=>{if(H(t)){var a=T.initDefaults(T.generateMediaViewerStateFromPVRoute(t));return a.locationId=e,a}return T.generateMediaViewerState(t)})(e,I)),[E,C]=i(ee,{...v,locationId:e}),g=n(w("media-viewer")),b=n(!1);$(f,E);var[N,A]=a(void 0);r((()=>{var e=e=>{e.state&&"openMediaViewer"in e.state?p(!1):e.state&&"backToGallery"in e.state&&(C({type:"DETAIL_DISMISS"}),"media"in e.state&&A(e.state.media))};return window?(window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}):()=>{}}),[N,E.selectedIndex]),r((()=>{f&&m(k.MV_OPEN,{locationId:e,albumId:E.albumId,categoryId:E.categoryId,typeId:E.typeId})}),[f,E.albumId,E.categoryId,e,E.typeId,m]),r((()=>C({type:"UPDATE_LOCATION_INFO",locationName:t,locationTotalMediaCount:d})),[t,d]);var S=o((()=>{b.current&&window&&(E.addedToHistory?window.history.go(-2):window.history.back(),b.current=!1),m(k.CLOSE_CLICK,{locationId:e,albumId:101,categoryId:101,typeId:0}),p(!1),C({type:"RESET_STATE"})}),[e,E.addedToHistory,m]);r((()=>{var t=t=>{var a=T.initDefaults(t);a.referenceCompoundMediaId&&a.referenceCompoundMediaId.id<0&&(a.referenceCompoundMediaId=null);var r=T.generateUrlHashString(a);window&&document&&(window.history.replaceState({openMediaViewer:!0},document.title,null),window.history.pushState(null,document.title,r)),b.current=!0,p(!0),C({type:"OPEN",state:{locationId:e,...a}})},a=g.current;return a.on("open",t),()=>{a.off("open",t)}}),[e]);var L=l((()=>{var t;return{locationId:e,albumId:E.albumId,categoryId:E.categoryId,typeId:E.typeId,mediaId:null==(t=E.referenceCompoundMediaId)?void 0:t.id,sort:E.sort}}),[e,E]);return h(_.Provider,{value:L,children:[y(B,{children:y(c,{fallback:y(J,{close:S}),children:f&&y(j,{offer:u,businessContact:s,close:S,mediaViewerState:E,dispatchMVAction:C})})}),y(M,{keyName:"Escape",callback:S})]})},re=({offer:e})=>y(z,{businessContact:()=>y(E,{}),offer:t=>e?y(F,t?{...e,layout:"LANDSCAPE"}:{...e,layout:"BLURRED_ALT"}):null}),de=e=>{var t,a,r=null==(t=e.listing)||null==(a=t.chevronOffers)?void 0:a[0];return y(G,{offer:r})},ie=({optimusEnabled:e})=>y(p,{optimusEnabled:e,ttp:"hotel-review-photo-viewer-offer",children:e=>y(de,{...e})});return[()=>{F=Z,$=Q,j=u((()=>t("1p9rcp"))),z=d(g((e=>{var t;return{locationId:null!=(t=e.page.detailId)?t:0}}))(te)),G=d(re),e({RenderHRMediaViewer:de,default:ie})},[e=>(a=e.useState,r=e.useEffect,d=e.memo,i=e.useReducer,n=e.useRef,o=e.useCallback,l=e.useMemo,c=e.Suspense,u=e.lazy),e=>s=e.useLocalize,e=>m=e.default,e=>(I=e.useClickOfferElement,f=e.getOfferElementProps,p=e.MetaQueryPoller),e=>v=e.Icon,e=>(h=e.jsxs,y=e.jsx),e=>E=e.BusinessContactNode,e=>C=e.Query,e=>g=e.connect,e=>w=e.createRadio,e=>M=e.default,e=>T=e,e=>b=e.default,e=>(N=e.AlbumTypes,A=e.mediaGroupIds,S=e.getMediaGroupForString,L=e.getMediaFilterToRetrieveAllPhotos),e=>(R=e.useMVTrackingWithoutContext,k=e.trackedPageActions,_=e.MVTrackingContext),e=>x=e.useViewport,e=>O=e.default,e=>(D=e.default,V=e.computeMVOverlayMetrics),e=>P=e.default,e=>q=e.default,e=>(U=e.shouldShow,H=e.shouldRedirect),e=>B=e.ErrorBoundary]]},["1o4yt4","17thqz","jppfwt","1nzwvr","1ybxsm","121h32","1dkkni","1mqwhq","12mj4n","1bqgab","1gttbj","1xf498","u59av4","13w1vr","1eucgl","bnv2ns","8rtacq","1tax17","xc235k","wy2ipr","uk99rb","183pm0"]]);
