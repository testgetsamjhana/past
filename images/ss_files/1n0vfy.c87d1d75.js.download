(this.$WP=this.$WP||[]).push(["1n0vfy",(e,t)=>{"use strict";var a,i,s,n,r,o,l,h,c,p,d,u,m,g,v,D,k,f,C,y,b,S,P,I,_,M,w,E,T,O,H,N,L,R,A,U,x,V,F,B,z,G,W,K,q,Y,Q,j,X,J,Z,$,ee,te,ae,ie,se,ne,re,oe,le,he,ce,pe,de,ue,me,ge,ve,De,ke,fe,Ce,ye,be,Se,Pe,Ie,_e,Me,we,Ee,Te,Oe,He,Ne,Le,Re,Ae,Ue,xe,Ve,Fe,Be,ze,Ge,We,Ke,qe,Ye,Qe,je,Xe,Je,Ze;function $e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function et(e){$e(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(new Error).stack,new Date(NaN))}function tt(e){$e(1,arguments);var t=et(e);return!isNaN(t)}function at(e,t){for(var a=e<0?"-":"",i=Math.abs(e).toString();i.length<t;)i="0"+i;return a+i}function it(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var a=et(e);if(!tt(a))throw new RangeError("Invalid time value");var i=t||{},s=null==i.format?"extended":String(i.format),n=null==i.representation?"complete":String(i.representation);if("extended"!==s&&"basic"!==s)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==n&&"time"!==n&&"complete"!==n)throw new RangeError("representation must be 'date', 'time', or 'complete'");var r="",o="",l="extended"===s?"-":"",h="extended"===s?":":"";if("time"!==n){var c=at(a.getDate(),2),p=at(a.getMonth()+1,2),d=at(a.getFullYear(),4);r="".concat(d).concat(l).concat(p).concat(l).concat(c)}if("date"!==n){var u=a.getTimezoneOffset();if(0!==u){var m=Math.abs(u),g=at(Math.floor(m/60),2),v=at(m%60,2),D=u<0?"+":"-";o="".concat(D).concat(g,":").concat(v)}else o="Z";var k=at(a.getHours(),2),f=at(a.getMinutes(),2),C=at(a.getSeconds(),2),y=""===r?"":"T",b=[k,f,C].join(h);r="".concat(r).concat(y).concat(b).concat(o)}return r}var st=e=>e&&e.slice(0,7)||"",nt=e=>e.toISOString().slice(0,10);function rt(e,t){var a,i;if(!e||!t)return null;var s=nt(e),n=(e=>e.toISOString().slice(0,7))(e),r=null==(a=t.days)?void 0:a.get(s),o=null==(i=t.months)?void 0:i.get(n);return r&&o?r.price<=o.pricesUSD.rangeLow?"CHEAP":r.price>=o.pricesUSD.rangeHigh?"HIGH":r.price>o.pricesUSD.rangeLow&&r.price<o.pricesUSD.rangeHigh?"AVERAGE":null:null}function ot(e,t){return"CHEAP"===rt(e,t)}function lt(e,t){return"AVERAGE"===rt(e,t)}function ht(e,t){return"HIGH"===rt(e,t)}function ct(e,t){var a,i=nt(e);return!(null!=(a=t.days)&&a.get(i))&&!!t.endDate&&i<=t.endDate}var pt=(e,t)=>(e=>[e.string("common_day_sun_abbr"),e.string("common_day_mon_abbr"),e.string("common_day_tue_abbr"),e.string("common_day_wed_abbr"),e.string("common_day_thu_abbr"),e.string("common_day_fri_abbr"),e.string("common_day_sat_abbr")])(t)[e],dt=(e,t)=>(e=>[e.string("sunday_52"),e.string("monday_52"),e.string("tuesday_52"),e.string("wednesday_52"),e.string("thursday_52"),e.string("friday_52"),e.string("saturday_52")])(t)[e],ut=(e,t)=>{var a=e.getFullYear();switch(e.getMonth()){case 0:return t.string("common_month_year1",{0:a});case 1:return t.string("common_month_year2",{0:a});case 2:return t.string("common_month_year3",{0:a});case 3:return t.string("common_month_year4",{0:a});case 4:return t.string("common_month_year5",{0:a});case 5:return t.string("common_month_year6",{0:a});case 6:return t.string("common_month_year7",{0:a});case 7:return t.string("common_month_year8",{0:a});case 8:return t.string("common_month_year9",{0:a});case 9:return t.string("common_month_year10",{0:a});case 10:return t.string("common_month_year11",{0:a});case 11:return t.string("common_month_year12",{0:a});default:return t.string("common_month_year")}},mt={container:"FiSzx",wrapper:"rYbqD V",legend:"nGqGB",fullWidthLegend:"gDLZU",clickableIcon:"rhyVJ",explanation:"YORrA",link:"CXJym",legendDot:"htmVL",lowPrice:"iwlim",navBar:"WiWYg t",navButton:"oupgG c Wc _J",prev:"rZvCq",next:"fyUZp",disabledButton:"ECpab",months:"rujDD q c",monthDHM:"SmgvF",month:"sJwLz",monthDHMImprovementsWithoutPrice:"ttujL",monthDHMImprovementsWithPrice:"yrlQl",caption:"nuvkh c",week:"ZeumR u",weekdays:"CcMAv",weekdaysRow:"TAGfl",weekday:"OOihO",largeDates:"vxVSB",weekend:"VnxeB",body:"SWwwt",day:"rJYai Vt Z1",dayCell:"WiccV",dayCellImprovementsWithoutPrice:"zSQsx u",dayCellImprovementsWithPrice:"MtbIX u",dayHeatMap:"ToDuh e u",withHeatMap:"ZxKNQ",heatmapImprovements:"CNtGv",checkOutContainer:"tXUqa",rounded:"ZGlzW",checkInContainer:"MNzWi",today:"oFcdM",outside:"XimKR U",selected:"q",disabled:"q",dayCheaperPrice:"DDJau",dayAveragePrice:"rewuu",dayHigherPrice:"kMXBe",dayDate:"UWlOj",overflowBackground:"XLWUv",datepickerInlineMessageContainer:"JgfOd u",conversationalFilterModalCalendar:"Z1"},gt=({weekday:e,className:t,localeUtils:a})=>{var i=[0,6].indexOf(e)>=0,s=u(),n=a.formatWeekdayShort(e,s).toUpperCase();return ie("div",{className:re(t,{[mt.weekend]:i}),children:ie("abbr",{title:a.formatWeekdayLong(e,s),children:n})})},vt=({onNextClick:e,onPreviousClick:t,showNextButton:a,showPreviousButton:i})=>se("div",{className:mt.navBar,children:[ie("button",{className:re("ui_icon single-chevron-left",mt.navButton,mt.prev,{[mt.disabledButton]:!i}),"data-testid":"nav_prev","data-test-disabled":!i,onClick:()=>t&&t()}),ie("button",{className:re("ui_icon single-chevron-right",mt.navButton,mt.next,{[mt.disabledButton]:!a}),"data-testid":"nav_next",onClick:()=>e&&e()})]}),Dt=({calendarDisplayOptions:e,largeDates:t,shouldShowYellowBricks:a,showHeatMap:s,onDayClick:n,onDayMouseEnter:r,onDayMouseLeave:o,onMonthChange:l,inConversationalFilter:h,heatmapImprovementsVariant1:c,heatmapImprovementsVariant2:p})=>{var u,m=oe(),{localize:g}=d(),v={...Ce.LocaleUtils,formatWeekdayShort:e=>Ae.formatWeekdayShort(e,g),formatWeekdayLong:e=>Ae.formatWeekdayLong(e,g),formatMonthTitle:e=>Ae.formatMonthTitle(e,g)},{params:D}=he(),k="detailId"in D&&D.detailId||void 0,f="geoId"in D&&D.geoId||0,{heatMap:C,isCheckin:y}=e;s&&(u=c?{month:mt.monthDHMImprovementsWithoutPrice,day:mt.dayCellImprovementsWithoutPrice,months:mt.months}:p?{month:mt.monthDHMImprovementsWithPrice,day:mt.dayCellImprovementsWithPrice,months:mt.months}:{month:mt.monthDHM,day:mt.dayCell,months:mt.months});var b={interactionDisabled:"",navButtonInteractionDisabled:"",navButtonNext:"",navButtonPrev:""},S={...b,...mt,...u,container:re(mt.checkInContainer,{[mt.conversationalFilterModalCalendar]:h}),body:`${mt.body} notranslate`},P={...b,...mt,...u,container:re(mt.checkOutContainer,{[mt.conversationalFilterModalCalendar]:h}),body:`${mt.body} notranslate`},I=i((()=>!s&&a?e.modifiers:{...e.modifiers,low:()=>!1}),[e,s,a]),_=i((()=>{if(s&&!a&&C)return e=>{var t,a=s&&re(mt.dayHeatMap,{[mt.rounded]:c||p,[mt.dayCheaperPrice]:ot(e,C),[mt.dayAveragePrice]:!p&&lt(e,C),[mt.dayHigherPrice]:!p&&(ht(e,C)||ct(e,C))}),i=nt(e),n=null==(t=C.days)?void 0:t.get(i);return se("div",{className:a,children:[ie("div",{className:mt.dayDate,children:e.getDate()}),p&&(null==n?void 0:n.priceDisplay)&&ie(ye,{variant:"supporting-02",color:"inherit",children:n.priceDisplay}),(c||p)&&ie("div",{className:mt.overflowBackground})]})}}),[C,s,a,c,p]);return ie("div",{className:re({[mt.largeDates]:t,[mt.withHeatMap]:!!C,[mt.heatmapImprovements]:c||p}),children:ie("div",{className:"f v _Y G",children:ie(Ue,{classNames:y?S:P,navbarElement:vt,weekdayElement:gt,localeUtils:v,containerProps:{"data-testid":"day_picker"},onMonthChange:l,...e,numberOfMonths:e.numberOfMonths,month:e.month,modifiers:I,renderDay:_,onDayClick:(t,a,i)=>{var r={},o=0===i.detail,l=document.activeElement;!o&&l&&l.blur(),n(t,a,i),s&&C?ot(t,C)?r.priceFlag="cheap":lt(t,C)?r.priceFlag="avg":ht(t,C)?r.priceFlag="high":r.priceFlag="heatmapNoData":r.priceFlag="generalCalendar",e.modifiers.start&&(r.checkIn=it(e.modifiers.start,{representation:"date"})),e.modifiers.end&&(r.checkOut=it(e.modifiers.end,{representation:"date"})),m({actionType:"click",actionSubType:"setHotelDates",geoId:f,itemName:y?"hotelCheckinDate":"hotelCheckoutDate",locationId:k,team:"Hotels",customData:{...r}})},onDayMouseEnter:(e,t,a)=>{s&&r(e,t,a)},onDayMouseLeave:(e,t,a)=>{s&&o(e,t,a)}})})})},kt="bWqTr",ft="Wjavz",Ct="XoAOY",yt="YAJMq",bt="VnPwV f v G u",St="NHlsP f v G u Ph PW Pu PI",Pt="f v G u",It=({heatmapImprovementsVariant1:e,heatmapImprovementsVariant2:t})=>se("div",e||t?{className:Pt,children:[ie("div",{className:re(St,ft),children:ie(ye,{variant:"supporting-02",color:"primaryText",children:ie(p,e?{id:"hotels_price_heatmap_cheaper"}:{id:"hotels_price_heatmap_cheaper_than_average"})})}),e&&se(ne,{children:[ie("div",{className:re(St,Ct),children:ie(ye,{variant:"supporting-02",color:"primaryText",children:ie(p,{id:"hotels_price_heatmap_average"})})}),ie("div",{className:re(St,yt),children:ie(ye,{variant:"supporting-02",color:"primaryText",children:ie(p,{id:"hotels_price_heatmap_higher"})})})]})]}:{className:Pt,children:[se("div",{className:bt,children:[ie("div",{className:re(kt,ft)}),ie(ye,{variant:"supporting-01",children:ie(p,{id:"hotels_price_heatmap_cheaper"})})]}),se("div",{className:bt,children:[ie("div",{className:re(kt,Ct)}),ie(ye,{variant:"supporting-01",children:ie(p,{id:"hotels_price_heatmap_average"})})]}),se("div",{className:bt,children:[ie("div",{className:re(kt,yt)}),ie(ye,{variant:"supporting-01",children:ie(p,{id:"hotels_price_heatmap_higher"})})]})]}),_t="gizUp Ci",Mt="kTfdv",wt=({heatMap:e,legend:t,month:a,numberOfMonths:i,onPopularDatesClick:s,showHeatMapLegend:n,showHeatMapLegendItems:r,showLegendBelowDates:o,popularDatesSuggestionEnabled:l,popularDates:h,inConversationalFilter:c,heatmapImprovementsVariant1:p,heatmapImprovementsVariant2:u})=>{var{localize:m}=d(),g=((e,t,a)=>{var{months:i}=e||{};if(!t||!i)return null;for(var s=[],n=0;n<a;n++){var r=new Date(t);r.setMonth(r.getMonth()+n),r&&s.push(r)}if(s&&s.length){var o=null;return s.forEach((e=>{var t,a,s,n,r,l,h,c,p,d,u,m,g=st(e.toISOString()),v=i.get(g),D={lowUSD:null==v||null==(t=v.pricesUSD)?void 0:t.rangeLow,highUSD:null==v||null==(a=v.pricesUSD)?void 0:a.rangeHigh,lowDisplay:null==v||null==(s=v.pricesDisplay)?void 0:s.rangeLow,highDisplay:null==v||null==(n=v.pricesDisplay)?void 0:n.rangeHigh},k=(u=null==(r=o)?void 0:r.lowUSD,m=null==D?void 0:D.lowUSD,Boolean(!u||m&&m<u)),f=((e,t)=>Boolean(!e||t&&t>e))(null==(l=o)?void 0:l.highUSD,null==D?void 0:D.highUSD);o={lowUSD:k?D.lowUSD:null==(h=o)?void 0:h.lowUSD,highUSD:f?D.highUSD:null==(c=o)?void 0:c.highUSD,lowDisplay:k?D.lowDisplay:null==(p=o)?void 0:p.lowDisplay,highDisplay:f?D.highDisplay:null==(d=o)?void 0:d.highDisplay}})),o}return null})(e,a,i),v=null==g?void 0:g.lowDisplay,D=null==g?void 0:g.highDisplay,k=!!e&&!!e.popularDates&&e.popularDates.length>0,f=n,C=!n&&v&&D,y=p||u;return se(ne,{children:[!n&&k&&se("div",{className:"otuZF H3","data-testid":"popular-dates-footer",children:[se("span",{className:"CLWVt",children:[m("select_from_pop_dates")," "]}),e&&e.popularDates&&e.popularDates.map((e=>ie(T,{element:"span",click:{module:"datepicker",action:"popular_dates_click"},children:ie("span",{className:"LZVmy",onClick:()=>s(e),"data-testid":"popular-date",children:m("oracle_date_range",{checkIn:e.checkInShort,checkOut:e.checkOutShort})})},`popularDates_${e.checkInShort}_${e.checkOutShort}`)))]}),f&&se("div",{className:re(_t,"cqUAg f u",{rTcub:!r||y,sSryB:c,nJUDO:l,[Mt]:y,RtvTA:y&&l,CQEAH:u}),"data-testid":"heatmap-legend-footer",children:[r&&ie(Ve,{heatmapImprovementsVariant1:p,heatmapImprovementsVariant2:u}),ie("div",{className:re("TfIQi f u",{wGwqL:!r||y,[Mt]:u}),children:ie(ye,{variant:y?"supporting-02":"supporting-01",color:y?"primaryText":void 0,children:m(y?"hsx_heatmap_improvements_based_average":"hotels_average_prices_for_one_night_stay")})})]}),C?se("div",{className:_t,"data-testid":"average-prices-footer",children:[ie("span",{dangerouslySetInnerHTML:{__html:m.string("price_heatmap_avg_daily_rates_range",{0:v,1:D})}}),e&&o?ie("div",{className:"qpkeB",children:t}):null]}):null,l&&se(ne,{children:[ie(be,{marginX:y?void 0:"spacing-03"}),ie("div",{className:"gytJk",children:ie(Se,{popularDates:h,isBottomVariant:!0})})]})]})},Et=({datepickerTacticsInlineMessageEnabled:e,isMobile:t,popularDatesSuggestionEnabled:a,popularDatesSuggestionTop:i,popularDates:s,heatmapImprovementsEnabled:n})=>e?se("div",{className:re("YjGKV f u",{aGVGP:n}),children:[ie(_e,{size:n?16:18,color:"primaryIcon",marginRight:"spacing-02"}),ie(ye,{variant:t?"supporting-03":"title-05",children:ie(p,{id:"hotels_calendar_messaging"})})]}):a?se("div",{className:re("SFVKS f v u",{dWypj:i}),children:[!i&&ie(_e,{size:18,color:"primaryIcon",marginRight:"spacing-02"}),ie("div",{className:"KaCIc f",children:ie(ye,{variant:t||i&&!t?"supporting-03":"title-05",children:ie(p,i&&!t?{id:"hsx_popular_dates_datepicker_message"}:{id:"hotels_calendar_messaging"})})}),i&&ie("div",{className:"cZOrb",children:ie(Se,{popularDates:s,isTopVariant:!0,isNonLithium:!0})})]}):ie(p,{id:"mob_popped_calendar_cta"}),Tt=({hasHeatMap:e,legend:t,showHeatMap:a,showLegendBelowDates:i})=>e&&!i&&!a&&t?t:null,Ot=({children:e,datepickerTacticsInlineMessageEnabled:t,headerRef:a,heatmapImprovementsEnabled:i,popularDatesSuggestionEnabled:s})=>ie("div",{className:re("MjHry Cj b",{LeCxi:t||s,puzqg:i}),ref:a,children:e}),Ht=({datepickerTacticsInlineMessageEnabled:e,hasHeatMap:t,headerRef:a,isMobile:i,legend:s,showHeatMap:n,showLegendBelowDates:r,popularDatesSuggestionEnabled:o,popularDatesSuggestionTop:l,popularDates:h,heatmapImprovementsEnabled:c})=>se(Ot,{headerRef:a,datepickerTacticsInlineMessageEnabled:e,heatmapImprovementsEnabled:c,popularDatesSuggestionEnabled:o,children:[ie(Et,{datepickerTacticsInlineMessageEnabled:e,isMobile:i,popularDatesSuggestionEnabled:o,popularDatesSuggestionTop:l,popularDates:h,heatmapImprovementsEnabled:c}),ie(Tt,{hasHeatMap:t,showLegendBelowDates:r,showHeatMap:n,legend:s})]}),Nt=({calendarDisplayOptions:e,showLegendBelowDates:t=!1,setStayDates:a,largeDates:i,closePicker:s,heatmapDatepickerEnabled:h,inConversationalFilter:c,datepickerTacticsEnabled:p,popularDatesTopVariant:u,popularDatesBottomVariant:m,suppressCalendarHeader:g,onDayClick:v,onDayMouseEnter:D,onDayMouseLeave:k,setLastMonth:f,heatmapImprovementsVariant1:C,heatmapImprovementsVariant2:y})=>{var[b,S]=n(e.month),{heatMap:P,legend:I,numberOfMonths:_}=e,M=!!P,w=fe(),{page:E}=he(),T=r(null),O=r(null),[H,N]=n(0),[L,R]=n(!1),A="MOBILE"===w,U=o(te),{localize:x}=d();l((()=>{f(e.month)}),[]),l((()=>{var e,t,a=null==T||null==(e=T.current)?void 0:e.getBoundingClientRect().top,i=null==O||null==(t=O.current)?void 0:t.getBoundingClientRect().height;a&&i&&N(a-i-56)}),[T,O]),l((()=>{var e;0!==H&&L&&(null==(e=U.current)||e.scrollTo({top:H}),R(!1))}),[H,U,L]);var V=M&&h,F=!V&&!("HotelsList"===E||"HotelsNear"===E),B=!0===p,z=Pe(),G=Ie(a,s,x,z);return ie("div",{className:"f",children:se("div",{className:re("ELrBW F1",{GpoOm:m,DbTce:V&&!F&&C,SYIrr:V&&!F&&y,Ra:V&&!F&&(C||y)}),children:[!g&&ie(Be,{datepickerTacticsInlineMessageEnabled:B,hasHeatMap:M,headerRef:O,isMobile:A,legend:I,popularDates:G,showHeatMap:V,showLegendBelowDates:!!t,popularDatesSuggestionEnabled:u||m,popularDatesSuggestionTop:u,heatmapImprovementsEnabled:C||y}),ie(xe,{calendarDisplayOptions:e,largeDates:!!i,shouldShowYellowBricks:F,showHeatMap:V,onDayClick:v,onDayMouseEnter:D,onDayMouseLeave:k,onMonthChange:e=>{f(e),S(e)},inConversationalFilter:c,heatmapImprovementsVariant1:C,heatmapImprovementsVariant2:y}),ie(Fe,{heatMap:V||F?P:null,legend:I,month:b,numberOfMonths:_,onPopularDatesClick:e=>{var t=ke(e.checkIn),i=ke(e.checkOut);t&&i&&(a(t,i),s(!1,!1))},showHeatMapLegend:V,showHeatMapLegendItems:V,showLegendBelowDates:!!t,popularDatesSuggestionEnabled:m,popularDates:G,inConversationalFilter:c,heatmapImprovementsVariant1:C,heatmapImprovementsVariant2:y})]})})},Lt=e=>ie(ce,{component:pe.travel_info_picker_date,enabled:K(),children:ie(Nt,{...e})}),Rt=({showPriceExplanation:e,fullWidth:t})=>{var{localize:a}=d(),i=e;return se("div",{className:re(mt.legend,{[mt.fullWidthLegend]:t}),children:[ie("span",{className:re(mt.legendDot,mt.lowPrice)})," ",a("price_heatmap_lowest_prices_2")," ",i&&ie("div",{className:mt.explanation,children:`${a.string("price_heatmap_lowest_prices_explanation")} `})]})},At=e=>{var{enabled:t}=F();return ie(Te,{...e,tabbedLayoutEnabled:t})},Ut="OoDeI",xt="rRIPM",Vt="MwApI _R Wc Wh _m _S Z R2 Nc Cj",Ft="urOgU",Bt="HEcuY t",zt="Mf",Gt=e=>{var{localize:t}=d(),a=oe(),i=he();return ie(ce,{component:pe.travel_info_picker_guest,enabled:K(),children:ie(He,{...e,localize:t,interactionV3Logger:a,route:i})})},Wt="calendar_in_view",Kt="RPG_in_view",qt="skipGuestsAutoAdvance",Yt=e=>{var t=B(),{isVariant1Enabled:a,isVariant2Enabled:i}=z(),{isTopVariant:s,isBottomVariant:n}=G(),{localize:r}=d(),o=m(),l=u(),h=K(),{enabled:c}=W(),p="en-US"===l,g=p?"Qokdp+Qniawzg2b45M0PaMZ8NARDkdsTtdg/TDeat1qSk5TqF/vH1v95NfokxDui":"Qokdp+Qniawzg2b45M0PaMZ8NARDkdsTtdg/TDeat1oKOeYp190sxqUdFy/B2qLb",v=p?"Qokdp+Qniawzg2b45M0PaGHBK6p/I4DqCgnsEJHa9YK5Q5x1c7s1S/MO9R0OFHhs":"Qokdp+Qniawzg2b45M0PaGHBK6p/I4DqCgnsEJHa9YI/1uDFSgh96qOYt1U9P+CS",D=Qe.useIncrementCallback(g),k=je.useIncrementCallback("Qokdp+Qniawzg2b45M0PaGHBK6p/I4DqCgnsEJHa9YJDY1GDNhYWzC0K+L7EoDHMWOKe9M75ROrX5IJkEXYe5Q==",v),f=je.useIncrementCallback("Qokdp+Qniawzg2b45M0PaGHBK6p/I4DqCgnsEJHa9YJDY1GDNhYWzC0K+L7EoDHM20wHSm1FMaKyxCHj3l3HIA==",v),C=je.useIncrementCallback("Qokdp+Qniawzg2b45M0PaGHBK6p/I4DqCgnsEJHa9YI0t2Xuciv1nl6XHPRglmS3qlBjSVo/p3hjB/eF+igRrg==",v);return ie(Ne,{heatmapDatepickerEnabled:t,cupidHeroTestMWEnabled:e.cupidHeroTestMWEnabled,datepickerTacticsEnabled:e.datepickerTacticsEnabled,popularDatesTopVariant:s,popularDatesBottomVariant:n,heatmapImprovementsVariant1:a,heatmapImprovementsVariant2:i,localize:r,globalize:o,isChangedDatePickerFormat:c,incrementDateUpdateMetric:h?D:void 0,incrementPickerOpenMetricCheckin:h?k:void 0,incrementPickerOpenMetricCheckout:h?f:void 0,incrementPickerOpenMetricRoomsGuests:h?C:void 0,...e})};return[()=>{Me=class extends a{render(){return this.props.children((e=>{var t;if(!e)return null;var{items:a,percentiles:i,popularDates:s}=e,n=i&&new Map(i.map((e=>{var t=null==e?void 0:e.startDate;return[st(t),{pricesUSD:null==e?void 0:e.pricesUSD,pricesDisplay:null==e?void 0:e.pricesDisplay}]}))),r=a&&new Map(a.map((e=>{var t,{date:a,priceUSD:i,priceDisplay:s}=e||{},r=st(a),o=r&&n&&n.get(r)||null,l=null==o||null==(t=o.pricesUSD)?void 0:t.low;return a&&i?[a,{price:i,priceDisplay:s,low:Boolean(l&&Math.round(i/100)<Math.round(l/100))}]:null})).filter(Boolean)),o=null!=a&&a.length?null==(t=a.reduce(((e,t)=>e.date>t.date?e:t)))?void 0:t.date:null;return{days:r,months:n,popularDates:s,endDate:o}})(this.props.data))}},Le=O(((e,t)=>{var a,i=t("Hotel_Review"===(null==e||null==(a=e.route)?void 0:a.page)&&e.page.detailId?`/data/1.0/hotelDetail/${e.page.detailId}/heatMap`:`/data/1.0/hotelOracle/${e.page.geoId}/heatMap`);return()=>({data:i&&i.get().data})}))(Me),Re={...Ce.LocaleUtils,formatWeekdayShort:pt,formatWeekdayLong:dt,formatMonthTitle:ut},Ae=Re,Ue=s(Ce),xe=Dt,Ve=It,Fe=wt,Be=Ht,ze=Lt,Rt.defaultProps={showPriceExplanation:!1,fullWidth:!0},Ge=Rt,we=class{constructor(e,t,a,i){this.startDate=void 0,this.endDate=void 0,this.isStartDate=void 0,this.validation=void 0,this.numMonths=1,this.getCalendarDisplayOptions=()=>{},this.startDate=e,this.endDate=t,this.isStartDate=a,this.validation=i}},Ee=class extends we{constructor(e,t,a,i,s,n,r,o,l,h,c,p){super(e,t,a,i),this.numMonthsDesktop=2,this.numMonthsMobile=1,this.numMonths=void 0,this.isMobile=void 0,this.heatMap=void 0,this.legend=void 0,this.disableStartAsEndDate=void 0,this.applyCalendarEndingStyles=void 0,this.firstDayOfWeek=void 0,this.geoTimezone=void 0,this.isIEorEdge=void 0,this.checkoutInitialMonth=void 0,this.getCalendarDisplayOptions=()=>({fixedWeeks:!1,numberOfMonths:this.numMonths,fromMonth:this.getMinEnabledDate(),toMonth:this.getMaxEnabledDate(),month:this.getInitialMonth(),isCheckin:this.isStartDate,modifiers:this.getCalendarModifiers(),heatMap:this.heatMap,legend:this.legend,firstDayOfWeek:this.firstDayOfWeek}),this.adjustToFirstBookableDateForGeo=(e,t,a,i)=>{try{if(e&&t&&!a)return i?new Date((new Date).toLocaleString("en-US",{timeZone:t})):new Date(e.toLocaleString("en-US",{timeZone:t}))}catch(t){return e}return e},this.getMinEnabledDate=()=>{var e,t=new g,a=this.startDate&&new g(this.startDate);return e=this.disableStartAsEndDate?this.isStartDate?t:(a||t).relativeDay(1):this.isStartDate?t:a||t,this.adjustToFirstBookableDateForGeo(e.date,this.geoTimezone,this.isIEorEdge,this.isStartDate)},this.getMaxEnabledDate=()=>{var e=new g,t=this.startDate&&new g(this.startDate);return(this.isStartDate||!t||t.relativeDay(this.validation.maxStayLength).compare(e.relativeDay(this.validation.maxStayDistance))>=0?e.relativeDay(this.validation.maxStayDistance):t.relativeDay(this.validation.maxStayLength)).date},this.getInitialMonth=()=>{if(this.isStartDate)return this.startDate||this.endDate||new Date;if(this.checkoutInitialMonth)return this.checkoutInitialMonth;var e=this.numMonths-1,t=new g(this.startDate).thisMonth(),a=new g(this.endDate).thisMonth();return(t.relativeMonth(e).compare(a)<0?a.relativeMonth(-e):t).date},this.isLowPrice=e=>{if(e instanceof Date){var t=e.toISOString().slice(0,10),a=t&&this.heatMap&&this.heatMap.days&&this.heatMap.days.get(t)||void 0;return!(null==a||!a.low)}return!1},this.isSelected=e=>e instanceof Date&&void 0!==this.startDate&&void 0!==this.endDate&&e>=this.startDate&&e<=this.endDate,this.isSameDay=(e,t)=>null!=e&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear(),this.isStartDateOrFirstInLine=e=>{if(e instanceof Date){if(this.isSameDay(this.startDate,e))return!0;if(this.isSelected(e))return 1===e.getDate()||e.getDay()===this.firstDayOfWeek}return!1},this.isLastDayOfMonth=e=>{var t=new Date(e);return t.setDate(t.getDate()+1),1===t.getDate()},this.isEndDateOrLastInLine=e=>{if(e instanceof Date){if(this.isSameDay(this.endDate,e))return!0;if(this.isSelected(e)){var t=(this.firstDayOfWeek+6)%7;return e.getDay()===t||this.isLastDayOfMonth(e)}}return!1},this.getCalendarModifiers=()=>({start:this.applyCalendarEndingStyles?this.isStartDateOrFirstInLine:this.startDate,end:this.applyCalendarEndingStyles?this.isEndDateOrLastInLine:this.endDate,...this.startDate&&this.endDate&&{selected:{from:this.startDate,to:this.endDate}}||void 0,disabled:{before:this.getMinEnabledDate(),after:this.getMaxEnabledDate()},low:this.isLowPrice,noClick:this.disableStartAsEndDate?void 0:this.startDate}),this.isMobile=s,this.numMonths=this.isMobile?this.numMonthsMobile:this.numMonthsDesktop,this.heatMap=r,this.legend=o||ie(Ge,{}),this.disableStartAsEndDate=this.numMonths>1,this.applyCalendarEndingStyles=null!=l&&l,this.firstDayOfWeek=null==n?0:n,this.geoTimezone=h,this.isIEorEdge=c,this.checkoutInitialMonth=p}},(Te=class extends a{constructor(e){super(e),this.calculateTopOffset=()=>{var e;return this.props.tabbedLayoutEnabled&&(null==(e=document.getElementById(X))?void 0:e.getBoundingClientRect().height)||0},this.getTop=()=>this.props.target.getBoundingClientRect().top-8+window.pageYOffset-this.calculateTopOffset()||0,this.updateCount=()=>{this.setState({count:this.state.count+1})},this.IN_VIEW_OFFSET=200,this.getArrowColor=()=>{var{datepickerTacticsEnabled:e,isRoundedDatepicker:t,isPopularDatesEnabled:a}=this.props;return e&&!t||a?"secondary":"default"},this.state={count:0,isOpen:!1}}componentDidMount(){H("cookie-banner").on("banner-shown",this.updateCount),this.setState({isOpen:!0})}componentWillUnmount(){this.props.preventCloseOnUnmount||(H("cookie-banner").off("banner-shown",this.updateCount),this.props.close&&this.props.close(!0)),this.setState({isOpen:!1})}getPositionProps(){return this.props.overlayPositionOptions?this.props.overlayPositionOptions:this.props.popAbove?this.props.isMobile?{position:"above",shiftY:-6,alignEdge:"windowX"}:{position:"above",shiftY:-6,animated:this.props.animated,alignEdge:"left",shiftX:-77}:this.props.isMobile?{position:"below",shiftY:6,alignEdge:"windowX"}:this.props.horizontal?{position:"rightOf",alignEdge:"top",shiftX:4,shiftY:-72,animated:this.props.animated}:{position:"below",shiftY:6,animated:this.props.animated}}renderClose(){var e=!0===this.props.datepickerTacticsEnabled,t=!0===this.props.isPopularDatesEnabled,a=e||t;return a?ie("div",{className:"zExJM _Q",children:ie(Z,{variant:a?"clear":"clear-on-dark",icon:$,"aria-label":"Close",size:"small",onClick:()=>this.props.close()})}):ie("button",{className:"dJQaI _Q c _S B- Wc P0 _J",onClick:this.props.close})}render(){var{target:e,close:t,children:a,isMobile:i,showClosingX:s,fixed:n,wasAutopopped:r,isDetailPage:o,hideOverlayArrow:l,isAboveOverlay:h,cupidHeroTestMWEnabled:c,isCupidExperience:p,autoFocus:d,inConversationalFilter:u,paddingX:m}=this.props,g=i?ie("div",{style:{top:this.getTop()},className:"qATVW _Q l Y",onClick:t}):null,v=this.getArrowColor(),D=this.renderClose(),k=s?D:null;return se(Y,{events:["onClick","onTouchStart"],children:[g,ie(q,{onChange:e=>{e||t()},onRef:e=>{!i||o&&r||this.state.isOpen||((e,t,a)=>{if(A("mw_datepicker_scroll_into_view")&&!a&&e&&document&&document.documentElement){var{documentElement:i}=document;n=i,(s=e.getBoundingClientRect()).top>=0&&s.left>=0&&s.bottom<=(window.innerHeight||n.clientHeight)&&s.right<=(window.innerWidth||n.clientWidth)||(window.scrollTo({behavior:"smooth",top:t}),E({module:"datepicker",action:"mw_datepicker_scroll"}))}var s,n})(e,this.getTop(),c&&p)},threshold:this.IN_VIEW_OFFSET,children:t=>l?u?ie(ae,{inline:"div",backButtonPosition:"left",backButton:ie(Z,{variant:"clear",icon:ee,size:"small","aria-label":"Go back",onClick:()=>this.props.close()}),closeButtonPosition:"none",variant:"variable-height",children:ie("div",{ref:t,"data-test-target":"trip-search-open",children:a})}):se("div",{ref:t,"data-test-target":"trip-search-open",children:[k,a]}):ie(J,{target:e,paddingX:void 0!==m?m:16,paddingY:16,minWidth:288,zIndex:h?10105:9991,fixed:!!n,...this.getPositionProps(),shouldRestoreFocus:this.props.shouldRestoreFocus,color:v,autofocus:d,arrowType:this.props.isDatepickerImprovements?"none":void 0,shadowBoxStyle:this.props.isRoundedDatepicker?"Ra":void 0,isUpdatedOnScroll:this.props.isUpdatedOnScroll,children:se("div",{ref:t,"data-test-target":"trip-search-open",children:[k,a]})})}),ie(Q,{keyName:"Escape",callback:()=>t()}),ie(j,{event:"click",callback:()=>t()})]})}}).defaultProps={autoFocus:!0},At.DrgOverlay=Te,We=At,(Oe=class extends a{constructor(...e){super(...e),this.tick=e=>{var{value:t,onChange:a}=this.props;a&&a(t+e)},this.increment=this.tick.bind(this,1),this.decrement=this.tick.bind(this,-1)}render(){var{label:e,min:t,max:a,value:i,icon:s,testTarget:n}=this.props,r=i<=t,o=i>=a;return se(ne,{children:[se("div",{className:"imCzB _m c q B1 Z R2","data-test-target":n?`ticker-${n}`:null,"data-automation":n,children:[ie("button",{onClick:r?void 0:this.decrement,className:re(Ut,{[xt]:r}),"data-test-target":n?`ticker-minus-${n}`:null,"data-test-disabled":r,"data-automation":n?`${n}Less`:null,children:ie(de,{name:"minus"})}),ie("span",{className:"zqdcI","data-test-target":n?`ticker-label-${n}`:null,"data-automation":n?`${n}Num`:null,children:i}),ie("button",{onClick:o?void 0:this.increment,className:re(Ut,{[xt]:o}),"data-test-target":n?`ticker-plus-${n}`:null,"data-test-disabled":o,"data-automation":n?`${n}More`:null,children:ie(de,{name:"plus"})})]}),se("div",{className:"wQNLv o b PR",children:[s?ie(de,{name:s,className:"Mksha Nd"}):null,e]})]})}}).defaultProps={min:0},Ke=Oe,qe=class extends a{constructor(...e){super(...e),this.selectOption=e=>{this.props.onSelect(e)&&this.props.onClose()},this.isValid=()=>{var{min:e,max:t,value:a}=this.props;return null!=a&&b(a,e,t)}}renderOverlay(e){var t=this,{min:a,max:i,value:s,isOpen:n,getOptionLabel:r,onClose:o,fixed:l}=this.props;if(!n||!e)return null;for(var h=[],c=function(e){h.push(se("button",{className:Vt,onClick:()=>t.selectOption(e),children:[s===e?ie(de,{name:"checkmark"}):null,ie("span",{className:Ft,children:r(e)})]},e))},p=a;p<=i;p++)c(p);return ie(Y,{events:["onClick","onTouchStart"],children:se(me,{target:e,position:"below",arrowType:"none",shiftY:-38,shouldRestoreFocus:!0,fixed:l,children:[se("div",{className:"QTOPt Z R2",children:[se("div",{className:Vt,onClick:o,children:[ie("span",{className:Ft,children:r(s)}),ie(de,{name:"caret-up",className:Bt})]}),ie("div",{className:"glHOV _g _f Z",children:h})]}),ie(j,{event:"click",callback:o})]})})}renderPicker(e){var{label:t,value:a,getOptionLabel:i,showErrors:s,onOpen:n,name:r}=this.props,o=s&&!this.isValid();return se("div",{className:re("TBvBV",{oNmZV:o}),children:[ie("span",{className:"jbaHy",children:t}),se("button",{className:Vt,onClick:e=>{n(),e.stopPropagation()},ref:e,"data-automation":r,children:[ie("span",{className:Ft,children:i(a)}),ie(de,{name:"caret-down",className:Bt,dataProps:r?{"data-automation":`${r}Caret`}:{}})]})]})}render(){return ie(ue,{children:(e,t)=>se(ne,{children:[this.renderPicker(e),this.renderOverlay(t)]})})}},Gt.GuestWrapperComponent=He=class extends a{constructor(e){super(e),this.onChange=e=>{var t={...this.state.guestInfo,...e},a=this.props.guestValidation.validate(t,this.state.guestInfo);this.setState({guestInfo:a})},this.onRoomsChange=e=>{E({module:"guestpicker",action:"click",context:"change_rooms"}),this.onChange({rooms:e})},this.onAdultsChange=e=>{E({module:"guestpicker",action:"click",context:"change_adults"}),this.onChange({adults:e})},this.onChildrenChange=e=>{E({module:"guestpicker",action:"click",context:"change_children"});var{children:t}=this.state.guestInfo;this.onChange({children:new Array(e).fill(-1).map(((e,a)=>t.length>a?t[a]:e))})},this.onAgeChange=(e,t)=>{var{children:a}=this.state.guestInfo;return(a=a.slice())[e]=t,this.onChange({children:a}),!0},this.onAgePickerClick=e=>{this.setState({selectedAgePicker:e})},this.onSubmit=()=>{var{interactionV3Logger:e,onSelection:t,guestValidation:a}=this.props;if(a.isValid(this.state.guestInfo)){if(t&&t(this.state.guestInfo),e){var{page:i,params:s}=this.props.route;e({actionType:"click",actionSubType:"setHotelGuests",itemName:"hotelGuests",locationId:"detailId"in s&&s.detailId?s.detailId:null,geoId:"geoId"in s&&s.geoId?s.geoId:null,page:i,team:"Hotels",customData:{...this.state.guestInfo,children:this.state.guestInfo.children.length||0,childrenAges:this.state.guestInfo.children}})}}else this.setState({showErrors:!0})},this.getDropdownLabel=e=>{if(null!=e){if(e>0)return e;if(0===e)return"0-1"}return this.props.localize.string("mem_pf_928")},this.state={guestInfo:e.guestInfo,selectedAgePicker:null,showErrors:!1}}componentDidUpdate(e){this.props.fixed!==e.fixed&&this.clearSelectedAgePicker()}clearSelectedAgePicker(){this.setState({selectedAgePicker:null})}renderAgePickers(){var{selectedAgePicker:e,showErrors:t,guestInfo:{children:a}}=this.state,{MIN_CHILD_AGE:i,MAX_CHILD_AGE:s}=this.props.guestValidation.limits,{fixed:n}=this.props;return a?a.map(((a,r)=>{var o=this.props.localize.string("airm_child_ba9",{0:r+1});return ie("div",{className:zt,children:ie(qe,{min:i,max:s,value:a,label:o,getOptionLabel:this.getDropdownLabel,isOpen:r===e,onOpen:()=>this.onAgePickerClick(r),onClose:()=>this.onAgePickerClick(null),onSelect:e=>this.onAgeChange(r,e),showErrors:t||this.props.showGuestErrors,fixed:n,name:`child${r}`})},r)})):null}render(){var{rooms:e,adults:t,children:a}=this.state.guestInfo,{MIN_ROOMS:i,MAX_ROOMS:s,MIN_ADULTS:n,MAX_ADULTS:r,MIN_CHILDREN:o,MAX_CHILDREN:l}=this.props.guestValidation.limits,h=null!=this.state.selectedAgePicker&&a&&a.length>4;return se("div",{className:"dHAPm S4 z",onClick:()=>this.onAgePickerClick(null),children:[ie("div",{className:zt,children:ie(Ke,{label:this.props.localize.string("mobile_sherpa_rooms_ffffeaf4"),icon:"hotels",value:e,min:i,max:s,onChange:this.onRoomsChange,testTarget:"rooms"})}),ie("div",{className:zt,children:ie(Ke,{label:this.props.localize.string("mobile_sherpa_guests_ffffeaf4"),icon:"users",value:t,min:n,max:r,onChange:this.onAdultsChange,testTarget:"adults"})}),ie("div",{className:zt,children:ie(Ke,{label:this.props.localize.string("common_children"),icon:"children",value:a.length,min:o,max:l,onChange:this.onChildrenChange,testTarget:"children"})}),a&&a.length?ie("div",{className:re("dafmJ Mf Z _V",{iuvpS:h}),children:this.renderAgePickers()}):null,ie("div",{className:"Mf","data-automation":"guestsUpdateBtn",children:se(le,{type:"primary",size:"fullwidth",onClick:this.onSubmit,children:[this.props.localize("com_mc_update")," "]})})]})}},Ye=Gt,Qe=new ge({metricName:"Qokdp+Qniawzg2b45M0PaAWxSCn23oT9/5KI8XePj3ST4J+BJnPD73PyvP/BvxlhiMh8OBbCUoVdOtyi0VpXz8lxXKqkjlmz+4TuGvh1EeA=",version:0,additionalLabels:["Qokdp+Qniawzg2b45M0PaDgO2UWv0V4fkHmDcdSA0iptfg1NP+9g1dwdMXqyo0PYH7mG+iq3Qikn80vztFOtxQ=="],labelHooks:[ve,De]}),je=new ge({metricName:"Qokdp+Qniawzg2b45M0PaGHBK6p/I4DqCgnsEJHa9YLJmec1Vt5jMGKHN1mtyB9rYIkZuxoh5V3mCySg34tby3aiLQswRlTTDTEBOtBpPFDWvHNe9D+ZHJXyia4BM38I",version:0,additionalLabels:["Qokdp+Qniawzg2b45M0PaGHBK6p/I4DqCgnsEJHa9YJO97IDHC6HDyNXPjx/h24okeeLGtrUwCb4SMUNd/eD2Q=="],labelHooks:[ve,De]}),e("TripSearch",Ne=class extends a{constructor(e){super(e),this.openWithTargetLocation=e=>{this.openPicker("CHECKIN"),this.setState({targetLocationId:e})},this.autopopCalendar=()=>{var e,t,{autopop:a,defaultDates:i,isDetailPage:s,geoId:n}=this.props;!a||!i||null!=(e=window)&&null!=(t=e.location)&&t.hash||U.wasDismissed(s)&&(!n||U.wasDismissedForGeo(n))?this.props.onAutopopDismiss&&this.props.onAutopopDismiss():(E({module:Wt,action:"autopop"}),this.openPicker("CHECKIN"),this.wasAutopopped=!0)},this.onDateSelection=(e,t)=>{var a=!1;if(null!=e){var i=e;"PLUS_CHECKIN"===e?i="CHECKIN":"PLUS_CHECKOUT"===e&&(i="CHECKOUT"),a=this.processClickedDate(i,t)}if(a){var{onPickerClose:s}=this.props;"CHECKIN"===e||"PLUS_CHECKIN"===e?E({module:"datepicker",action:"select",context:"checkin_date"}):"CHECKOUT"!==e&&"PLUS_CHECKOUT"!==e||E({module:"datepicker",action:"select",context:"checkout_date"}),D.isStartDateType(e)?(this.openPicker("CHECKOUT"),this.setState({isAutoAdvanced:!0}),E({module:Wt,action:"transition"}),null!=s&&s("CHECKIN",!0,!1)):D.isEndDateType(e)&&!R.get(qt)?(this.openPicker("ROOMSGUESTS"),this.setState({isAutoAdvanced:!0}),null!=s&&s("CHECKOUT",!0,!1),E({module:Kt,action:"transition"})):"PLUS_CHECKIN"===e?(this.openPicker("PLUS_CHECKOUT"),this.setState({isAutoAdvanced:!0}),null!=s&&s("CHECKIN",!0,!1)):"ROOMSGUESTS"===e?(this.closePicker(!0,!1),this.setState({isAutoAdvanced:!1}),null!=s&&s("ROOMSGUESTS",!0,!1)):(this.closePicker(!0,!1),this.setState({isAutoAdvanced:!1}),null!=s&&s("CHECKOUT",!0,!1))}!this.props.isDetailPage&&this.props.fixed&&"PLUS_CHECKIN"!==e&&this.scrollToTop()},this.onGuestSelection=e=>{c(e,this.props.guestInfo)?this.closePicker(!1,!1):(this.setGuests(e),this.closePicker(!0,!1)),this.setLocalStorageSkipGuestsAutoAdvance()},this.getFormattedMonths=e=>{var t=new Intl.DateTimeFormat(this.props.ietfLocale,{month:"short"}),a=e.slice(0,4).map((e=>t.format(e))).join(", ");return e.length>4?`${a}...`:a},this.getDateFromState=e=>"CHECKIN"===e?this.state.startDate:this.state.endDate,this.formatDate=e=>this.props.isChangedDatePickerFormat?this.props.globalize.formatDate("week_short_month_short_date",e):this.props.globalize.formatDate("week_date_short_v2",e),this.getDatePickerValue=e=>{var t=this.getDateFromState(e);return A("datepicker_display_default_dates")&&t?`${this.formatDate(t)}`:this.props.defaultDates||!t?this.props.localize.string("em_dash_date_format"):this.formatDate(t)},this.getDatePickerDisplayDate=e=>this.state.isLocalDatesOnly?!this.props.defaultDates||this.props.defaultDates&&this.state.datesUpdated?"CHECKIN"===e?this.state.startDate:this.state.endDate:void 0:this.props.defaultDates?void 0:this.props.dateInfo["CHECKIN"===e?"startDate":"endDate"],this.getGuestPickerValue=e=>{var{isMobile:t,guestInfo:a}=this.props;if(!a)return"<span>&#8212;</span>";var{rooms:i,adults:s,children:n}=a;return t||e?`<span class="sBpHF ui_icon hotels"></span>\n           <span>${i}</span>\n           <span class="sBpHF ui_icon users"></span>\n           <span>${s+n.length}</span>`:this.props.localize.string("trip_search_traveler_info_text",{sRoomInfoClass:"room-info",nNumRooms:i,sAdultInfoClass:"adult-info",nNumAdults:s,sChildInfoClass:"child-info",nNumChildren:n.length})},this.persistStayDates=(e,t)=>{var a,i,s;this.state.targetLocationId&&null!=(a=window)&&null!=(i=a.ta)&&null!=(s=i.page)&&s.setTargetLocationId&&window.ta.page.setTargetLocationId(this.state.targetLocationId),this.state.isLocalDatesOnly?this.props.getCheckInCheckOutDates&&(this.props.getCheckInCheckOutDates(e,t),this.state.datesUpdated||this.setState({datesUpdated:!0})):k(e,t,this.props.dateInfo,this.props.defaultDates,this.props.name,!!this.props.isDetailPage),this.props.incrementDateUpdateMetric&&this.props.incrementDateUpdateMetric(1)},this.processClickedDate=(e,t)=>{var{startDate:a,endDate:i}=this.state;return D.isStartDateType(e)?(a=t,i=new g(t).relativeDay(1).date):i=t,!!f.validate(a,i)&&(this.areDatesUpdated(a,i)&&this.persistStayDates(a,i),this.setState({startDate:a,endDate:i}),!0)},this.setStayDates=(e,t)=>!!f.validate(e,t)&&(this.persistStayDates(e,t),this.setState({startDate:e,endDate:t}),!0),this.setLocalStorageSkipGuestsAutoAdvance=()=>{R.set(qt,!0,12096e5)},this.setGuests=e=>{P(e)},this.setEndDate=(e,t)=>{var{startDate:a}=this.props.dateInfo;f.validate(a,t)&&t!==this.state.endDate&&null!=e&&("PLUS_CHECKOUT"!==e&&"CHECKOUT"!==e||(this.state.isLocalDatesOnly?this.setState({endDateHover:t}):this.setState({endDate:t})))},this.resetEndDate=()=>{this.setState({endDate:this.state.isLocalDatesOnly?this.state.endDate:this.props.dateInfo.endDate})},this.setLastMonth=e=>{var t;e.getTime()!==(null==(t=this.state.lastMonth)?void 0:t.getTime())&&this.setState({lastMonth:e})},this.getCalendarWrapper=e=>{var{showPriceExplanation:t,endDate:a,startDate:i,endDateHover:s}=this.state,{geoTimezone:n,isIE:r}=this.props,o="CHECKIN"===e||"PLUS_CHECKIN"===e,l=ie(Ge,{showPriceExplanation:t}),h=new Ee(i,this.state.isLocalDatesOnly?s:a,o,f,this.props.isMobile,this.props.firstDayOfWeek,this.heatMap,l,!1,n,r,this.props.isDatepickerImprovements?this.state.lastMonth:void 0).getCalendarDisplayOptions();return ie(ze,{calendarDisplayOptions:h,onDayClick:(t,{disabled:a})=>!a&&this.onDateSelection(e,t),onDayMouseEnter:(t,{disabled:a})=>!a&&this.setEndDate(e,t),onDayMouseLeave:(e,{disabled:t})=>!t&&this.resetEndDate(),setStayDates:this.setStayDates,closePicker:this.closePickerDirectly,heatmapDatepickerEnabled:this.props.heatmapDatepickerEnabled,datepickerTacticsEnabled:this.props.datepickerTacticsEnabled,popularDatesTopVariant:this.props.popularDatesTopVariant,popularDatesBottomVariant:this.props.popularDatesBottomVariant,inConversationalFilter:this.props.inConversationalFilter,suppressCalendarHeader:this.props.suppressCalendarHeader,setLastMonth:this.setLastMonth,heatmapImprovementsVariant1:this.props.heatmapImprovementsVariant1,heatmapImprovementsVariant2:this.props.heatmapImprovementsVariant2})},this.getCalendar=(e,t)=>t?ie(x,{bodyProps:{bodyScroll:"hidden"},containerProps:{roundedCorners:!0},hideBoxShadow:!0,onClose:this.closePickerClick,enableCloseIcon:!0,children:this.getCalendarWrapper(e)}):this.getCalendarWrapper(e),this.getCheckinCalendar=()=>this.getCalendar("CHECKIN",!1),this.getCheckoutCalendar=()=>this.getCalendar("CHECKOUT",!1),this.getGuestFields=()=>ie(Ye,{onSelection:this.onGuestSelection,guestInfo:this.props.guestInfo||I,guestValidation:_,onClose:this.closePickerDirectly,fixed:this.props.fixed,showGuestErrors:this.state.showGuestErrors}),this.getPlusCheckinCalendar=()=>this.getCalendar("PLUS_CHECKIN",!0),this.getPlusCheckoutCalendar=()=>this.getCalendar("PLUS_CHECKOUT",!0),this.getType=e=>e&&this.pickerTypes[e]||{},this.getPickerRefForType=e=>this.getType(e).pickerRef,this.getSharedPickerRef=()=>this.sharedRef,this.sharedRef=h(),this.pickerTypes={CHECKIN:{trackingModule:"datepicker",inViewPageProperty:Wt,openPageAction:"checkin-click",pickerRef:h(),getOverlayContents:this.getCheckinCalendar},CHECKOUT:{trackingModule:"datepicker",inViewPageProperty:Wt,openPageAction:"checkout-click",pickerRef:h(),getOverlayContents:this.getCheckoutCalendar},ROOMSGUESTS:{trackingModule:"guestpicker",inViewPageProperty:Kt,openPageAction:"rgp-click",pickerRef:h(),getOverlayContents:this.getGuestFields},PLUS_CHECKIN:{trackingModule:"datepicker",inViewPageProperty:Wt,openPageAction:"checkin-click",pickerRef:h(),getOverlayContents:this.getPlusCheckinCalendar},PLUS_CHECKOUT:{trackingModule:"datepicker",inViewPageProperty:Wt,openPageAction:"checkout-click",pickerRef:h(),getOverlayContents:this.getPlusCheckoutCalendar}},this.areDatesUpdated=(e,t,a)=>this.props.defaultDates&&!a||0!==new g(e).compare(new g(this.props.dateInfo.startDate))||0!==new g(t).compare(new g(this.props.dateInfo.endDate)),this.areGuestsUpdated=e=>!c(e,this.props.guestInfo),this.scrollToTop=()=>{var e=document.querySelector("#TRIP_PLANNER"),t=document.querySelector("#PERSISTENT_TRIP_SEARCH_BAR");if(e&&t){var a=window.pageYOffset||document.documentElement&&document.documentElement.scrollTop;a+=e.getBoundingClientRect().bottom-t.getBoundingClientRect().height,window.scrollTo({top:a,behavior:"smooth"})}},this.globalOpener=null,this.shouldRestoreFocus=!1,this.wasAutopopped=!1,this.resizerRef=h(),this.heatMap=null,this.pickerRadio=null,this.resize=()=>{this.resizerRef&&this.resizerRef.current&&this.resizerRef.current.makeFit()},this.closePicker=(e,t)=>{this.shouldRestoreFocus=!1,this.wasAutopopped=!1;var a=this.state.isAutoAdvanced?this.state.currentPickerType:this.state.prevPickerType||this.state.currentPickerType;C(!1);var{isDetailPage:i,geoId:s,onPickerClose:n}=this.props;null!=a&&null!=n&&n(a,e,t);var r=this.state.prevPickerType&&this.state.prevPickerType!==this.state.currentPickerType&&!e&&!this.state.isAutoAdvanced;this.setState({currentPickerType:r?this.state.currentPickerType:null,prevPickerType:null}),this.setState({isAutoAdvanced:!1}),r||null==this.state.targetLocationId||this.setState({targetLocationId:null}),U.setDismissed(i),s&&U.setDismissedForGeo(s),this.pickerRadio&&this.pickerRadio.emit("pickers-closed",a,e)},this.closePickerDirectly=()=>this.closePicker(!1,!1),this.closePickerClick=()=>this.closePicker(!1,!0),this.updateDateState=(e,t)=>{this.setState({startDate:e,endDate:t})},this.openPicker=(e,t)=>{var a;if(this.wasAutopopped=!1,C(!0),t){"click"!==t.type&&"touchstart"!==t.type&&t.stopPropagation();var i=0===t.detail,{trackingModule:s,inViewPageProperty:n,openPageAction:r}=this.getType(e);E({module:s,action:i?"enter":"click",context:null!=e?e.toLowerCase():"null"}),E({module:n,action:r}),this.shouldRestoreFocus=i}this.setState((t=>({currentPickerType:e,prevPickerType:t.currentPickerType}))),this.globalOpener&&this.globalOpener(),null==(a=this.pickerRadio)||a.emit("picker-opened",e),"CHECKIN"===e&&this.props.incrementPickerOpenMetricCheckin?this.props.incrementPickerOpenMetricCheckin(1):"CHECKOUT"===e&&this.props.incrementPickerOpenMetricCheckout?this.props.incrementPickerOpenMetricCheckout(1):"ROOMSGUESTS"===e&&this.props.incrementPickerOpenMetricRoomsGuests&&this.props.incrementPickerOpenMetricRoomsGuests(1)},this.isDimmed=e=>!(!this.state.currentPickerType||this.state.currentPickerType===e),this.isFocused=e=>this.state.currentPickerType===e,this.state={currentPickerType:e.initialCurrentPickerType?e.initialCurrentPickerType:null,prevPickerType:null,showPriceExplanation:!1,startDate:e.dateInfo.startDate,endDate:e.dateInfo.endDate,showGuestErrors:!1,isAutoAdvanced:!1,targetLocationId:null,datesUpdated:!1,isLocalDatesOnly:!!e.inConversationalFilter,endDateHover:e.dateInfo.endDate,lastMonth:void 0}}componentDidMount(){this.autopopCalendar(),this.props.initialCurrentPickerType&&this.openPicker(this.props.initialCurrentPickerType),this.props.inConversationalFilter||(this.pickerRadio=H("h-drg"),this.pickerRadio&&(this.pickerRadio.on("close",(()=>this.closePickerDirectly())),this.pickerRadio.on("open",(()=>this.openPicker("CHECKIN"))),this.pickerRadio.on("openWithTargetLocation",this.openWithTargetLocation))),y(!0),this.props.inConversationalFilter&&this.props.getCheckInCheckOutDates&&!this.props.defaultDates&&this.props.getCheckInCheckOutDates(this.state.startDate,this.state.endDate)}componentWillUnmount(){this.pickerRadio&&(this.pickerRadio.off("close",(()=>this.closePickerDirectly())),this.pickerRadio.off("open",(()=>this.openPicker("CHECKIN"))),this.pickerRadio.off("openWithTargetLocation",this.openWithTargetLocation))}componentDidUpdate(e){this.props.dateInfo===e.dateInfo&&this.props.guestInfo===e.guestInfo||this.resize();var{startDate:t,endDate:a}=this.props.dateInfo,{startDate:i,endDate:s}=e.dateInfo;!t||!a||this.props.defaultDates||0===new g(i).compare(new g(t))&&0===new g(s).compare(new g(a))||this.updateDateState(t,a),this.props.autopop!==e.autopop&&this.props.autopop&&this.autopopCalendar()}getOverlayPositionOptions(){if(this.props.overlayPositions&&this.state.currentPickerType){var{checkin:e,checkout:t,roomsGuests:a}=this.props.overlayPositions;return["CHECKIN","PLUS_CHECKIN"].includes(this.state.currentPickerType)?e:["CHECKOUT","PLUS_CHECKOUT"].includes(this.state.currentPickerType)?t:"ROOMSGUESTS"===this.state.currentPickerType?a:void 0}}getOverlayPaddingX(){var{currentPickerType:e}=this.state,t=("CHECKIN"===e||"CHECKOUT"===e)&&(this.props.heatmapImprovementsVariant1||this.props.heatmapImprovementsVariant2);return t&&this.props.heatmapImprovementsVariant1?10:t&&this.props.heatmapImprovementsVariant2?0:void 0}renderOverlay(){var{currentPickerType:e}=this.state,t=null;if(!this.props.hidden&&e){var{pickerRef:a,getOverlayContents:i}=this.getType(e),s=("CHECKIN"===e||"CHECKOUT"===e)&&(this.props.heatmapImprovementsVariant1||this.props.heatmapImprovementsVariant2),n=!this.props.sharedCheckinCheckoutRef||"CHECKIN"!==e&&"CHECKOUT"!==e?a&&a.current:this.sharedRef.current,r=i&&i(),o=this.getOverlayPaddingX(),l="PLUS_CHECKIN"===e||"PLUS_CHECKOUT"===e||this.props.inConversationalFilter;t=n&&r?ie(N,{name:this.props.name,children:ie(We,{target:n,hideOverlayArrow:l,close:this.closePickerDirectly,horizontal:this.props.stacked,isMobile:this.props.isMobile,showClosingX:"ROOMSGUESTS"===e||this.props.isMobile,popAbove:this.props.popAbove,fixed:this.props.fixed,shouldRestoreFocus:this.shouldRestoreFocus,wasAutopopped:this.wasAutopopped,isDetailPage:this.props.isDetailPage,preventCloseOnUnmount:l,isAboveOverlay:this.props.inMapView||this.props.inConversationalFilter,cupidHeroTestMWEnabled:!!this.props.cupidHeroTestMWEnabled,isCupidExperience:!!this.props.isCupidExperience,overlayType:"ROOMSGUESTS"===e?"ROOMSGUESTS":"DATES",datepickerTacticsEnabled:this.props.datepickerTacticsEnabled,overlayPositionOptions:this.getOverlayPositionOptions(),autoFocus:!this.wasAutopopped||this.props.focusOnAutopop,animated:!0,inConversationalFilter:this.props.inConversationalFilter,isDatepickerImprovements:this.props.isDatepickerImprovements,isPopularDatesEnabled:this.props.popularDatesTopVariant||this.props.popularDatesBottomVariant,isRoundedDatepicker:s,paddingX:o,isUpdatedOnScroll:"hr_datepicker_sticky"===this.props.name,children:r})}):null}return ie(V,{children:t})}render(){var{children:e,name:t}=this.props;return se(ne,{children:[A("oracle_geo_heatmap")&&this.props.showHeatMap&&!this.heatMap?ie(Le,{children:e=>(this.heatMap=e,null)}):null,ie(w,{ref:this.resizerRef,className:"GqoPg q c",defaultFontSizePx:16,minFontSizePx:8,resizeOnScreenResize:!0,children:e({getDatePickerValue:this.getDatePickerValue,getGuestPickerValue:this.getGuestPickerValue,isDimmed:this.isDimmed,isFocused:this.isFocused,openPicker:this.openPicker,getPickerRefForType:this.getPickerRefForType,getSharedPickerRef:this.getSharedPickerRef,setStayDates:this.setStayDates,getDatePickerDisplayDate:this.getDatePickerDisplayDate})}),ie(L,{name:t,children:e=>(this.globalOpener=e,null)}),this.renderOverlay()]})}}),Ne.defaultProps={name:"trip_search",stacked:!1,isDetailPage:!1,autopop:!1,popAbove:!1,showHeatMap:!0,focusOnAutopop:!0},Xe=M(v),Je=M(S),Ze=O(((e,t)=>{Le.stage(e,t);var a=e.travelerInfo.hotels||{};return()=>({geoId:e.page.geoId,dateInfo:Xe(a.stayDates),guestInfo:a.guests?Je(a.guests):null,defaultDates:!!a.defaultDates,isMobile:"MOBILE"===e.meta.device.viewportCategory,pageName:e.route.page,firstDayOfWeek:e.i18n.firstDayOfWeek,isIE:"IE"===e.meta.device.browser.family,ietfLocale:e.i18n.ietfLocale})}))(Yt),e({LOCAL_STORAGE_SKIP_GUESTS_AUTO_ADVANCE:qt,TripSearch:Ne,default:Ze})},[e=>(a=e.Component,i=e.useMemo,s=e.memo,n=e.useState,r=e.useRef,o=e.useContext,l=e.useEffect,h=e.createRef),e=>c=e.default,e=>(p=e.default,d=e.useLocalize,u=e.useLocale,m=e.useIntlFormatter),e=>(g=e.CalendarDate,v=e.decode,D=e.DateTypeStore,k=e.setHotelsPageDates,f=e.HotelsValidation,C=e.setHotelsDatesOpen,y=e.setHotelsDatesPage),e=>(b=e.isIntegerInRange,S=e.decode,P=e.setHotelsPageGuests,I=e.DEFAULT_GUEST_INFO,_=e.HotelsValidation),e=>M=e.memoizeLast,e=>w=e.AutoResizer,e=>(E=e.default,T=e.Track),e=>O=e.bind,e=>H=e.createRadio,e=>(N=e.Global,L=e.Opener),e=>R=e.default,e=>A=e.featureIsEnabled,e=>U=e.default,e=>x=e.default,e=>V=e.AfterConsent,e=>(F=e.useTabbedLayout,B=e.useDatepickerPriceHeatmap,z=e.useDatepickerHeatmapImprovements,G=e.useDatepickerPopularDates,W=e.useChangeDatePickerDateFormat),e=>K=e.default,e=>q=e.default,e=>Y=e.default,e=>Q=e.default,e=>j=e.default,e=>X=e.DROPDOWN_HEADER_ID,e=>J=e.default,e=>Z=e.CircularButton,e=>$=e.default,e=>ee=e.default,e=>(te=e.ScrollRefContext,ae=e.Modal),e=>(ie=e.jsx,se=e.jsxs,ne=e.Fragment),e=>re=e.default,e=>oe=e.useHotelInteractionLogger,e=>le=e.default,e=>he=e.useRoute,e=>(ce=e.default,pe=e.Component),e=>de=e.Icon,e=>ue=e.Target,e=>me=e.default,e=>(ge=e.Counter,ve=e.useSourceLabel,De=e.useViewportLabel),e=>ke=e.isoStringToDate,e=>fe=e.useViewportCategory,e=>Ce=e.default,e=>ye=e.default,e=>be=e.default,e=>(Se=e.PopularDatesSuggestion,Pe=e.usePopularDatesLogHandler,Ie=e.getPopularDates),e=>_e=e.default]]},["1o4yt4","b5nukb","17thqz","1r5lgo","1a23m3","1a37wn","wgun1f","4axon3","16z5q2","1bqgab","80hn7v","19b9b1","skjzuv","losr6p","17u7gi","1973cc","wsk8ra","hyvyhv","1w0dpw","65rb8q","1gttbj","ltllz9","1a182z","r019uv","jppfwt","1qkjm8","17nq86","1i3sz5","121h32","fkji80","ctn2v9","4nzso8","fgwvq1","16nmgr","1ybxsm","79a2um","1x9dv9","183pm0","1o5y7t","1ys6v1","pn8thk","1essqv","covaqn","q0mame","100mpx"]]);
