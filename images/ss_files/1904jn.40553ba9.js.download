(this.$WP=this.$WP||[]).push(["1904jn",(e,t)=>{"use strict";var a,n,r,o,l,i,u,s,c,d,v,m,g,E,h,p,I,C,D,T,f,_,P,S,R,L,b,w,y,N,M,O,A,H,U=["IB_CLICK","CLICKOUT","ENTER_DATES","EXP_IB_CONFIRM","BA_SOJERN_BL_CLICK","HOTEL_LIST_VIEW","HOTEL_IB_CONFIRM","SELECT_B2B_HOTEL_PRODUCT","SELECT_B2B_RESTAURANT_PRODUCT","PURCHASE_B2B_HOTEL_PRODUCT","PURCHASE_B2B_RESTAURANT_PRODUCT"],k={enabled:!0,scriptSrcPath:"/static/gtm/gtm.html",scriptSrcHostDomain:"https://www.jscache.com",scriptSrcQueryParams:"",monitoringEnabled:!0},B={MOBILE:2e3,TABLET:2e3,DESKTOP:2e3},G={},q={},$=e=>K(e)?R:L,K=e=>!(!e.startsWith("hare")&&!e.match("\\.qa.tripadvisor-preview")),W=(e,t,a)=>{e({event:"ENTER_DATES",data:{startDate:(null==t?void 0:t.toLocaleDateString("en-US"))||"",endDate:(null==a?void 0:a.toLocaleDateString("en-US"))||""}})},x=e=>{var[t,a]=n(!1);return r((()=>{var t=setTimeout((()=>a(!0)),e);return()=>clearTimeout(t)}),[e]),t},F=()=>{var[e,t]=n(!1);return r((()=>{var e,a=h((a=>{null!=a?t(!0):e=requestIdleCallback((()=>t(!0)))}));return()=>{e&&cancelIdleCallback(e),a&&p(a)}}),[]),e},V=e=>{var t=w(),a=E(),n=b(G[e]||B[a]||2e3);return t||n},j=()=>{var e;return null==(e=N)?void 0:e.port1},Q=e=>(r((()=>{e||N&&(N=new MessageChannel)}),[e]),N),J=()=>{var[e,t]=n("");return r((()=>{t(window.location.origin)}),[]),e},X={__key:0xe8562e57282e,id:"e8562e57282eade6466ec24ae9590111",loc:{},definitions:[]},z=()=>{var e=(()=>{var e,t=(e=f(),a.useCallback(((t,a)=>{var n=a?{locationId:a,eventType:t,isGeoPage:!0}:{eventType:t,isGeoPage:!1};return e.query(X,n).toPromise().then((({data:e})=>{var t,a,n,r,o,l,i,u,s,c,d,v,m,g,E,h,p,I,C,D;return{audienceIds:(null==e||null==(t=e.gtmData)||null==(a=t.audienceIds)?void 0:a.map((e=>e)))||void 0,hashedPersistentCookie:(null==e||null==(n=e.gtmData)?void 0:n.hashedPersistentCookie)||void 0,ipAddressCountry:(null==e||null==(r=e.gtmData)?void 0:r.ipAddressCountry)||void 0,regionName:(null==e||null==(o=e.gtmData)||null==(l=o.locationData)?void 0:l.regionName)||void 0,regionId:null==e||null==(i=e.gtmData)||null==(u=i.locationData)?void 0:u.regionId,countryName:(null==e||null==(s=e.gtmData)||null==(c=s.locationData)?void 0:c.countryName)||void 0,countryId:null==e||null==(d=e.gtmData)||null==(v=d.locationData)?void 0:v.countryId,locationHierarchy:(null==e||null==(m=e.gtmData)||null==(g=m.locationData)?void 0:g.locationHierarchy)||void 0,stateId:null==e||null==(E=e.gtmData)||null==(h=E.locationData)?void 0:h.stateId,stateName:(null==e||null==(p=e.gtmData)||null==(I=p.locationData)?void 0:I.stateName)||void 0,cityName:(null==e||null==(C=e.gtmData)||null==(D=C.locationData)?void 0:D.cityName)||void 0}}))}),[e])),i=(()=>{var e,[t,a]=n(""),l=(e=(e,t)=>new Promise(((a,n)=>{var r=()=>{o()},o=D(e,(()=>{a(`:${e.toLowerCase()}:`),t.removeEventListener("abort",r)}),(()=>{n(),t.removeEventListener("abort",r)}));t.addEventListener("abort",r)})),o((t=>Promise.allSettled([e(C.TARGETING,t),e(C.PERFORMANCE,t),e(C.FUNCTIONAL,t)])),[]));return r((()=>{var e=!0,t=new AbortController;return l(t.signal).then((t=>{e&&(e=>{var t="";e.forEach((e=>{"fulfilled"===e.status&&(t+=e.value)})),a(t)})(t)})),()=>{e=!1,t.abort()}}),[l]),t})(),u=(()=>{var e,t=s(),a=v(),n=I(),r=E(),{page:l,params:i,path:u}=a,c=null==a||null==(e=a.path)?void 0:e.match(/(?:g|geo)(\d+)/),d=("geoId"in i?i.geoId:void 0)||(c?Number(c[1]):void 0)||void 0,m="detailId"in i?i.detailId:void 0,g="originId"in i?i.originId:void 0,h=m||d||g||void 0,p=`https://${t}${a.path}`,C=!K(t);return o((()=>{var e=document.referrer,t=document.title;return{page:l,locationId:h,geoId:d,devicePlatform:r,locale:n,path:u,referringUrl:e,pageTitle:t,fullPageUrl:p,isProd:C}}),[r,d,n,h,l,u,p,C])})(),c=w(),d=l(!1),m=l([]),g=l(""),h=l([]),p=o((e=>{var t=u();return{event:e.event,data:{...t,...e.data,consent:g.current}}}),[u]),T=o(((e,t=!1)=>{if(l=e.event,U.includes(l)||t){var a;null==(a=j())||a.postMessage(e)}else{var n,r,o={...e,event:`${e.event}_HIGH_PRIORITY`};null==(n=j())||n.postMessage(o),d.current?null==(r=j())||r.postMessage(e):h.current.push(e)}var l}),[]),_=o((e=>new Promise((a=>{var{locationId:n}=e.data;t(e.event,n).then((t=>{var n={event:e.event,data:{...e.data,...t}};a(n)}))}))),[t]),P=o((e=>{var t=p(e);(e=>{switch(e){case"IB_CLICK":case"CLICKOUT":case"PAGEVIEW":case"BA_SOJERN_BL_CLICK":case"BA_SOJERN_BL_IMPRESSION":return!0;default:return!1}})(e.event)?_(t).then((e=>{T(t=e)})):T(t)}),[p,_,T]),S=o((e=>{0!==g.current.length?P(e):m.current.push(e)}),[P]);return r((()=>{c&&(d.current=c,h.current.forEach((e=>T(e,!0))),h.current=[])}),[c,T]),r((()=>{g.current=i,g.current.length>0&&(m.current.forEach((e=>S(e))),m.current=[])}),[i,S]),S})();return o((t=>{e(t)}),[e])},Y=e=>{var t=m(),n=_(),r=O(),o=a.useRef(n);a.useEffect((()=>{var t,a;if(e){var n,l,i=null==(l=g.get("pbjs_identitylink"))||null==(n=l.envelope)?void 0:n.envelope;r({event:"PAGEVIEW",data:{liveRampEnvelope:i,startDate:null==(t=o.current.hotels)?void 0:t.checkInDate.toLocaleDateString("en-US"),endDate:null==(a=o.current.hotels)?void 0:a.checkOutDate.toLocaleDateString("en-US")}})}}),[r,t,e])},Z={__key:74850207404379,id:"44136c06115b0e6638f1de27d15da1e5",loc:{},definitions:[]},ee=["Hotel_Review","Hotels","SmartDeals","HotelHighlight","ShowUserReviews","HotelsNear","HotelsList","LastMinute","LocalMaps","HotelsFusion"],te=e=>{var t=_(),n=m(),r=v(),{page:o}=r,l=O(),i=a.useRef(!0);a.useEffect((()=>{i.current=!0}),[n]),a.useEffect((()=>{var a,n;e&&ee.includes(o)&&(i.current?i.current=!1:W(l,null==(a=t.hotels)?void 0:a.checkInDate,null==(n=t.hotels)?void 0:n.checkOutDate))}),[l,e,t.hotels,o]),a.useEffect((()=>{e&&o.includes("VacationRental")&&(i.current?i.current=!1:W(l,t.vr.checkInDate||void 0,t.vr.checkOutDate||void 0))}),[l,e,t.vr,o]),a.useEffect((()=>{e&&o.includes("Attraction")&&(i.current?i.current=!1:W(l,t.attractions.fromDate||void 0,t.attractions.toDate||void 0))}),[l,e,t.attractions,o])},ae=()=>{var e,t,a,n=l(null),g=s(),E=ae.getGtmConfig(g),h=M(),p=(e=E,(t=h)?`${e.scriptSrcHostDomain}${e.scriptSrcPath}?gtmParams=${e.scriptSrcQueryParams}&parentDomain=${encodeURIComponent(t)}`:null),{page:I}=v(),D=T(C.TARGETING),_=ae.useDeferGtm(I),S=i((()=>((e,t)=>e.enabled&&!q[t])(E,I)),[E,I])&&_&&D&&!!p,R=(a=f(),o(((e,t,n)=>{var{event:r}=e,o={page:t,event:r,pixelMetrics:e.tagMetrics.map((e=>({id:e.id.toString(),name:e.name,status:e.status,executionTime:e.executionTime}))),consent:n};a.query(Z,{request:o}).toPromise()}),[a])),L=o((e=>{E.monitoringEnabled&&R(e.data,I,D)}),[R,I,E.monitoringEnabled,D]);((e,t)=>{var a=m(),n=O();r((()=>{e&&n({event:"GTM_KPI_EXPERIMENT",data:{page:t}})}),[t,n,e,a])})(S,I);var b=Q(S),w=o((()=>{n.current&&n.current.contentWindow&&b&&(b.port1.onmessage=L,n.current.contentWindow.postMessage("initGTMMessagePort",E.scriptSrcHostDomain,[b.port2]))}),[E.scriptSrcHostDomain,L,b]);return A(S),H(S),i((()=>S?P(c,{component:d.gtm,children:P(u,{src:p,title:"gtm",ref:n,style:{display:"none"},onLoad:w})}):null),[S,p,w])},ne=e=>{var t=O(),n=m(),r=a.useRef(null);a.useEffect((()=>{r.current===e||S(r.current,e)||(t(e),r.current=e)}),[e,t,n])};return[()=>{R={...k,scriptSrcQueryParams:encodeURIComponent("&gtm_auth=bQdYCwDudXrwbnRzFG9SEg&gtm_preview=env-3&gtm_cookies_win=x")},L={...k},b=x,w=F,y=V,N="undefined"!=typeof MessageChannel?new MessageChannel:null,M=J,O=z,A=Y,H=te,ae.useDeferGtm=y,ae.getGtmConfig=$,e({GoogleTagManager:ae,useGTMCallback:O,useGTMPageview:ne})},[e=>(a=e,n=e.useState,r=e.useEffect,o=e.useCallback,l=e.useRef,i=e.useMemo),e=>u=e.EmbeddedContent,e=>s=e.useDomainName,e=>(c=e.default,d=e.Component),e=>(v=e.useRoute,m=e.usePageviewUid),e=>g=e.default,e=>E=e.useViewportCategory,e=>(h=e.requestTTICallback,p=e.cancelTTICallback),e=>I=e.useLocale,e=>(C=e.CategoriesEnum,D=e.requestConsent,T=e.useConsent),e=>f=e.useClient,e=>_=e.useTravelInfo,e=>P=e.jsx,e=>S=e.default]]},["1o4yt4","dyfdn5","qlcuu5","16nmgr","fgwvq1","19b9b1","1ys6v1","gbnboa","17thqz","1973cc","1mqwhq","1etaac","121h32","b5nukb"]]);
