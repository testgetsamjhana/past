(this.$WP=this.$WP||[]).push(["1rfo7h",(e,s)=>{"use strict";var n,t,r,o,i,a,u,p,l,g,m,c,_,h,S,v,I,b,f,d,w,k,L=({pause:e,logImpression:s})=>t({experiment:"attractions_list_page_membership_banner_1681742647",logImpression:s},e),P="list_page_membership_banner_1678826829",E=({pause:e=!1,skipImpression:s=!1})=>{var n=i({experimentKeys:[P],skipImpression:s},e);return{fetching:null===n,bucket:null==n?void 0:n[P]}},A=({pause:e,logImpression:s})=>t({experiment:"membership_banner_and_heart_icon_prompt_test_1678827009",logImpression:s},e),B="list_page_banner",y=(e,s)=>{var t=n(),r=a(),o=e&&b.has(r),i=u(),p=s.includes(i);return!t&&!o&&p},G=(e=!1)=>{var s=y(e,["Restaurants","FindRestaurants"]),{bucket:n}=v({pause:!s,skipImpression:!1}),{bucket:t}=I({pause:!s,logImpression:!0});return s&&(n===B||t===B)},N=(e=!1)=>{var s=y(e,["AttractionsFusion","AttractionProductsFusion"]),{bucket:n}=S({pause:!s,logImpression:!0}),t=y(e,["AttractionsFusion"]),{bucket:r}=I({pause:!t,logImpression:!0});return s&&n===B||t&&r===B},O=()=>{var e=y(!0,["HotelsFusion"]),{bucket:s}=v({pause:!e,skipImpression:!1});return e&&s===B},R=6048e5,T=e=>{switch(e){case"heart_icon":return"softLoginPromptSessions";case"global_nav_review":return"softLoginGlobalReviewPromptSessions";case"global_nav_sign_in":return"softLoginGlobalSignInPromptSessions";default:throw o(e),new Error(`Storage key not considered for experiment ${e}`)}},x=(e,s)=>{var n=l.get(s),t=e-R;return(n?JSON.parse(n):[]).filter((e=>e.dateShown>t))},F=(e,s=!1)=>{var n=p(),[t,o]=g(!1),i=T(e),a=u(),l=r();return m((()=>{if(!s)try{var e=(new Date).getTime(),t=x(e,i).map((e=>e.sessionId));if(t.length>=2||t.includes(n))return void o(!1);o(!0)}catch(e){o(!1),console.error("Failed to parse JSON: ",e)}}),[a,l,s,n,i]),!!s||t},H=e=>{var s=p(),n=T(e);return()=>{try{var e=(new Date).getTime(),t=x(e,n),r=t.map((e=>e.sessionId));if(r.length>=2||r.includes(s))return;var o={sessionId:s,dateShown:e};l.set(n,JSON.stringify([...t,o]),R)}catch(e){console.error("Failed to parse soft login prompt sessions JSON: ",e)}}},M=["AttractionsFusion","Restaurants","FindRestaurants"],U=()=>{var e=n(),s=u(),t=c(),r=M.includes(s),o="MOBILE"===t,{fetching:i,bucket:a}=I({pause:!!e||!r||o,logImpression:!1});return!e&&r&&!o&&!i&&"heart_icon_prompt"===a},V=(e,s,n)=>!(1!==e||"RESERVATION"===s&&"1"===n||"ALL_OPTIONS"===s&&"10600"===n||"ESTABLISHMENT_TYPE"===s&&"12208"===n),C=({pause:e,logImpression:s})=>t({experiment:"global_navigation_membership_prompt_test_1678827275",logImpression:s},e),q=({pause:e,logImpression:s})=>t({experiment:"nvt_reco_acq_evergreen_home_1671224434",logImpression:s},e),D=()=>K("review"),J=()=>K("sign_in"),K=e=>{var s=n(),t=u(),r="DESKTOP"===c(),o=F("review"===e?"global_nav_review":"global_nav_sign_in",null!==s),{fetching:i,isValid:a}=$(t),{fetching:p,isValid:l}=j(t,!!s||!r||a),g=!i&&a||!p&&l,m=!(!s&&r&&g&&o),{fetching:_,bucket:h}=f({pause:m,logImpression:!0});return!s&&r&&g&&o&&!_&&("review"===e?"review_global_nav_prompt"===h:"sign_in_global_nav_prompt"===h)},$=e=>{var s=a(),n=!w.has(s),t=r()||0,{countryGeoId:o,fetching:i}=_("Tourism"!==e||n),u=!k.has(t)&&(o===h||t===h);return{fetching:i,isValid:"Tourism"===e&&(u||n)}},j=(e,s)=>{var{fetching:n,bucket:t}=d({pause:s||"Home"!==e,logImpression:!1});return{fetching:n,isValid:"Home"===e&&(!t||"Control_No Ads"===t)}};return[()=>{S=L,v=E,I=A,b=new Set(["en-AU","en-CA","en-GB","en-HK","en-IE","en-IN","en-MY","en-NZ","en-PH","en-SG","en-US","en-ZA"]),f=C,d=q,w=new Set(["en-US"]),k=new Set([54171,28970,35805,187147,189158,1954828,187895,189970]),e({isSoftLoginPromptEligibleRestaurantsShelf:V,useGlobalNavigationMembershipPromptBucket:f,useIsSoftLoginPromptSessionEligible:F,useListPageMembershipBannerBucket:v,useMembershipBannerAndHeartIconBucket:I,useShowSoftLoginBannerAttractions:N,useShowSoftLoginBannerHotels:O,useShowSoftLoginBannerRestaurants:G,useShowSoftLoginGlobalReviewPrompt:D,useShowSoftLoginGlobalSignInPrompt:J,useShowSoftLoginHeartIconPrompt:U,useUpdateSoftLoginPromptSessions:H})},[e=>n=e.useUserId,e=>(t=e.useExperimentBucket,r=e.useGeoId,o=e.exhaustivenessCheck),e=>i=e.default,e=>a=e.useLocale,e=>u=e.default,e=>p=e.useSessionId,e=>l=e.default,e=>(g=e.useState,m=e.useEffect),e=>c=e.useViewportCategory,e=>(_=e.useCountryGeoId,h=e.US_GEO_ID)]]},["52far5","a2qxj9","gugp1d","17thqz","eqoaya","1al4vi","19b9b1","1o4yt4","1ys6v1","b3ve7j"]]);
