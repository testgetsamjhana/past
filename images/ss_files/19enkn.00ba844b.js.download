(this.$WP=this.$WP||[]).push(["19enkn",(e,s)=>{"use strict";var r,t,o,i,a,c,n,l,p,d,u,h,_,g,m,v,f,b,P,y,I,S,z,j,w,k,R,T,q,C,L=e=>{var{localize:s}=d();return y(k,{...e,localize:s})},B={__key:0xa23b9ec94aac,id:"a23b9ec94aac6455666395f7576046d0",loc:{},definitions:[]},M=(e,s)=>{var r=s in j,[{data:t,fetching:o,error:i}]=w({query:B,variables:{socialObjects:[{objectId:String(e),objectType:z[s]}]},pause:!r},{createRepost:r=>String(r.refId)===String(e)&&r.refType===z[s]?"invalidateAndRefetch":"validate"});return!o&&!i&&t&&t.socialStatistics&&t.socialStatistics.length&&t.socialStatistics[0]||null},N=e=>{if(e&&e.blockStatus){var{blockStatus:s}=e;if(s&&(s.isBlocking||s.isBlockingYou))return!1}return!0},U=e=>{var s,r,c,{localize:n}=d(),b=t(),{feedSectionItem:P}=e.repostPreviewProps,z=(null==(s=e.originalRepostReference)?void 0:s.id)||P.object.id||P.object.mediaBatchId||P.object.postId,j=(null==(r=e.originalRepostReference)?void 0:r.type)||P.object.__typename,w=T(z,j),k=w?w.isReposted:e.socialStatistics&&e.socialStatistics.isReposted,[C,L]=o(!1),{styleAsShareListItem:B,openRepostModalAsLocal:M}=e,U=i(void 0),x=(e,s,r)=>{U.current&&U.current(e,s,r)},A=()=>!(!N(e.actor)||e.repostPreviewProps&&!N(e.repostPreviewProps.actor))||("function"==typeof U.current&&U.current(j,"no_permission"),!1),{loggedInUserId:O,...W}=e;if(!e.repostPreviewProps.member&&O){var Q=[{id:e.loggedInUserId}];c=y(l,{query:_,variables:{userIds:Q},children:({data:s})=>{var{memberProfiles:r=null}=s||{},t=r?r[0]:null,o={...e.repostPreviewProps};return o.member=t,W.repostPreviewProps=o,y(f,{children:y(a,{children:C&&y(q,{...W,modalName:b,repostCallback:x})})})}})}else c=y(f,{children:y(a,{children:C&&y(q,{...W,modalName:b,repostCallback:x})})});return I(S,{children:[y(g,{pid:40434,children:s=>y(h,{name:b,local:M,children:r=>y(v,{children:t=>I("span",{onClick:o=>{k||(L(!0),e.onClick&&e.onClick(),u.isNativeWebview()?z&&j&&u.postToBridge("repost",1,{objectId:z,type:j}):(t(o,"repost"),s().then(A).then((e=>{e&&r()}))))},className:p(B?"yDrwH S4 H3 Pd PU Pq PG _S":"hqtxV _T M _S",{Drwfi:k}),children:[y(m,{name:"repost",className:"tCmOp"}),y("span",{className:"ui_link gWJYL socialCTA",children:n(k?"reposted":B?"social_repost_on_tripadvisor":"social_repost")})]})})})}),c,y(R,{children:e=>{U.current=e}})]})};return[()=>{k=class extends r{constructor(...e){super(...e),this.successToastMessage={Review:this.props.localize.string("success_repost_review"),Photo:this.props.localize.string("success_repost_photo"),Video:this.props.localize.string("success_repost_video"),ForumPost:this.props.localize.string("success_repost_forum"),LinkPost:this.props.localize.string("success_repost_link"),Trip:this.props.localize.string("success_repost_trip"),MediaBatch:this.props.localize.string("success_repost_photos")}}createToast(e,s,r){switch(s){case"success":return{node:this.successToastMessage[e],cta:y(b,{href:r?`/Profile/${r}`:"/Profile",to:{page:"Profile",username:r},children:this.props.localize("view_repost")})};case"error":return{node:this.props.localize("repost_failure_message")};case"rate_limited":return{node:this.props.localize("repost_rate_limited_v2")};case"no_permission":return{node:this.props.localize("social_no_permission")};default:return{node:""}}}render(){return y(P,{children:e=>this.props.children(((s,r,t)=>{e(this.createToast(s,r,t))}))})}},R=L,T=M,q=c((()=>s("1jbseo"))),C=n((e=>({loggedInUserId:e.auth.loggedInUserId})))(U),e({RepostAction:C,useUpdatedRepostStats:T})},[e=>(r=e.Component,t=e.useId,o=e.useState,i=e.useRef,a=e.Suspense,c=e.lazy),e=>n=e.connect,e=>l=e.Query,e=>p=e.default,e=>d=e.useLocalize,e=>u=e.NativeBridge,e=>h=e.Opener,e=>_=e.ProfileQueryWithUserId,e=>g=e.SocialLoginGate,e=>m=e.Icon,e=>v=e.InteractionLogger,e=>f=e.ErrorBoundary,e=>b=e.Link,e=>P=e.Toaster,e=>(y=e.jsx,I=e.jsxs,S=e.Fragment),e=>(z=e.SocialObjectTypeMap,j=e.RepostedObjectTypeMap),e=>w=e.useInvalidatableQuery]]},["1o4yt4","12mj4n","1mqwhq","fkji80","17thqz","10of6q","80hn7v","1jz56j","10506z","1ybxsm","yc8qq2","183pm0","bvvaww","1iw69p","121h32","1nev0g","1fbuhs"]]);
