(this.$WP=this.$WP||[]).push(["9b2nog",(e,t)=>{"use strict";var i,s,n,o,l,r,a,_,d,c,p,g,u,m,y,S,v,k,T=(e,t,i)=>{fetch("/data/1.0/tap/recordEvent",{method:"POST",headers:new Headers({"content-type":"application/json","x-requested-by":window.JS_SECURITY_TOKEN}),credentials:"same-origin",body:JSON.stringify({eventType:i,requestGuid:e,externalId:t})}).then((e=>(e.ok||console.error(`Did not get an ok. got: ${e.statusText}`),e))).catch((e=>{console.error(`Error sending TripAds click event: ${e.message}`)}))},I=()=>{var e=c().getState(),{page:t,tracking:i}=e;return{page_geo_id:t.geoId,request_num:t.crossSells?t.crossSells.requestNumber:0,request_uid:i.uid?i.uid:void 0}},C=(e,t)=>{var i,s,n,o;i=((e,t)=>{var i=I(),{locationId:s,listingKey:n,impressionKey:o,indexInList:l}=t;return{...i,placement_slot_name:e.placement_slot_name,slot_index:l,location_id:s,sponsored_type:e.sponsored_type,chosen_location_id:s,opportunity_uid:e.opportunity_uid,sl_line_item_id:e.sl_line_item_id,trip_ads_id:e.trip_ads_id,ik:o,tt_placement:e.tt_placement,trip_ads_select_guid:e.trip_ads_select_request_guid,listing_key:n}})(e,t),m("action","paid_backup_sponsored_listing_click",i),g(u.HOTELS_SP_CLICK,((e,{locationId:t,listingKey:i})=>{var s=c().getState();return{is_member:s.auth.isMember,device_type:s.meta.device.userAgentCategory?s.meta.device.userAgentCategory.toLowerCase():"",locationId:t,slot:e.placement_slot_name,trip_ads_select_guid:e.trip_ads_select_request_guid,listing_key:i}})(e,t)),((e,t)=>{var i=new Date;i.setTime(i.getTime()+1e4);var s={expires:i};p.set("sponsOppId",t,s),p.set("sponsLineItem",e,s)})(e.sl_line_item_id,e.opportunity_uid),s=((e,{locationId:t,impressionKey:i,indexInList:s,listingKey:n})=>{var o=c().getState();return{area:e.placement_slot_name,click_type:"HR",dest:"Hotel_Review",from:o.route.page,listing_key:n,impression_key:i,sl_line_item_id:e.sl_line_item_id,trip_ads_id:e.trip_ads_id,location_id:t,slot:s,tt_placement:e.tt_placement,gosox:e.gosox}})(e,t),fetch("/SponsoredListingCommerce/1.0/click",{method:"POST",headers:new Headers({"content-type":"application/json","x-requested-by":window.JS_SECURITY_TOKEN}),credentials:"same-origin",body:JSON.stringify(s)}).then((e=>(e.ok||e.statusText,e))).catch((e=>{console.error(`Error sending commerce click: ${e.message}`)})),e.trip_ads_select_request_guid&&(n=e.trip_ads_select_request_guid,o=e.opportunity_uid,T(n,o,"CLICKED"))},h=(e,t)=>{var i,s,n={...I(),placement_slot_name:e.placement_slot_name,slot_index:t.indexInList,location_id:t.locationId,sponsored_type:e.sponsored_type,chosen_location_id:t.locationId,opportunity_uid:e.opportunity_uid,sl_line_item_id:e.sl_line_item_id,trip_ads_id:e.trip_ads_id,trip_ads_select_guid:e.trip_ads_select_request_guid,listing_key:t.listingKey};m("impression","paid_backup_sponsored_listing_displayed",n),g(u.HOTELS_SP_IMPRESSION,((e,t,i)=>{var s=c().getState();return{is_member:s.auth.isMember,device_type:s.meta.device.userAgentCategory?s.meta.device.userAgentCategory.toLowerCase():"",locationId:t,slot:e.placement_slot_name,trip_ads_select_guid:e.trip_ads_select_request_guid,listing_key:i}})(e,t.locationId,t.listingKey)),e.trip_ads_select_request_guid&&(i=e.trip_ads_select_request_guid,s=e.opportunity_uid,T(i,s,"IMPRESSED"))},x=({locationName:e,xsellConfig:t,position:i,useHpsData:n})=>{return y(s.Provider,{value:(o=parseInt(c().getState().tracking.mcid||"0",10),l=_(),r=d({marketingCampaignId:o}),{sponsoredListingClickHandler:(e,t,i)=>{e?v(e,i):t&&((e,t,i)=>{null!=t&&t.tracking_guid&&e({trackingKey:t.tracking_guid,legacyHotelTrackingFields:{bookingFlowKey:i.impressionKey,listingKey:i.listingKey||"",placement:i.placementName}})})(r,t,i)},sponsoredListingImpressionHandler:(e,t,i)=>{e?k(e,i):t&&((e,t,i)=>{null!=t&&t.tracking_guid&&e({trackingKey:t.tracking_guid,legacyHotelTrackingFields:{bookingFlowKey:i.impressionKey,listingKey:i.listingKey||"",placement:i.placementName}})})(l,t,i)}}),children:y(S,{locationName:e,xsellConfig:t,position:i,useHpsData:n})});var o,l,r};return[()=>{S=n(((e,t)=>{var i,s,n,_,d,c,p,g,u=null==e||null==(i=e.page)||null==(s=i.crossSells)||null==(n=s.endpointResults)?void 0:n.locationMap,m=null==u?void 0:u[t.locationName],y=null==e||null==(_=e.page)||null==(d=_.crossSells)||null==(c=d.endpointResults)?void 0:c.isSearchComplete,S=null==m?void 0:m.crossSells;return S&&(m.crossSells=S.map((e=>{var i,s,n;return t.useHpsData?(s=4,i=e.tagTranslations):(({maxAccommodations:n,tagTranslations:i={}}=o()),s=n&&n[e.crossSellType]?n[e.crossSellType]:4),{...e,seeAllUrl:l(e.crossSellType),title:r(e.crossSellType),tooltip:a(e.crossSellType),maxAccommodations:s,tagTranslations:i}}))),{...t,locationData:m,requestNumber:(null==(p=e.page)||null==(g=p.crossSells)?void 0:g.requestNumber)||0,isSearchComplete:y}}))(i),v=C,k=h,e("ConnectedPageLocationWithContext",x)},[e=>(i=e.PageLocation,s=e.CrossSellContext),e=>n=e.connect,e=>(o=e.getUIAssets,l=e.getSeeAllUrlForCrossSellType,r=e.getTitleForCrossSellType,a=e.getTooltipForCrossSellType),e=>(_=e.useSpImpressionLogger,d=e.useSpInteractionLogger),e=>c=e.getStore,e=>p=e.default,e=>(g=e.trackHolisticEvent,u=e.holisticEvents,m=e.trackEventWithContext),e=>y=e.jsx]]},["st7iu5","12mj4n","avx3a3","ky3i2c","45ddp0","5gpqhx","4axon3","121h32"]]);
