(this.$WP=this.$WP||[]).push(["1nzwvr",(e,a)=>{"use strict";var n,i,l,t,s,r,o,c,d,u,p,m,h,g,v,f,y,k,_,b,T,I,N,C,O,D,w,x,P,S,R,M,L,A,E,B,K,V,F,U,z,q,H,W,j,G,$,J,X,Y,Z,Q,ee,ae,ne,ie,le,te,se,re,oe,ce,de,ue,pe,me,he,ge,ve,fe,ye,ke,_e,be,Te,Ie,Ne,Ce,Oe,De,we,xe,Pe,Se,Re,Me,Le,Ae,Ee,Be,Ke,Ve,Fe,Ue,ze,qe,He,We,je,Ge,$e,Je,Xe,Ye,Ze,Qe,ea,aa,na,ia,la,ta,sa,ra,oa,ca,da,ua,pa,ma,ha,ga,va,fa,ya,ka,_a,ba,Ta=(e,a)=>a?e.string("meta_visit_site"):e.string("view_deal_button_cta"),Ia=e=>{var{listing:a}=e,{chevronOffers:n,textLinkOffers:i,hiddenOffers:l}=a||{},t=e=>"AVAILABLE"===e.status;return!!(n&&n.find(t)||i&&i.find(t)||l&&l.find(t))},Na=e=>{var{listing:a}=e;return!!(a&&a.chevronOffers&&0===a.chevronOffers.length&&a.textLinkOffers&&0===a.textLinkOffers.length)},Ca=e=>{var a,{listing:n}=e;return(null==n||null==(a=n.chevronOffers)?void 0:a.find((e=>!!e.data.isOptimusOffer)))||null},Oa=e=>{var{listing:a}=e;return a&&a.chevronOffers&&a.chevronOffers[0]?a.chevronOffers[0]:null},Da=e=>{var{listing:a}=e;return(null==a?void 0:a.lowestPrice)||null},wa=e=>!!(e&&e.isIbOffer&&f("om_affiliate_commerce_button_CTA")),xa=(e,a,n=!0)=>{if(!e)return{};var i={"data-contentid":e.contentId,"data-provider":e.provider,"data-clicktoken":e.clickToken||"","data-automation":"hotelOfferCommerceBtn"};return a&&(i["data-openbehavior"]=a),n&&(i["data-early-click-target"]="commerce/offerclick.compElementClick"),(e.dataAtts?Object.keys(e.dataAtts).filter((e=>!i[e])):[]).forEach((a=>{if(e&&e.dataAtts&&e.dataAtts[a]){var n=e.dataAtts[a],l=a.startsWith("data-")?a.toLowerCase():`data-${a.toLowerCase()}`;i[l]=n}})),i},Pa=(e,a)=>{var n=xa(e);if(0!==Object.keys(n).length){var i=n["data-clicktoken"];i?globalThis.require(["trjs!commerce/offerclick"],(e=>{var n=e.expandToken(i);a(n.ik)})):a(null)}else a(null)},Sa=(e,a,n)=>{e.persist();var i=a||e.currentTarget,l=i&&i.getAttribute("data-clicktoken");return!!l&&(window._hotels_early_clicks_enabled_&&i.getAttribute("data-early-click-target")||globalThis.require(["trjs!commerce/offerclick"],(a=>{a.clickEvent(e.nativeEvent,i,l,!1,n)})),!1)},Ra=e=>{var a=w();return(n,i,l)=>{a(e),Sa(n,i,l)}},Ma=(e,a)=>{e.persist();var n=e.currentTarget,i=n&&n.getAttribute("data-clicktoken");i?globalThis.require(["trjs!commerce/offerclick"],(e=>{var n=e.expandToken(i);a(n.ik)})):a(null)},La="QOThz",Aa=({message:e})=>{var a="FREE_CANCELLATION"===e.type,{route:n}=i(S);return L(R,{onVisible:()=>{a&&P({module:"osm-free-cancellation",action:"shown",context:n.page})},children:n=>A("div",{ref:n,className:y("RpVsR","xbGfA"),children:[L(x,{name:"checkmark",className:y("qqRDh PO","uztxr",{hwuIA:a})}),L("span",{className:y("KdONA",{"hJNIe b":a}),children:e.message})]})})},Ea=({message:e,merchandiseMessagesBelow:a})=>L("div",{className:y("GmcVy",a?"xLfuw":void 0),children:A("div",{className:"YMYgQ Pb",children:[A("span",{className:"FmjxW Vm",children:[L(x,{name:"lock",className:y("xucou w c")}),L(x,{name:"bubble-rating-bg",className:y("NAfuN")})]}),L("span",{className:"urlPB",children:e})]})}),Ba=e=>{if(e&&e.specialRateTracking){var a,n,i,l,t=(null==(a=e.dataAtts)?void 0:a["data-provider"])||(null==(n=e.dataAtts)?void 0:n.provider)||"Unknown",s=(null==(i=e.dataAtts)?void 0:i["data-specialratetype"])||(null==(l=e.dataAtts)?void 0:l.specialratetype)||"None",r=e.specialRateTracking;P({module:"Hotels_Loyalty_HR_click",action:`${t}|${s}`,context:r})}},Ka=e=>{var a=e.find((e=>!!e.data.specialRateTracking));a&&P({module:"Hotels_Loyalty_HR",action:"Loyalty_Offer",context:a.data.specialRateTracking})},Va=({funnelKey:e,onLoginSuccess:a,navigation:n})=>({content:L(X,{funnelKey:e,pid:40794,onLoginSuccess:a,navigation:n}),accent:void 0,backgroundColor:"overlay"}),Fa=({photoId:e,alt:a,width:n=330})=>{var i=Z(e);return A("div",{className:"HlTxt",children:[L("div",{className:"_Q Pl PL Z1",children:L(Q,{variant:"plus-logo-short-white",height:44})}),i?L(Y,{width:n,source:i,alt:a}):L("div",{className:"fJOwE",style:{width:n}})]})},Ua=()=>L(Qe,{photoId:485591592,alt:"Luxury hotel room in desert"}),za=({hotelId:e,hotelName:a,savingsDisplayValue:n,savingsDisplayType:i,funnelKey:l,onLoginClick:t})=>{var s=F(),{localize:r}=m(),o=te(a,i,n);return n||(o=r.string("plus_paywall_header_perk_v2",{hotelName:a})),A(E,{children:[L("div",{className:"vZTeT",children:L(Q,{variant:"plus-logo-short",height:44})}),L(ie,{variant:"expressive-display-03",color:"accentPurpleText",children:L(p,{id:"plus_paywall_header_v2"})}),L(ie,{variant:"expressive-display-03",children:o}),L(ie,{variant:"body-01",marginTop:"spacing-03",marginBottom:"spacing-03",children:L(p,{id:"plus_paywall_subheader_v2"})}),L("div",{className:"HrQiQ",children:L(ee,{variant:"primary",fullWidth:!0,onClick:()=>{s({OptimusPaywallClick:{optimusPaywallCta:{ctaType:"SIGN_UP",funnelKey:l}}}),t()},children:L(p,{id:"plus_paywall_join_now"})})}),L("div",{className:"pseku"}),L(ie,{variant:"title-05",color:"accentPurpleText",children:L(p,{id:"plus_paywall_benefits_header_v2",args:{subPrice:"$99"}})}),L(ie,{variant:"body-01",marginTop:"spacing-01",children:L(p,{id:"plus_paywall_benefits_1",args:{numHotels:"100,000"}})}),L(ie,{variant:"body-01",marginTop:"spacing-01",children:L(p,{id:"plus_paywall_benefits_2"})}),L(ie,{variant:"body-01",marginTop:"spacing-01",children:L(p,{id:"plus_paywall_benefits_cancellation_3_v2",args:{numDays:"90"}})}),L(ae,{marginTop:"spacing-04",marginBottom:"spacing-05",href:`/Plus?detailId=${e}&ik=${l}`,target:"_blank",onClick:()=>{s({OptimusPaywallClick:{optimusPaywallCta:{ctaType:"LEARN_MORE",funnelKey:l}}})},children:L(p,{id:"plus_paywall_learn_more"})})]})},qa=({hotelId:e,hotelName:a,savingsDisplayType:n,savingsDisplayValue:i,funnelKey:l,onLoginClick:t})=>({content:L(aa,{hotelId:e,hotelName:a,savingsDisplayType:n,savingsDisplayValue:i,funnelKey:l,onLoginClick:t}),accent:L(ea,{}),backgroundColor:"beige"}),Ha=({geoId:e,hotelId:a,hotelName:n,savingsDisplayType:r,savingsDisplayValue:o,funnelKey:c,onClose:d,onOpen:u,dateInfo:p})=>{var m=l((()=>c||K()),[c]),h=k(),g=q(),v=V(),f=!!v,[_,b]=t("paywall"),{isModalCheckout:T}=i(j),I=U(),N=F(),C=s((()=>{u&&u(),I({optimusPaywall:{funnelKey:m,name:"",pageviewUid:h,userId:v}})}),[m,I,u,h,v]),O=s((()=>{"confirmation"===_?(N({OptimusConfirmationModalInteraction:{optimusConfirmationModalClick:{ctaType:"Dismiss",locationId:a,isMemberSignedIn:f,servletName:"Hotel_Review",funnelKey:m}}}),g(z(`/Hotel_Review-d${a}?newPlusSubscriber=true&referringFunnelKey=${m}`))):N({OptimusPaywallClick:{optimusPaywallClose:{funnelKey:m}}}),d()}),[m,a,N,f,g,d,_]),D=T?void 0:{subscriberUrl:`/HotelReview-g${e}-d${a}`,nonSubscriberUrl:`/OptimusSubscriptionCheckout?detailId=${a}&oik=${m}`},w={paywall:na({hotelId:a,hotelName:n,savingsDisplayType:r,savingsDisplayValue:o,funnelKey:m,onLoginClick:()=>{T&&f?b("checkout"):(b("login"),n&&null!=p&&p.startDate&&null!=p&&p.endDate&&H.set("TIERED_PROVIDERS_CHAT_CONTEXT",{locationId:e,url:`${window.location.href}`,name:n,startDate:p.startDate,endDate:p.endDate}))}}),login:Ze({funnelKey:m,onLoginSuccess:()=>{T&&b("checkout")},navigation:D}),checkout:G({hotelId:a,funnelKey:m,onPurchaseSuccess:()=>{b("confirmation")},backgroundColor:"beige",variant:"paywall"}),confirmation:$({hotelId:a,funnelKey:m,onClose:O,backgroundColor:"beige"})};return L(J,{currentStep:_,stepConfigMap:w,onOpen:C,onClose:O,children:(e,a)=>L("div",{className:y({"spEUw _a":!!a,LrzbL:"checkout"===_}),children:e})})},Wa="zqUyb Gs P6 f k _Y",ja=({anchorRef:e,commerceSectionRef:a})=>{var[n]=i(ye),[s,c]=t(!1),d="MOBILE"===fe(),{localize:u}=m(),h=()=>{c(!0)};Te("click",h,void 0,!0),Te("touchstart",h,void 0,!0);var g=r(null),v=-25,[f,y]=t(60.5-Math.sqrt(24.5)-v);o((()=>{var e,a,n=(null==(e=g.current)||null==(a=e.getBoundingClientRect())?void 0:a.height)||145;y(n/2-12-Math.sqrt(24.5)-v)}),[v]);var k=l((()=>A(E,{children:[A("div",{className:"Nj",children:[L(Q,{variant:"plus-logo-short-white",height:28}),L(ie,{variant:"title-04",color:"onDarkText",marginTop:"spacing-03",marginBottom:"spacing-02",children:L(p,{id:"plus_new_subscriber_price_spotlight"})})]}),L("div",{className:"bLxAN _S",children:L(ne,{variant:"clear-on-dark",icon:_e,"aria-label":u.string("common_Close"),size:"small",onClick:h})})]})),[u]);return o((()=>{!s&&d&&a&&a.current&&n({node:L(ke,{children:L(be,{events:["onClick","onTouchStart"],children:L(M,{node:{current:a.current},onInvisible:h,children:(e,a)=>a&&L("div",{className:Wa,children:k})})})})})}),[s,d,a,n,k]),s||d||!e?null:L(be,{events:["onClick","onTouchStart"],children:L(ge,{target:e,position:"rightOf",unstyled:!0,shiftX:2,shiftY:v,children:A("div",{className:Wa,ref:g,children:[L(ve,{color:"purple",on:"left",small:!0,offset:f,from:"top"}),k]})})})},Ga=({text:e})=>{var a=L(h,{id:"plus_cashback_infocard_earn_on_your_travel_v5"});return A(we,{paddingX:"spacing-02",paddingY:"spacing-03",className:"FpkpR c X",children:[L(Q,{variant:"plus-logo-short",height:22}),L(ie,{variant:"supporting-03",color:"primaryText",children:L("span",{"data-automation":"plusSmallTextCommerceBlockVF",children:e||a})})]})},$a="rkMQz",Ja=({perks:e,cashbackAmount:a})=>{var[n,i]=t(!1),l=Boolean(e&&!!e.length),{isOptimusSubscriber:s}=pe(),{localize:r}=m(),[o,c]=t(!1),d=()=>A("div",{className:"CPwAu Pj PX Pw PJ",children:[!s&&L("div",{className:"MH",children:L(ie,{variant:"supporting-03",children:L(p,{id:"plus_cashback_card_extra_perks"})})}),L("div",{className:"S4 H3 NM",children:L("ul",{className:"zfylz",children:e&&e.map((e=>L("li",{children:e},e)))})})]});return L(we,{padding:"spacing-03",className:"hDNGs Wh X",display:"flex",flexDirection:"column",children:A(Se,{externalKey:"e7f778b6e41d4e59941b2b85707a8d9a",team:"Plus",itemType:"EducationalModal",itemName:"CommerceModule",children:[o&&L(Re,{variant:"learnMore",onClose:()=>{c(!1)}}),A(we,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[L("div",{className:"JStaJ",children:L(ie,{variant:"title-04",color:"primaryText",children:L(p,l?{id:"plus_cashback_card_with_perks_title",args:{0:a}}:{id:"plus_cashback_card_no_perks_title",args:{0:a}})})}),L(Q,{variant:"plus-logo-short",height:24})]}),A(we,{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[L("div",{className:"iBfmv",children:L(ie,{variant:"supporting-01",color:"primaryText",children:L(p,s?l?{id:"plus_cashback_card_is_member_info_with_perks"}:{id:"plus_cashback_card_is_member_info"}:{id:"plus_cashback_card_not_member_info"})})}),L(ne,{variant:"clear",icon:n?xe:Pe,"aria-label":r.string("common_more_capital_ffffe27f"),size:"small",onClick:()=>{i(!n)},marginTop:"spacing-03"})]}),n&&(s?l?A("div",{className:$a,children:[d(),L("div",{children:L(ie,{variant:"supporting-01",marginTop:"spacing-03",children:L(p,{id:"plus_cashback_card_is_member_info_with_perks_expand"})})}),L(ae,{href:"/Plus",target:"_blank",marginTop:"spacing-03",children:r.string("plus_cashback_card_learn_more")})]}):L("div",{className:$a,children:L(ie,{variant:"supporting-01",children:L(p,{id:"plus_cashback_card_is_member_info_expand"})})}):A("div",{className:$a,children:[L("div",{children:L(ie,{variant:"supporting-01",children:L(p,{id:"plus_cashback_card_not_member_info_expand_a"})})}),L("div",{className:"xRBJU",children:L(ie,{variant:"supporting-01",children:L(p,{id:"plus_cashback_card_not_member_info_expand_b"})})}),l&&d(),L(ae,{href:"#",onClick:()=>{c(!0)},marginTop:"spacing-03",children:r.string("plus_cashback_card_learn_more")})]}))]})})},Xa=({locationId:e,offerContentId:a,roomsRemaining:n})=>{var{localize:i}=m(),l=i.string("room_urgency_messaging_only_x_left_at_v2",{0:n}),t=de(),s=Ke((()=>{t({itemId:String(a),itemName:l,itemType:"room_urgency_msg",locationId:e})})),{roomUrgencyMessagingEnabled:r}=Ve();return((e,a)=>e&&a>=1&&a<=5)(r,n)?L("div",{className:"autoResize Cd S2",ref:s,children:l}):null},Ya=({children:e})=>L(ie,{variant:"supporting-02",color:"placeholderText",children:e}),Za=e=>{var{totalStay:a,taxesValue:n}=e,{enabled:i,isPerNightVariant:l,isTaxesAndFeesVariant:t,isTotalStayVariant:s}=Fe();return i?l?L(Ya,{children:L(p,{id:"base_daily_price_per_night"})}):t?n?L(Ya,{children:L(h,{id:"base_daily_price_taxes_and_fees_v2",args:{avgDailyTaxesAndFees:n}})}):null:s&&a?L(Ya,{children:L(p,{id:"base_daily_total_price",args:{allInTotalStayPrice:a}})}):null:null},Qa=({metaOfferButtonText:e,isLoading:a,buttonSize:n="small"})=>L(ee,{size:n,variant:"commerce",loading:!!a,fullWidth:!0,"aria-label":"commerce-button-loader",children:e}),en=e=>{var a,{experiment:n,totalPrice:i,lengthOfStay:l,nightlyPrice:t}=e,s=!(null==(a=C().hotels)||!a.defaultDates);return!n||s?null:n.isPNightlySTotalVariant?i&&l?L(ie,{variant:"supporting-02",color:"placeholderText",children:L(p,{id:"hsx_all_in_price_total_for_nights",args:{totalPrice:i,lengthOfStay:l}})}):null:n.isPTotalSNightlyVariant&&t?L(ie,{variant:"supporting-02",color:"placeholderText",children:L(p,{id:"hsx_all_in_price_per_night",args:{nightlyPrice:t}})}):null},an=(e,a,n)=>e.isIbOffer?L("span",{className:y("svgico","pTZHw w")}):a?L(v,{className:"MNoMx Vm",src:a,alt:n}):L("span",{className:"taLnk",title:n,children:n}),nn=(e,a,n)=>L("div",{className:"ui_column is-4 wjpMm",children:an(e,n,a)}),ln=(e,a,n)=>e.isMobileRate?L("div",{ref:n,children:L(b,{offerContentId:e.contentId,locationId:a})}):null,tn=(e,a)=>e&&0!==e.length?L(Ye,{message:e,merchandiseMessagesBelow:void 0!==a&&a.length>0}):null,sn=e=>e&&0!==e.length?L("div",{className:"dCMyh e",children:e.map((e=>L(Xe,{message:e},e.message)))}):null,rn=({status:e,text:a})=>L(ca,{metaOfferButtonText:a,isLoading:"IN_PROGRESS"===e}),on=({data:e,providerLogoUrl:a,providerDisplayName:n,strikeThroughText:i,buttonText:l,priceText:t,status:s,savePriceText:o,taxesAndFeesText:c,totalStayText:d,specialRateMessage:u,merchandiseMessages:p,roomsRemaining:h,allInPriceExperiment:g,viewDealCtaUpdateEnabled:v})=>{var k,b,T,I,{localize:N}=m(),O=_().params.detailId||0,w=r(null),x=C(),P=(null==(k=x.hotels)?void 0:k.checkInDate)&&(null==(b=x.hotels)?void 0:b.checkOutDate)&&new D(null==(T=x.hotels)?void 0:T.checkInDate).daysTo(new D(null==(I=x.hotels)?void 0:I.checkOutDate)),S=Ra({event:"CLICKOUT"});return A("div",{...xa(e,void 0,!1),className:y("cUOJG _S Z","offer",{zUFLw:i&&f("black_strikethrough"),lHtKR:f("commerce_link_strategy_underline_prices"),bookableOffer:e.clickToken,pKdnT:o}),onClick:a=>{var n,i;null!=(n=w.current)&&n.contains(a.target)||null!=(i=a.target)&&i.closest('[role="tooltip"]')||(S(a,null),Ba(e))},children:[A("div",{className:"ui_columns is-gapless is-mobile",children:[nn(e,n,a),L("div",{className:y("ui_column","is-4","qnqtP P u"),children:A("div",{className:y("hhlrH w",t&&t.length>=8&&"pUBNi"),children:[i?L("div",{className:"autoResize msiXY b Wa",children:i}):null,h&&L("div",{className:"XWLRh",children:L(oa,{locationId:O,offerContentId:e.contentId,roomsRemaining:h})}),t?L("div",{className:y("WXMFC b","autoResize"),"data-sizegroup":"hr_chevron_prices",children:null!=g&&g.isPTotalSNightlyVariant||null!=g&&g.isPTotalVariant?d:t}):null,f("hr_ib_exclude_taxes_and_fees")||!c?null:L("div",{className:"SAOsA",children:`+ ${c} ${N.string("meta_ui_taxes_and_fees_14f6")}`}),!!t&&L(Za,{totalStay:d,taxesValue:c}),!!t&&L(en,{experiment:g,totalPrice:d,lengthOfStay:P,nightlyPrice:t})]})}),L("div",{className:y("ui_column","lIqkN","is-4"),children:L(rn,{status:s,text:l||Ta(N,v)})})]}),o?A("div",{className:"autoResize SuzuG b Z1",children:[L("span",{className:"ui_icon star"}),L("span",{children:N("hotels_save_money",{0:o})})]}):null,ln(e,O,w),tn(u,p),sn(p)]})},cn=()=>e=>{var{offer:a,offer:{data:n,status:i="UNCONFIRMED",savingsDisplayValue:l,savingsDisplayPercent:t,savingsDisplayMoney:s,savingsDisplayType:r,priceText:o,strikeThroughText:c},isRefreshPopupOpen:d,setPaywallIsBlocking:u,allInPriceExperiment:p,viewDealCtaUpdateEnabled:m}=e;return n&&(n.isOptimusOffer?L(fa,{data:n,status:i,displayVariant:"chevron",merchandiseMessages:a.merchandiseMessages,savingsDisplayValue:l||t||s,savingsDisplayType:r,priceText:o,strikeThroughText:c,perks:a.perks,isRefreshPopupOpen:d,onPaywallClose:()=>{u&&u(!1)},onPaywallOpen:()=>{u&&u(!0)}}):L(on,{data:n,providerLogoUrl:a.providerLogoUrl,providerDisplayName:a.providerDisplayName||"",priceText:o,strikeThroughText:c,isComparisonOffer:a.isComparisonOffer,taxesAndFeesText:a.taxesAndFeesText,totalStayText:a.totalStayText,savePriceText:a.savePriceText,status:a.status||"UNCONFIRMED",specialRateMessage:a.specialRateMessage,merchandiseMessages:a.merchandiseMessages,roomsRemaining:a.roomsRemaining||n.roomsRemaining,allInPriceExperiment:p,viewDealCtaUpdateEnabled:m}))},dn={__key:5306934247273,id:"04d39dee3f6951b6a25752c6d92718df",loc:{},definitions:[]},un=e=>{var a,n,[{data:i,fetching:l}]=Ue({query:dn,variables:{locationId:e}});return!l&&(null==i||null==(a=i.locations)||null==(n=a[0])?void 0:n.name)||""},pn=({cashbackDisplayAmount:e,optimusBookingFlow:a})=>{var n=V(),{isOptimusSubscriber:i}=pe();return!i&&f("optimus_paywall")&&"RESTRICTED"===a?"PAYWALL":n||e?"ROOMGRID":"ALLOWED"===a?"LOGIN>ROOMGRID":"LOGIN>RELOAD"},mn=()=>{var{login:e}=qe({allowClose:!0,forceLogin:!1,contextualMessageKey:"plus_login_header_copy1_new"}),a=He(),{params:n}=_(),{detailId:i}=n,l=ua.request("room-grid-ready"),[r,c]=t(!!l),d=Ra({event:"IB_CLICK"}),u=e=>{c(e)};o((()=>(ua.on("room-grid-ready",u),()=>{ua.off("room-grid-ready",u)})),[]);var p=s(((e,a,n)=>{r?ua.emit("expand-rooms",n):(d(a),Ba(e))}),[d,r]);return s((({data:n,action:l,setPaywallFunnelKey:t,setIsPaywallModalOpen:s,funnelKey:r,e:o,ref:c})=>{switch(l){case"PAYWALL":r&&t(r),s(!0);break;case"ROOMGRID":p(n,o,r);break;case"CHECKOUT":d(o),Ba(n);break;case"LOGIN>CHECKOUT":e&&e(void 0,r).then((()=>{a({locationId:i,funnelKey:r}),d(o,c.current,"same_tab"),Ba(n)}));break;case"LOGIN>ROOMGRID":e&&e(void 0,r).then((()=>{var e=new URLSearchParams({onLoadAction:"ROOMGRID"});r&&e.append("funnelKey",r),window.location.href=`${window.location.href}?${e.toString()}`}));break;case"LOGIN>RELOAD":e&&e(void 0,r).then((()=>{a({locationId:i,funnelKey:r}),window.location.reload()}));break;default:console.error(`Unexpected offer click action: ${l}`)}}),[p,i,e,a,d])},hn="room-grid-ready",gn=({data:e,funnelKey:a})=>{var{params:n}=_(),{onLoadAction:i=""}=n,[l,s]=t(!!ma.request(hn)),[r,c]=t(!i),d=e=>{s(e)};o((()=>(ma.on(hn,d),()=>{ma.off(hn,d)})),[]),o((()=>{e.isOptimusOffer&&!r&&("ROOMGRID"===i?l&&(ma.emit("expand-rooms",a),c(!0)):c(!0))}),[e,a,i,r,l])},vn="YjxMA",fn="SqioE",yn="rErwD",kn="suDpt",_n="oBpdK",bn="qMwHU k H",Tn="ycJdE",In="lTLdI",Nn="zlydK",Cn=({perks:e})=>{var[a,i]=n.useState(e.length<=3);return L("div",{children:A(ie,{variant:"supporting-01",children:[L("div",{className:"UqRPQ",children:L("ul",{children:e.slice(0,a?e.length:3).map((e=>L("li",{className:"Biohs",children:e},e)))})}),!a&&L("span",{className:"PXWeg",children:L("button",{onClick:e=>{e.stopPropagation(),e.preventDefault(),i(!0)},children:L(p,{id:"rebrand_see_all"})})})]})})},On=({status:e,ctaText:a})=>L("div",{className:"BrFhb",children:"IN_PROGRESS"===e?A(ee,{variant:"commerce",fullWidth:!0,children:[L("span",{className:"ui_loader small eLFZe"}),L("span",{}),L("span",{}),L("span",{})]}):"UNAVAILABLE"!==e&&L(ee,{variant:"commerce",fullWidth:!0,dataAttributes:{"data-automation":"plusOfferButton"},children:a})}),Dn=({clickToken:e,onClick:a,children:n})=>L("span",{"data-clicktoken":e,onClick:a,children:n}),wn=({cashbackDisplayAmount:e,clickToken:a,discountMessage:n,isPerksOffer:i,merchandiseMessages:l,offerDebug:s,offerStatus:r,onOfferClick:o,perks:c,priceText:d,strikeThroughText:u})=>{var p=V(),[h,g]=t(!1),[v,f]=t(!1),{localize:y}=m();return A(E,{children:[L(Dn,{clickToken:a,onClick:o,children:A("div",{className:_n,children:[A("div",{className:bn,children:[L(Q,{variant:"plus-logo-full",width:135}),A("div",{className:In,children:[u&&L("div",{className:"Koisi Wa",children:u}),(!!p||i||e)&&d&&L("div",{className:vn,children:d})]})]}),L("div",{className:Nn,children:L(rn,{status:r,text:y.string("view_deal_button_cta")})})]})}),e?A("div",{children:[L(ae,{onClick:()=>f(!0),variant:"accent",children:L(ie,{elementType:"span",variant:"button-02",children:n})}),v&&L(Me,{variant:"steps",onClose:()=>f(!1),getFunnelKeyByToken:Ae,perks:c,cashbackDisplayAmount:e,showCloseButton:!1})]}):null,e?null:A("div",{children:[L(ae,{onClick:()=>g(!0),variant:"accent",children:L(ie,{elementType:"span",variant:"button-02",children:n})}),h&&L(Me,{variant:"bullets",onClose:()=>g(!1),getFunnelKeyByToken:Ae,perks:c,cashbackDisplayAmount:e,showCloseButton:!0})]}),!(null==l||!l.length)&&L("div",{className:Tn,children:l.map((e=>L(Xe,{message:e},e.message)))}),s]})},xn=({clickToken:e,merchandiseMessages:a,offerDebug:n,offerStatus:i,onOfferClick:l,priceText:t})=>{var{localize:s}=m();return A(E,{children:[L(Dn,{clickToken:e,onClick:l,children:A("div",{className:_n,children:[A("div",{className:bn,children:[L("div",{children:L(ce,{width:112})}),L("div",{className:y(In,vn),children:t})]}),L("div",{className:Nn,children:L(rn,{status:i,text:s.string("view_deal_button_cta")})})]})}),!(null==a||!a.length)&&L("div",{className:y(Tn,"DqfdA"),children:a.map((e=>L(Xe,{message:e},e.message)))}),n]})},Pn=({clickToken:e,merchandiseMessages:a,offerDebug:n,offerStatus:i,onOfferClick:l,priceText:t})=>{var{localize:s}=m();return A(E,{children:[L(Dn,{clickToken:e,onClick:l,children:A("div",{children:[A("div",{className:"MrDDV k",children:[L(ce,{width:112}),L(ie,{variant:"title-03",display:"block",children:L("span",{className:fn,children:t})})]}),!(null==a||!a.length)&&L("div",{className:"CWtzr",children:a.map((e=>L(Xe,{message:e},e.message)))}),L("div",{children:L(On,{status:i,ctaText:s.string("plus_hotels_cta_choose_your_room")})})]})}),n]})},Sn=({status:e="UNCONFIRMED",data:a,displayVariant:l,merchandiseMessages:d,savingsDisplayValue:u,savingsDisplayType:p,priceText:h,strikeThroughText:g,perks:v,isRefreshPopupOpen:k,onPaywallOpen:b,onPaywallClose:T,datesGuestsChanged:I})=>{var N=V(),{isOptimusSubscriber:C}=pe(),O=ue(),D=he(),{page:x,params:P}=_(),{localize:S}=m(),R=i(Ie),M=se({experimentKeys:["plus_preference_test_1646419425"]}),B=null!==M,K="test"===(null==M?void 0:M.plus_preference_test_1646419425),F=null==a?void 0:a.cashbackDisplayAmount,U=K?null:F,[z]=t(N),q=r(null),W=!u&&!U&&!(null==v||!v.length),{detailId:j,newPlusSubscriber:G=!1,geoId:$=0,funnelKey:J}=P,X=un(j||0),Y=!(null==v||!v.length),Z=da(a),ee=pa();ha({data:a,funnelKey:J});var[ne,te]=n.useState(!1),ce=n.useRef(1e3);n.useEffect((()=>{var e=setTimeout((()=>te(!0)),ce.current);return()=>clearTimeout(e)}),[ce]);var[de,ge]=t(!1),[ve,fe]=t();o((()=>{N===z||z||"ALLOWED"!==a.optimusBookingFlow&&"PAYWALL"!==Z&&window.location.reload()}),[N,z,a.optimusBookingFlow,Z]);var ye=Ce(),ke=le(p,u,Y,F),_e=a.clickToken||"",be=Ee("IB_CLICK"),Te=w(),we=s((e=>{H.get("selectedRoom")&&H.remove("selectedRoom");var n=u||(N?void 0:D);return Ma(e,(i=>{var t,s;be(),Te({event:"IB_CLICK"});var r="IB"===a.optimusBranding,o=Oe(!!U,!!u,r),c=De(r,"dominant"===l);O({actionType:"click",actionSubType:"Hotels",impressionKey:i,itemId:Z,itemName:"DetailedOptimusOffer",itemType:"ViewDealClick",locationId:j,page:ye,team:"Plus",customData:{action:Z,benefitType:o,bookingFlow:a.optimusBookingFlow,cashbackAmount:r||null==a||null==(t=a.optimusCashbackDetails)?void 0:t.amount,cashbackCurrency:r||null==a||null==(s=a.optimusCashbackDetails)?void 0:s.currency,isMemberSignedIn:!!N,savingsAmount:W||r?void 0:n,treatment:c}}),ee({data:a,action:Z,setPaywallFunnelKey:fe,setIsPaywallModalOpen:ge,funnelKey:i,e:e,ref:q})})),!1}),[Z,U,a,D,l,ee,O,W,j,be,ye,u,N,Te]),[xe,Pe]=t(!1),Se=A("div",{className:y(yn,kn),children:[L("div",{className:"rjgKO",children:A(ie,{variant:"title-03",marginBottom:"spacing-01",children:[L(Dn,{clickToken:_e,onClick:we,children:W?S.string("plus_perks_included"):ke}),(!F||B&&!K)&&L(oe,{triggeringElement:L("span",{className:y("NBISJ","dnTMw"),children:L(re,{size:14})}),content:va,variant:"bottom-caret"}),F&&K&&A(E,{children:[L("button",{className:"Pfuhk _S B- G_",onClick:()=>Pe(!0),children:L("span",{className:"BCAeX",children:L(re,{size:14})})}),xe&&L(Me,{variant:"bullets",onClose:()=>Pe(!1),getFunnelKeyByToken:Ae,perks:v,cashbackDisplayAmount:U,showCloseButton:!0})]})]})}),L(Dn,{clickToken:_e,onClick:we,children:null!=v&&v.length?L(Cn,{perks:v}):null})]}),[Re,Ke]=n.useState(!1),Ve=n.useRef(),Fe=U?A("div",{children:[L(ae,{onClick:()=>{Ae((e=>{O({actionType:"click",actionSubType:"CashbackEarningsMessageInteraction",itemType:"CashbackEarningsMessageClick",team:"Plus",externalKey:e||"",itemName:"CashbackEarningsMessaging",page:x,locationId:j})})),Ke(!0)},variant:"accent",children:L(ie,{elementType:"span",variant:"button-02",children:ke})}),Re&&L(Me,{variant:"steps",onClose:()=>{Ke(!1)},getFunnelKeyByToken:Ae,perks:v,cashbackDisplayAmount:U,showCloseButton:!1})]}):null,{featureEnabled:Ue}=Le(!!U),ze=B&&A("div",{className:U?"GxWzq":"",children:[L(Dn,{clickToken:_e,onClick:we,children:A("div",{className:y(yn,Ue?kn:"XegXx"),ref:Ve,children:[!Ue&&L("span",{className:U?"NKNwR":"",children:L(Q,{variant:"plus-logo-short-purple",height:25})}),g&&L(ie,{variant:h?"title-04":"title-03",display:"block",color:"secondaryText",children:L("span",{className:"OuVpG Wa",children:g})}),(!!N||W||U)&&L(ie,{variant:"title-03",display:"block",children:L("span",{className:fn,children:h})})]})}),!Ue&&Fe]}),qe=L(Be,{children:L(c,{children:a.optimusDebugInfo&&f("optimus_offer_debug")?L(ga,{debugInfo:a.optimusDebugInfo,showToggleAllOption:!1}):null})}),He=A(E,{children:[A("div",{className:"kewfI k",children:[!B||U?null:Se,ze,!B&&L(Ne,{})]}),qe,B&&U&&Ue&&L(ra,{perks:v,cashbackAmount:U}),B&&U&&!Ue&&!C&&L(sa,{}),A(Dn,{clickToken:_e,onClick:we,children:[L(On,{status:e,ctaText:S.string("plus_hotels_cta_choose_your_room")}),!U&&!C&&B&&L("div",{className:"EqlKi",children:L(me,{})})]})]}),We="IB"===a.optimusBranding,je=We?L(Pn,{clickToken:_e,merchandiseMessages:d,offerDebug:qe,offerStatus:e,onOfferClick:we,priceText:h}):He,Ge=We?L(xn,{clickToken:_e,merchandiseMessages:d,offerDebug:qe,offerStatus:e,onOfferClick:we,priceText:h}):L(wn,{cashbackDisplayAmount:U,clickToken:_e,discountMessage:ke,isPerksOffer:W,merchandiseMessages:d,offerDebug:qe,offerStatus:e,onOfferClick:we,perks:v,priceText:h,strikeThroughText:g});return A(E,{children:[L("div",{...xa(a,void 0,!1),id:"OPTIMUS_OFFER",className:y("neZGF _S",{offer:"chevron"===l,WHNYz:"chevron"===l,DpuxT:"dominant"===l}),ref:q,children:"chevron"===l?Ge:je}),ne&&G&&!R&&!k&&!I&&!de&&L(ta,{anchorRef:Ve.current,commerceSectionRef:q}),de&&!k&&L(la,{geoId:$,hotelId:j||0,hotelName:X,onClose:()=>{T&&T(),ge(!1)},onOpen:b,savingsDisplayType:p,savingsDisplayValue:u,funnelKey:ve})]})},Rn=(e,a,n)=>e.isIbOffer?L("span",{className:y("svgico","BcCaz")}):a?L(v,{className:"EJmbd Vm",src:a,alt:n}):L("span",{className:"taLnk",title:n,children:n}),Mn=e=>e&&e.isIbOffer&&f("om_affiliate_commerce_button_CTA"),Ln=(e,a)=>Mn(e)?L(Xe,{message:{type:"DEFAULT",message:a.string("affiliate_merchandise_message_v1")}},a.string("affiliate_merchandise_message_v1")):null,An=(e,a,n)=>e.isMobileRate?L("div",{className:y("ui_column","is-4","lFuQS",La,"qClCE"),ref:n,children:L(b,{offerContentId:e.contentId,locationId:a})}):null,En=(e,a)=>e&&0!==e.length?L(Ye,{message:e,merchandiseMessagesBelow:void 0!==a&&a.length>0}):null,Bn=e=>e&&0!==e.length?L("div",{className:"luIFQ e",children:e.map((e=>L(Xe,{message:e},e.message)))}):null,Kn=({data:e,providerLogoUrl:a,providerDisplayName:n,strikeThroughText:i,totalStayText:l,taxesAndFeesText:t,buttonText:s,priceText:o,status:c,specialRateMessage:d,merchandiseMessages:u,roomsRemaining:p,designSystemSecondaryButtonV1Enabled:h,allInPriceExperiment:g,viewDealCtaUpdateEnabled:v})=>{var k,b,T,I,{localize:N}=m(),O="MOBILE"===fe(),w=_(),x="detailId"in w.params&&w.params.detailId?w.params.detailId:0,P=r(null),S=s||((e,a)=>Mn(e)?a.string("affiliate_cta_book_get_rewards_v1"):null)(e,N)||Ta(N,v),R=L(ca,{metaOfferButtonText:S,buttonSize:h&&O?"medium":"small"}),M=C(),E=(null==(k=M.hotels)?void 0:k.checkInDate)&&(null==(b=M.hotels)?void 0:b.checkOutDate)&&new D(null==(T=M.hotels)?void 0:T.checkInDate).daysTo(new D(null==(I=M.hotels)?void 0:I.checkOutDate)),B=Ra({event:"CLICKOUT"});return A("div",{children:[A("a",{...xa(e,void 0,!1),id:`bor_book_link_${e.contentId}`,className:y("ruTYw _S","offer",i&&f("black_strikethrough")&&"Bnnic",f("commerce_link_strategy_underline_prices")&&"FlsPt",e.clickToken&&"bookableOffer"),href:void 0,onClick:a=>{var n,i;null!=(n=P.current)&&n.contains(a.target)||null!=(i=a.target)&&i.closest('[role="tooltip"]')||(B(a,null),Ba(e))},children:[A("div",{className:"ui_columns is-mobile is-multiline is-vcentered is-gapless-vertical rGCRi",children:[L("div",{className:"ui_column b",children:Rn(e,a,n)}),A("div",{className:"ui_column gqoaF Wi",children:[i?L("div",{className:"VSSKh Wi Wa",children:i}):null,p&&L("div",{className:"pMkxe",children:L(oa,{locationId:x,offerContentId:e.contentId,roomsRemaining:p})}),o?A("div",{className:y("JPNOn b Wi"),children:[null!=g&&g.isPTotalSNightlyVariant||null!=g&&g.isPTotalVariant?l:o,L(Za,{totalStay:l,taxesValue:t}),L(en,{experiment:g,totalPrice:l,lengthOfStay:E,nightlyPrice:o})]}):null]})]}),L("div",{className:"ui_columns is-mobile is-multiline",children:A("div",{className:y("ui_column",La),children:[An(e,x,P),Ln(e,N),En(d,u),Bn(u)]})})]}),L("div",{className:"ui_columns is-mobile",children:L("div",{className:"ui_column is-12 VsoiZ",children:L("div",{...xa(e,void 0),onClick:a=>{B(a,null),Ba(e)},children:"IN_PROGRESS"===c?A("span",{className:"ui_loader small EJowI",children:[L("span",{}),L("span",{}),L("span",{}),L("span",{}),L("span",{})]}):R})})})]})},Vn=()=>({offer:e,offer:{data:a,status:n="UNCONFIRMED",priceText:i,strikeThroughText:l,savingsDisplayType:t,savingsDisplayValue:s,savingsDisplayPercent:r,savingsDisplayMoney:o},setPaywallIsBlocking:c,isRefreshPopupOpen:d,designSystemSecondaryButtonV1Enabled:u,allInPriceExperiment:p,viewDealCtaUpdateEnabled:m})=>a&&(a.isOptimusOffer?L(fa,{data:a,status:n,displayVariant:"dominant",merchandiseMessages:e.merchandiseMessages,savingsDisplayValue:s||r||o,savingsDisplayType:t,priceText:i,strikeThroughText:l,perks:e.perks,isRefreshPopupOpen:d,onPaywallClose:()=>{c&&c(!1)},onPaywallOpen:()=>{c&&c(!0)}}):L(I,{component:N.primary_commerce_button,enabled:T(),children:L(Kn,{data:a,providerLogoUrl:e.providerLogoUrl,providerDisplayName:e.providerDisplayName||"",priceText:i,strikeThroughText:l,taxesAndFeesText:e.taxesAndFeesText,totalStayText:e.totalStayText,status:n,specialRateMessage:e.specialRateMessage,merchandiseMessages:e.merchandiseMessages,roomsRemaining:e.roomsRemaining||a.roomsRemaining,designSystemSecondaryButtonV1Enabled:u,allInPriceExperiment:p,viewDealCtaUpdateEnabled:m})})),Fn="DJRuD Z1 _U",Un=(e,a,n,i,l,t,s)=>{if("IN_PROGRESS"===e)return L("span",{className:"fRTJP Z1 _U",children:A("span",{className:"ui_loader small",children:[L("span",{}),L("span",{}),L("span",{}),L("span",{}),L("span",{})]})});if("UNAVAILABLE"===e||!n)return L("span",{className:Fn,children:L("span",{className:"ui_icon prohibited"})});if("AVAILABLE"!==e||!a)return L("span",{className:Fn,children:L("span",{className:"ui_icon search"})});var r=L("span",{className:"imSMq",children:"(12x)"});return A("span",{title:a,className:y(Fn,{sGyzo:i}),children:[null!=t&&t.isPTotalSNightlyVariant||null!=t&&t.isPTotalVariant?s:a,f("pay_in_installments_msg")&&l&&r]})},zn=({data:e,providerDisplayName:a,priceText:n,savingsDisplayType:i,savingsDisplayValue:l,isComparisonOffer:o,status:c,inDropdown:d,canPayInInstallments:u,totalStayText:p,allInPriceExperiment:m})=>{var h=F(),g=ue(),v=We(),b=V(),{page:T,params:I}=_(),N=k(),{detailId:C,geoId:O=0,funnelKey:D}=I,w=pa(),x=da(e),P=r(null),S=un(C||0),R=Ra({event:"CLICKOUT"}),[M,B]=t(!1),[K,U]=t();ha({data:e,funnelKey:D});var z=s((a=>{e.isOptimusOffer?Ma(a,(n=>{var i,l;h({Hotels:{TextOfferClick:{isMemberSignedIn:!!b,funnelKey:n,servletName:T,locationId:C,action:x}}}),(null==e?void 0:e.cashbackDisplayAmount)&&g({actionType:"click",actionSubType:"Hotels",itemType:"TextOfferClick",team:"Plus",impressionKey:n,pageUid:N,itemName:"DetailTextOffer",itemId:x,locationId:C,userId:b,sessionId:v,page:T,customData:{benefitType:"CASH_BACK",cashbackAmount:null==e||null==(i=e.optimusCashbackDetails)?void 0:i.amount,cashbackCurrency:null==e||null==(l=e.optimusCashbackDetails)?void 0:l.currency,bookingFlow:e.optimusBookingFlow,isMemberSignedIn:!!b}}),w({data:e,action:x,setPaywallFunnelKey:U,setIsPaywallModalOpen:B,funnelKey:n,e:a,ref:P})})):(R(a,null),Ba(e))}),[x,e,C,h,g,w,T,b,N,v,R]);return A(E,{children:[A("div",{...null!=e&&e.isOptimusOffer||d?xa(e,void 0,!1):xa(e,void 0),className:y("eHrHH f o _S S2",{jMBWC:!e.clickToken,aXePJ:d,DFJtj:f("black_strikethrough"),GSTud:f("commerce_link_strategy_underline_prices")}),onClick:z,children:[A("span",{title:a,className:"BGPep Z1 f",children:[L("span",{className:f("pay_in_installments_msg")&&u?"Pcmkl o q":"",children:a}),e.isIbOffer||!e.clickToken?null:L("span",{className:"ui_icon external-link-no-box"})]}),Un(c,n,!!e.clickToken,o,u,m,p)]}),M&&L(la,{geoId:O,hotelId:C||0,hotelName:S,onClose:()=>B(!1),savingsDisplayType:i,savingsDisplayValue:l,funnelKey:K})]})},qn=e=>({offer:a,allInPriceExperiment:n})=>a.data?L(zn,{data:a.data,providerDisplayName:a.providerDisplayName||"",priceText:a.priceText,isComparisonOffer:a.isComparisonOffer,status:a.status||"UNCONFIRMED",inDropdown:e,canPayInInstallments:a.canPayInInstallments,savingsDisplayType:a.savingsDisplayType,savingsDisplayValue:a.savingsDisplayValue||a.savingsDisplayPercent||a.savingsDisplayMoney,totalStayText:a.totalStayText,allInPriceExperiment:n}):null,Hn="MIpzr _U",Wn=(e,a,n,i,l,t,s)=>{if("IN_PROGRESS"===e)return L("span",{className:"OymjO _U",children:A("span",{className:"ui_loader small",children:[L("span",{}),L("span",{}),L("span",{}),L("span",{}),L("span",{})]})});if("UNAVAILABLE"===e||!n)return L("span",{className:Hn,children:L("span",{className:"ui_icon prohibited"})});if("AVAILABLE"!==e||!a)return L("span",{className:Hn,children:L("span",{className:"ui_icon search"})});var r=L("span",{className:"tnMVB",children:"(12x)"});return A("span",{title:a,className:y(Hn,{RKJNJ:i}),children:[null!=t&&t.isPTotalSNightlyVariant||null!=t&&t.isPTotalVariant?s:a,f("pay_in_installments_msg")&&l&&r]})},jn=({data:e,providerDisplayName:a,priceText:n,isComparisonOffer:i,status:l,canPayInInstallments:o,savingsDisplayType:c,savingsDisplayValue:d,totalStayText:u,allInPriceExperiment:p})=>{var m=F(),h=ue(),g=We(),v=V(),{page:b,params:T}=_(),I=k(),{detailId:N,geoId:C=0,funnelKey:O}=T,D=pa(),w=da(e),x=r(null),P=un(N||0),S=Ra({event:"CLICKOUT"}),[R,M]=t(!1),[B,K]=t();ha({data:e,funnelKey:O});var U=s((a=>{var n=null==e?void 0:e.cashbackDisplayAmount;e.isOptimusOffer?Ma(a,(i=>{var l,t;m({Hotels:{TextOfferClick:{isMemberSignedIn:!!v,funnelKey:i,servletName:b,locationId:N,action:w}}}),n&&h({actionType:"click",actionSubType:"Hotels",itemType:"TextOfferClick",team:"Plus",impressionKey:i,pageUid:I,itemName:"MobileDrawerOffer",itemId:w,locationId:N,userId:v,sessionId:g,page:b,customData:{benefitType:"CASH_BACK",cashbackAmount:null==e||null==(l=e.optimusCashbackDetails)?void 0:l.amount,cashbackCurrency:null==e||null==(t=e.optimusCashbackDetails)?void 0:t.currency,bookingFlow:e.optimusBookingFlow,isMemberSignedIn:!!v}}),D({data:e,action:w,setPaywallFunnelKey:K,setIsPaywallModalOpen:M,funnelKey:i,e:a,ref:x})})):S(a,null)}),[w,e,N,m,h,D,b,v,I,g,S]);return A(E,{children:[A("div",{...null!=e&&e.isOptimusOffer?xa(e,void 0,!1):xa(e,void 0),className:y("lXtvX o Z",!e.clickToken&&"RGFLl",f("black_strikethrough")&&"EFnxG"),onClick:U,children:[A("span",{title:a,className:"BckDJ",children:[a,e.isIbOffer||!e.clickToken?null:L("span",{className:"ui_icon external-link-no-box"})]}),Wn(l,n,!!e.clickToken,i,o,p,u)]}),R&&L(la,{geoId:C,hotelId:N||0,hotelName:P,onClose:()=>M(!1),savingsDisplayType:c,savingsDisplayValue:d,funnelKey:B})]})},Gn=()=>({offer:e,allInPriceExperiment:a})=>e.data?L(jn,{data:e.data,providerDisplayName:e.providerDisplayName||"",priceText:e.priceText,isComparisonOffer:e.isComparisonOffer,status:e.status||"UNCONFIRMED",canPayInInstallments:e.canPayInInstallments,savingsDisplayType:e.savingsDisplayType,savingsDisplayValue:e.savingsDisplayValue||e.savingsDisplayPerCent||e.savingsDisplayMoney,totalStayText:e.totalStayText,allInPriceExperiment:a}):null,$n="LlSUB Wi Vm",Jn="SmQSn S7 Wd Wa",Xn="YnZHI k",Yn="SWgbc",Zn=({offer:e,variant:a})=>{var n=r(null),i=V(),{params:l}=_(),o=ue(),{status:c,savingsDisplayType:d,savingsDisplayValue:u,savingsDisplayPercent:p,savingsDisplayMoney:h,priceText:g,strikeThroughText:v,perks:f}=e,{data:k}=e,b=null==k?void 0:k.cashbackDisplayAmount,T=u||p||h,I=!T&&!b&&!(null==f||!f.length),N=!T&&!(null==f||!f.length),{detailId:C,geoId:O=0,funnelKey:D,promotePlusDominant:x=!1}=l,P=un(C||0),[S,R]=t(!1),[M,B]=t(),{localize:K}=m(),F=da(k),U=pa();ha({data:k,funnelKey:D});var z=Ce(),q=!(null==f||!f.length),H=le(d,T,q,b),W=Ee("IB_CLICK"),j=w(),G=s((e=>{Ma(e,(a=>{var l,t;W(),j({event:"IB_CLICK"});var s="IB"===k.optimusBranding,r=Oe(!!b,!!T,s),c=De(s,x||"DOMINANT"===k.optimusTreatment);o({actionType:"click",actionSubType:"Hotels",impressionKey:a,itemId:F,itemName:"OptimusMiniOffer",itemType:"ViewDealClick",locationId:C,page:z,team:"Plus",customData:{action:F,benefitType:r,bookingFlow:k.optimusBookingFlow,cashbackAmount:s||null==k||null==(l=k.optimusCashbackDetails)?void 0:l.amount,cashbackCurrency:s||null==k||null==(t=k.optimusCashbackDetails)?void 0:t.currency,isMemberSignedIn:!!i,savingsAmount:I||s?void 0:T,treatment:c}}),U({data:k,action:F,setPaywallFunnelKey:B,setIsPaywallModalOpen:R,funnelKey:a,e:e,ref:n})}))}),[F,b,k,U,o,I,C,W,x,z,T,i,j]),$=s((()=>{var a=xa(null==e?void 0:e.data);return 0===Object.keys(a).length||delete a["data-early-click-target"],a}),[e]);if("AVAILABLE"!==c)return null;var J="IB"===k.optimusBranding,X=K.string("plus_hotels_cta_choose_your_room"),Y=L(la,{geoId:O,hotelId:C||0,hotelName:P,onClose:()=>R(!1),savingsDisplayType:d,savingsDisplayValue:T,funnelKey:M});if("footer"===a)return A("div",{className:"jrvQI Gi e",children:[A("div",J?{className:Xn,children:[L(ce,{width:112}),L(ie,{variant:"title-04",elementType:"span",children:L("span",{children:g})})]}:{className:Xn,children:[L(Q,{variant:"plus-logo-short",height:22}),A(ie,{variant:"title-04",elementType:"span",children:[v?L("span",{className:Jn,children:v}):null,g&&(i||N||b)?L("span",{children:g}):null]})]}),L("div",{...$(),onClick:G,ref:n,children:L(ee,{variant:"commerce",size:"medium",legacyStyled:!0,fullWidth:!0,children:L(ie,{variant:"button-01",children:X})})}),S&&Y]});var Z=K.string("plus_hotels_cta_book_now");return A(E,{children:[J?L("div",{className:$n,children:L(ie,{variant:"title-04",elementType:"span",children:L("span",{children:g})})}):A("div",{className:$n,"data-automation":"tab-bar-offer-price",children:[A(ie,{variant:"title-04",elementType:"span",children:[v?L("div",{className:y(Jn,{[Yn]:!!i}),children:v}):null,g&&(i||N||b)?g:null]}),L(ie,{variant:"supporting-02",children:L("div",{className:y("sjjBU",Yn),children:H})})]}),L("div",{"data-automation":"tab-bar-book-button",children:L("div",{...$(),className:"jzHLa Wi",ref:n,onClick:G,children:L(ee,{variant:"commerce",size:"xsmall",legacyStyled:!0,children:Z})})}),S&&Y]})},Qn=({offer:e,mobile:a,viewDealCtaUpdateEnabled:n})=>{var{localize:i}=m(),l=Ra({event:"CLICKOUT"});if(!e)return null;var{data:t,status:s,providerDisplayName:r,priceText:o}=e;if(t.isOptimusOffer&&e)return L(ya,{offer:e,variant:a?"footer":"header"});var c=wa(t)?i.string("affiliate_cta_book_get_rewards_v1"):Ta(i,n);return"AVAILABLE"!==s?null:A(E,{children:[A("div",{className:"ITglM Wi PP Vm","data-automation":"tab-bar-offer-price",children:[L("div",{className:"mcvYL b",children:o}),A("div",{className:"WeNyO",children:[r,t.isIbOffer||!t.clickToken?null:L(x,{name:"external-link-no-box"})]})]}),L("div",{className:"KzIFe Wi","data-automation":"tab-bar-book-button",children:L("div",{...xa(t,void 0),onClick:e=>l(e,null,void 0),children:L(ee,{variant:"commerce",size:"small",children:c})})})]})},ei=({containerId:e,offer:a,setPaywallIsBlocking:n,trackedItemName:i,children:l})=>{var s,o=r(null),[c,d]=t(!1),[u,p]=t(),m=ue(),h=Ee("IB_CLICK"),g=w(),v=V,{page:f,params:y}=_(),k="geoId"in y?y.geoId:0,b="detailId"in y?y.detailId:0,T="funnelKey"in y?y.funnelKey:void 0,I=un(b||0),N=he(),{savingsDisplayType:C}=a,{cashbackDisplayAmount:O}=a.data,D=a.savingsDisplayValue||a.savingsDisplayPercent||a.savingsDisplayMoney,x=D||(v?void 0:N),P=!D&&!O&&!(null==(s=a.perks)||!s.length),S="IB"===a.data.optimusBranding,R=da(a.data),M=Oe(!!O,!!D,S),E=De(S,!1),B=pa();return ha({data:a.data,funnelKey:T}),A("div",{id:e,...xa(a.data,"new_tab",!1),onClick:e=>{H.get("selectedRoom")&&H.remove("selectedRoom"),Ma(e,(n=>{var l,t;h(),g({event:"IB_CLICK"}),m({actionType:"click",actionSubType:"Hotels",impressionKey:n,itemId:R,itemName:i,itemType:"ViewDealClick",locationId:b,page:f,team:"Plus",customData:{action:R,benefitType:M,bookingFlow:a.data.optimusBookingFlow,cashbackAmount:S||null==(l=a.data.optimusCashbackDetails)?void 0:l.amount,cashbackCurrency:S||null==(t=a.data.optimusCashbackDetails)?void 0:t.currency,isMemberSignedIn:!!v,savingsAmount:P||S?void 0:x,treatment:E}}),B({data:a.data,action:R,setPaywallFunnelKey:p,setIsPaywallModalOpen:d,funnelKey:n,e:e,ref:o})}))},ref:o,children:[l,c&&L(be,{events:["onClick","onTouchStart"],children:L(la,{geoId:k,hotelId:b,hotelName:I,onClose:()=>{d(!1),n(!1)},onOpen:()=>{n(!0)},savingsDisplayType:C,savingsDisplayValue:D,funnelKey:u})})]})};function ai(e,a){if(a.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+a.length+" present")}function ni(e){ai(1,arguments);var a=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===a?new Date(e.getTime()):"number"==typeof e||"[object Number]"===a?new Date(e):("string"!=typeof e&&"[object String]"!==a||"undefined"==typeof console||(new Error).stack,new Date(NaN))}function ii(e){ai(1,arguments);var a=ni(e);return!isNaN(a)}function li(e,a){for(var n=e<0?"-":"",i=Math.abs(e).toString();i.length<a;)i="0"+i;return n+i}function ti(e,a){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=ni(e);if(!ii(n))throw new RangeError("Invalid time value");var i=a||{},l=null==i.format?"extended":String(i.format),t=null==i.representation?"complete":String(i.representation);if("extended"!==l&&"basic"!==l)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==t&&"time"!==t&&"complete"!==t)throw new RangeError("representation must be 'date', 'time', or 'complete'");var s="",r="",o="extended"===l?"-":"",c="extended"===l?":":"";if("time"!==t){var d=li(n.getDate(),2),u=li(n.getMonth()+1,2),p=li(n.getFullYear(),4);s="".concat(p).concat(o).concat(u).concat(o).concat(d)}if("date"!==t){var m=n.getTimezoneOffset();if(0!==m){var h=Math.abs(m),g=li(Math.floor(h/60),2),v=li(h%60,2),f=m<0?"+":"-";r="".concat(f).concat(g,":").concat(v)}else r="Z";var y=li(n.getHours(),2),k=li(n.getMinutes(),2),_=li(n.getSeconds(),2),b=""===s?"":"T",T=[y,k,_].join(c);s="".concat(s).concat(b).concat(T).concat(r)}return s}var si={__key:0x8828f26284c4,id:"8828f26284c46018f8929401a9761832",loc:{},definitions:[]},ri=[1e3,1e3,1e3,1e3,1500,1500,1500,2e3,2e3,2e3,5e3,1e4,1e4,1e4,1e4],oi=({children:e})=>{var a=i(ba);return L(E,{children:e(a)})},ci=({ttp:e,optimusEnabled:a=!1,delegateOptimusStatus:n=!1,children:i})=>{var{hotels:l}=C(),s=We(),{page:c,params:d}=_(),u=k(),{userAgentCategory:p}=$e(),{detailId:m=-1}=d,h=g(),v=Ge().getState(),y=(v.meta&&v.meta.lineItemsByLoc||{})[String(m)],[,b]=t(0),T=r(0),I=r(0),N=r(null),O=r(null),D=r(null),w=O.current,x=((e,a)=>{if(e)return e;switch(a){case"Hotel_Review":return"HR_MainCommerce";case"LocationPhotoDirectLink":return"LPDL_MainCommerce";case"Hotel_Feature":return"HF_MainCommerce";case"ShowUserReviews":case"ShowUserReviewsHotels":return"RESP_SUR_H_MainCommerce";default:return e}})(e,c),P=((e,a,n,i="USD",l,t,s,r,o,c,d,u,p)=>{var m=null;t&&t.checkInDate&&t.checkOutDate&&t.rooms&&t.adults&&(m={checkInDate:ti(t.checkInDate,{representation:"date"}),checkOutDate:ti(t.checkOutDate,{representation:"date"}),usedDefaultDates:!!t.defaultDates,rooms:t.rooms,adults:t.adults,childAgesPerRoom:t.childAgesPerRoom});var h="DEFAULT_DESKTOP_OFFER_SHAPE";"MOBILE"===d&&(h="DEFAULT_MOBILE_OFFER_SHAPE");var g={hotelId:e,trackingEnabled:!!l,requestCaller:s,impressionPlacement:l,pageLoadUid:a,sessionId:n,currencyCode:i,requestNumber:c,spLineItemId:r,shapeStrategy:h,sequenceId:o&&o.sequenceId||0,travelInfo:m,allowOptimusDisplayPrice:!f("optimus_paywall")};return p&&(g={optimusEnabled:u,...g}),o&&!Je(o.travelInfo,g.travelInfo)&&(g={requestNumber:0,sequenceId:(g.sequenceId||0)+1,...g}),g})(m,u,s,h,x,l,c,y,w,I.current,p,!!a,n);O.current=P;var S=P&&P.requestNumber||0,R=P&&P.sequenceId||0;I.current=S,T.current=R;var M=m<0,[{data:A={HPS_getWebHROffers:null},fetching:E=!1,error:B}]=Ue({query:si,variables:{request:P},pause:M}),{HPS_getWebHROffers:K}=A;(!D.current||!E&&K)&&(D.current=K);var V=!B&&!(!K||!K.complete),F=!E&&!V&&S<ri.length;o((()=>(F&&(clearTimeout(N.current),N.current=setTimeout((()=>{T.current===R&&I.current<=S&&(I.current+=1,b((e=>e+1)))}),ri[S])),()=>clearTimeout(N.current))),[F,R,S]);var U=D.current,z=((e,a,n)=>({hotelId:e?Number(e):-1,loading:!!a,listing:n}))(m,!U&&(E||F)||E&&0===S,U);return L(ba.Provider,{value:z,children:i})},di=({ttp:e,optimusEnabled:a=!1,delegateOptimusStatus:n=!1,children:i})=>L(ci,{ttp:e,optimusEnabled:a,delegateOptimusStatus:n,children:L(oi,{children:e=>i(e)})});return[()=>{globalThis.require&&globalThis.require(["trjs!commerce/offerclick"],(()=>null)),Xe=Aa,Ye=Ea,Ze=Va,Qe=Fa,ea=Ua,aa=za,na=qa,ia=W(O),la=B(((e,a)=>{var n;return{...a,dateInfo:ia(null==(n=e.travelerInfo.hotels)?void 0:n.stayDates)}}))(Ha),ta=ja,sa=Ga,ra=Ja,oa=Xa,ca=Qa,on.defaultProps={providerLogoUrl:void 0,priceText:void 0,strikeThroughText:void 0,buttonText:void 0,savePriceText:void 0,isComparisonOffer:void 0,taxesAndFeesText:void 0,specialRateMessage:void 0,merchandiseMessages:void 0},da=pn,ua=ze("optimus/room-list"),pa=mn,ma=ze("optimus/room-list"),ha=gn,ga=d((()=>a("8gbmwd"))),va=L(ie,{variant:"body-01",children:L("div",{className:"jAFip",children:L(p,{id:"plus_list_saving_tooltip_2"})})}),fa=B(((e,a)=>({datesGuestsChanged:!!e.page.datesGuestsChanged,...a})))(Sn),Kn.defaultProps={providerLogoUrl:void 0,priceText:void 0,strikeThroughText:void 0,buttonText:void 0,status:void 0,specialRateMessage:void 0,merchandiseMessages:void 0},zn.defaultProps={priceText:void 0,isComparisonOffer:void 0,inDropdown:void 0},jn.defaultProps={priceText:void 0,isComparisonOffer:void 0},ya=Zn,ka=Qn,_a=B((()=>({})),(e=>({setPaywallIsBlocking:a=>e(je.page.hotels.setPaywallIsBlocking(a))})))(ei),ba=u({hotelId:-1,loading:!0}),e({MetaOfferButton:ca,MetaQueryPoller:di,MiniOffer:ka,OptimusOfferWrapper:_a,RoomUrgencyMessage:oa,bindDetailChevronOffer:cn,bindDetailTextOffer:qn,bindDominantOffer:Vn,bindMobileDrawerOffer:Gn,clickOfferElement:Sa,getFunnelKey:Ma,getFunnelKeyByOfferElementProps:Pa,getLowestPrice:Da,getOfferElementProps:xa,getPlusOffer:Ca,getTopOffer:Oa,getViewDealText:Ta,isAnyAvailable:Ia,isBookWithRewards:wa,isNoCommerce:Na,trackHRCugClick:Ba,trackHRCugShown:Ka,useClickOfferElement:Ra})},[e=>(n=e,i=e.useContext,l=e.useMemo,t=e.useState,s=e.useCallback,r=e.useRef,o=e.useEffect,c=e.Suspense,d=e.lazy,u=e.createContext),e=>(p=e.default,m=e.useLocalize,h=e.UnsafeLocalize,g=e.useCurrency),e=>v=e.CdnImage,e=>f=e.featureIsEnabled,e=>y=e.default,e=>(k=e.usePageviewUid,_=e.useRoute),e=>b=e.default,e=>T=e.default,e=>(I=e.default,N=e.Component),e=>C=e.useTravelInfo,e=>(O=e.decode,D=e.CalendarDate),e=>w=e.useGTMCallback,e=>x=e.Icon,e=>P=e.default,e=>S=e.RouteContext,e=>(R=e.HasBeenVisible,M=e.VisibilityObserver),e=>(L=e.jsx,A=e.jsxs,E=e.Fragment),e=>B=e.connect,e=>K=e.uuid,e=>V=e.useUserId,e=>F=e.useInteractionLogger,e=>U=e.useImpressionLogger,e=>z=e.needsRouting,e=>q=e.useNavigate,e=>H=e.default,e=>W=e.memoizeLast,e=>(j=e.ModalCheckoutContext,G=e.useCheckoutStepConfig,$=e.useConfirmationStepConfig),e=>J=e.ModalFlowWrapper,e=>X=e.default,e=>Y=e.default,e=>Z=e.default,e=>Q=e.default,e=>(ee=e.default,ae=e.BorderlessButton,ne=e.CircularButton),e=>ie=e.default,e=>(le=e.default,te=e.usePaywallDiscountMessaging),e=>se=e.default,e=>re=e.default,e=>oe=e.ClickTooltip,e=>ce=e.TripadvisorLogo,e=>(de=e.useHotelImpressionLogger,ue=e.useHotelInteractionLogger),e=>pe=e.default,e=>me=e.default,e=>he=e.useOptimusDefaultSavings,e=>ge=e.default,e=>ve=e.Arrow,e=>fe=e.useViewportCategory,e=>(ye=e.Toast,ke=e.ToastItem),e=>_e=e.default,e=>be=e.default,e=>Te=e.useWindow,e=>Ie=e.IsConfirmationModalOpen,e=>Ne=e.LoadingSpinner,e=>Ce=e.default,e=>(Oe=e.getUpperFunnelBenefitType,De=e.getPlusTreatment),e=>we=e.Box,e=>xe=e.default,e=>Pe=e.default,e=>Se=e.OptimusImpressionWrapper,e=>Re=e.default,e=>Me=e.default,e=>Le=e.useOptimusCashbackHotelsUserEducationEnabled,e=>Ae=e.getFunnelKeyByOptimusOffer,e=>Ee=e.usePixelCallback,e=>Be=e.ErrorBoundary,e=>Ke=e.useOnVisible,e=>(Ve=e.useRoomUrgencyMessaging,Fe=e.useBaseRatePricingDisplayVariant),e=>Ue=e.useQuery,e=>ze=e.createRadio,e=>(qe=e.useOptimusLogin,He=e.useOptimusLoginTracking),e=>We=e.useSessionId,e=>(je=e.actions,Ge=e.getStore),e=>$e=e.useUserAgent,e=>Je=e.shallowEquals]]},["1o4yt4","17thqz","1s6q22","skjzuv","fkji80","fgwvq1","wgd5on","hyvyhv","16nmgr","1etaac","1r5lgo","1904jn","1ybxsm","4axon3","bvvaww","1w0dpw","121h32","12mj4n","1eww82","52far5","32pwc7","1vumu0","13e3sm","10ad67","tp1g68","1a37wn","ffcg16","1kkdz8","1l8km3","34bu7w","b08kfg","sw5ax0","jppfwt","1essqv","4vrg0m","gugp1d","zq967r","1xm2jz","1bovo2","ctn2v9","1g6kun","1xqlof","14tv4a","1x9dv9","79a2um","1ys6v1","tr3542","1qkjm8","65rb8q","ltllz9","ddsxom","1l9qeu","eqoaya","1lxsoh","lyyh8d","14ilds","1i0z8n","1yc73m","irqvhn","1bnv3w","1d8min","h1ennw","1emwhd","183pm0","13btuy","wsk8ra","1mqwhq","1bqgab","hlafd3","1al4vi","45ddp0","1nnprh","1t05m6"]]);
