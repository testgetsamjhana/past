(this.$WP=this.$WP||[]).push(["x816bk",(e,t)=>{"use strict";var a,i,s,n,r,o,l,d,c,u,b,p,m,v,h,w,T,g,y,f,I,R,S,x,O,E,H,C,P,F,A,L,U,N,k,q,_,D,V,z,j,B=({selectedTab:e})=>{var t=g();return f(I,{children:D.map((({name:i,module:s,Component:n})=>{var r=e===i;return r||_?f(m,{children:f(w,{onVisible:()=>{r&&(T({module:s,action:"in_view"}),t({itemName:s,itemType:"in_view",team:"Hotels",page:"Hotel_Review"}))},children:e=>f("div",{ref:e,className:v(r?"":"bAYKz"),"data-test-target":`${s}-tab`,children:f(a,{children:f(n,{isSelectedTab:r})})})})},i):null}))})},Q={__key:0x7e353d36bbcc,id:"7e353d36bbcc184a64c4a1e73e0dc771",loc:{},definitions:[]},W=(e,t)=>{var a,i,s,n;if(e||!(t&&t.locations&&t.locations[0]))return{locationName:"",accommodationType:null,awards:{},reviews:{},popIndexProps:{}};var r=t.locations[0],o=r.name,{accommodationType:l,writeUserReviewUrl:d,popIndexDetails:c}=r,u=r.detail||{},b=null==(a=u.hotel)?void 0:a.reviewSubratingAvgs,p=r.reviewSummary||{},m=c?{accommodationCategory:r.accommodationCategory,parentName:null==(i=r.parents)||null==(s=i[0])?void 0:s.name,popIndexRank:c.popIndexRank,popIndexTotal:c.popIndexTotal}:{};return{locationName:o,accommodationType:l,reviews:{reviewSummary:p,reviewSubratingAvgs:b,writeUserReviewUrl:d},awards:{greenLeader:null==(n=u.hotel)?void 0:n.greenLeader,travelersChoice:t.awards&&t.awards[0]?t.awards[0]:null},popIndexProps:m}},K=e=>{var t=P(),a="Hotel_Review"===t.page?t.params.detailId:-1,i=A(),[{data:n,fetching:r}]=S({query:Q,variables:{locationId:a},pause:!a||a<0}),o={...W(r,n),...e},{metaListingDataProps:l}=e,d=s((()=>l?(({listing:e})=>{if(!e||!e.hasOptimusOffers)return null;var t=[...e.chevronOffers||[]];return 1!==t.length?null:t[0].data.isOptimusOffer?t[0]:null})(l):null),[l]),c=F(),u=L(),b=U((()=>{var e;null!=l&&null!=(e=l.listing)&&e.hasOptimusOffers&&N((e=>{u({optimusPropertyText:{pageviewUid:c,funnelKey:e,locationId:a}})}))})),{locationName:p,accommodationType:m,reviews:v,popIndexProps:h,awards:w}=o,T=r||!(!v||!v.reviewSummary.count),g=R(I,{children:[T&&f(x,{loading:r,locationId:a,locationName:p,accommodationType:m,viewport:i,popIndexProps:h,reviewSummary:v.reviewSummary,reviewSubratingAvgs:v.reviewSubratingAvgs,writeUserReviewUrl:v.writeUserReviewUrl}),f("div",{ref:b,children:f(O,{loading:r,locationId:a,viewport:i,travelersChoice:w.travelersChoice,coeAward:null,greenLeader:w.greenLeader,isOptimusProperty:!!d,noBottomPaddings:!0})})]});return e.contentOnly?f("div",{children:g}):f(E,{section:"reviews",theme:e.fullyTabbed?"no-border":"border-top",joinable:!0,children:g})},M=e=>{var{isOptimusEnabled:t}=H();return t?f(C,{optimusEnabled:!0,children:t=>f(K,{metaListingDataProps:t,contentOnly:!!e.contentOnly,fullyTabbed:!!e.fullyTabbed})}):f(K,{metaListingDataProps:null,contentOnly:!!e.contentOnly,fullyTabbed:!!e.fullyTabbed})},$=e=>{var{enabled:t,fullyTabbedVariantEnabled:a}=p();return f(q,{...e,isTabbedTestEnabled:t,isTabbedTestFullyTabbedVariantEnabled:a})};return[()=>{_=h("crawler_or_search_ua"),D=[{name:"Reviews",module:"reviews",Component:y},{name:"Questions",module:"faq",Component:i((()=>t("1033v7")))},{name:"RoomTips",module:"roomtips",Component:i((()=>t("knsthq")))}],V=B,z=M,q=class extends n{constructor(...e){super(...e),this.state={selectedTab:"Reviews",reviewFilterHeight:0},this.setReviewFilterHeight=()=>{if("undefined"!=typeof document){var e=document.getElementById("hrReviewFilters");e&&this.setState({reviewFilterHeight:e.clientHeight})}},this.setSelectedTab=(e,t)=>{e!==this.state.selectedTab?(this.setState({selectedTab:e}),t&&d(c)):t&&d(c)}}componentDidMount(){var e,t;o("hr-community-tab").on("selectTab",this.setSelectedTab),"undefined"!=typeof window&&"#QUESTIONS"===(null==(e=window)||null==(t=e.location)?void 0:t.hash)&&this.setSelectedTab("Questions",!0),this.props.hasExpandedTabs&&this.setReviewFilterHeight()}componentDidUpdate(e,t){this.props.hasExpandedTabs&&("Reviews"===t.selectedTab?"Reviews"!==this.state.selectedTab&&this.setState({reviewFilterHeight:0}):"Reviews"===this.state.selectedTab&&this.setReviewFilterHeight())}render(){var{locationId:e,geoId:t,isTabbedTestEnabled:a,isTabbedTestFullyTabbedVariantEnabled:i}=this.props;return f(b,{locationId:e,children:R(I,{children:[a&&f(z,{fullyTabbed:i}),f(l,{locationId:e,geoId:t,selectedTab:this.state.selectedTab,setSelectedTab:this.setSelectedTab,isTabbedTestEnabled:!!a}),this.props.hasExpandedTabs?R("div",{className:"DWitr",children:[f("div",{className:"uNacK PS",children:f(V,{selectedTab:this.state.selectedTab,hasExpandedTabs:!0})}),f("div",{className:"qHAMO H",style:{paddingTop:this.state.reviewFilterHeight},children:f(k,{size:"300x250|300x600",isSticky:!0})})]}):f(I,{children:f(V,{selectedTab:this.state.selectedTab})}),f(u,{locationId:e,geoId:t,selectedTab:this.state.selectedTab})]})})}},j=r(((e,t)=>(l.stage(e,t),()=>({locationId:e.page.detailId,geoId:e.page.geoId}))))($),e({HotelReviewCommunityContentWrapper:$,ReviewsWithAwards:z,default:j})},[e=>(a=e.Suspense,i=e.lazy,s=e.useMemo,n=e.Component),e=>r=e.bind,e=>o=e.createRadio,e=>(l=e.TabBarAboveHeader,d=e.scrollIntoView,c=e.HEADER_SCROLL_OFFSET,u=e.LowContentCTA),e=>b=e.DraftReviewProvider,e=>p=e.useTabbedLayout,e=>m=e.ErrorBoundary,e=>v=e.default,e=>h=e.featureIsEnabled,e=>w=e.HasBeenVisible,e=>T=e.default,e=>g=e.useHotelImpressionLogger,e=>y=e.default,e=>(f=e.jsx,I=e.Fragment,R=e.jsxs),e=>S=e.useQuery,e=>x=e.Reviews,e=>O=e.Awards,e=>E=e.Section,e=>H=e.useOptimusEnabledForUser,e=>C=e.MetaQueryPoller,e=>(P=e.useRoute,F=e.usePageviewUid),e=>A=e.useViewportCategory,e=>L=e.useImpressionLogger,e=>U=e.useOnVisible,e=>N=e.getFunnelKeyByOptimusOffer,e=>k=e.HotelReviewRailAd]]},["1o4yt4","16z5q2","1bqgab","ll8oko","rm3gfe","wsk8ra","183pm0","fkji80","skjzuv","1w0dpw","4axon3","ctn2v9","yt98fd","121h32","1mqwhq","15dvh1","13ztf5","mjqgle","14tv4a","1nzwvr","fgwvq1","1ys6v1","1vumu0","13btuy","h1ennw","k9d0qe"]]);
