(this.$WP=this.$WP||[]).push(["1iuej8",(e,r)=>{"use strict";var n,t,i,o,a,l,s,u,c,d,m,p,g,h,f,v,k,y,b,w,D,S,R,C,I,T,_,x,N,P,O,B,U,E,A,L,F,j,M,z,q,K,G,H,X,Y,$,W,Z,V,J,Q,ee,re,ne,te,ie,oe,ae,le,se,ue;function ce(e){if(null===e||!0===e||!1===e)return NaN;var r=Number(e);return isNaN(r)?r:r<0?Math.ceil(r):Math.floor(r)}function de(e,r){if(r.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+r.length+" present")}var me=36e5,pe={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ge=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,he=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,fe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ve(e,r){de(1,arguments);var n=r||{},t=null==n.additionalDigits?2:ce(n.additionalDigits);if(2!==t&&1!==t&&0!==t)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i,o=ke(e);if(o.date){var a=ye(o.date,t);i=be(a.restDateString,a.year)}if(isNaN(i)||!i)return new Date(NaN);var l,s=i.getTime(),u=0;if(o.time&&(u=De(o.time),isNaN(u)||null===u))return new Date(NaN);if(!o.timezone){var c=new Date(s+u),d=new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds());return d.setFullYear(c.getUTCFullYear()),d}return l=Re(o.timezone),isNaN(l)?new Date(NaN):new Date(s+u+l)}function ke(e){var r,n={},t=e.split(pe.dateTimeDelimiter);if(t.length>2)return n;if(/:/.test(t[0])?(n.date=null,r=t[0]):(n.date=t[0],r=t[1],pe.timeZoneDelimiter.test(n.date)&&(n.date=e.split(pe.timeZoneDelimiter)[0],r=e.substr(n.date.length,e.length))),r){var i=pe.timezone.exec(r);i?(n.time=r.replace(i[1],""),n.timezone=i[1]):n.time=r}return n}function ye(e,r){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+r)+"})|(\\d{2}|[+-]\\d{"+(2+r)+"})$)"),t=e.match(n);if(!t)return{year:null};var i=t[1]&&parseInt(t[1]),o=t[2]&&parseInt(t[2]);return{year:null==o?i:100*o,restDateString:e.slice((t[1]||t[2]).length)}}function be(e,r){if(null===r)return null;var n=e.match(ge);if(!n)return null;var t=!!n[4],i=we(n[1]),o=we(n[2])-1,a=we(n[3]),l=we(n[4]),s=we(n[5])-1;if(t)return function(e,r,n){return r>=1&&r<=53&&n>=0&&n<=6}(0,l,s)?function(e,r,n){var t=new Date(0);t.setUTCFullYear(e,0,4);var i=7*(r-1)+n+1-(t.getUTCDay()||7);return t.setUTCDate(t.getUTCDate()+i),t}(r,l,s):new Date(NaN);var u=new Date(0);return function(e,r,n){return r>=0&&r<=11&&n>=1&&n<=(Ce[r]||(Ie(e)?29:28))}(r,o,a)&&function(e,r){return r>=1&&r<=(Ie(e)?366:365)}(r,i)?(u.setUTCFullYear(r,o,Math.max(i,a)),u):new Date(NaN)}function we(e){return e?parseInt(e):1}function De(e){var r=e.match(he);if(!r)return null;var n=Se(r[1]),t=Se(r[2]),i=Se(r[3]);return function(e,r,n){return 24===e?0===r&&0===n:n>=0&&n<60&&r>=0&&r<60&&e>=0&&e<25}(n,t,i)?n*me+6e4*t+1e3*i:NaN}function Se(e){return e&&parseFloat(e.replace(",","."))||0}function Re(e){if("Z"===e)return 0;var r=e.match(fe);if(!r)return 0;var n="+"===r[1]?-1:1,t=parseInt(r[2]),i=r[3]&&parseInt(r[3])||0;return function(e,r){return r>=0&&r<=59}(0,i)?n*(t*me+6e4*i):NaN}var Ce=[31,null,31,30,31,30,31,31,30,31,30,31];function Ie(e){return e%400==0||e%4==0&&e%100}var Te=()=>{var{localize:e}=_();return X(S,{padding:"spacing-03",children:[X(S,{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"spacing-04",marginBottom:"spacing-06",children:[Y(x,{variant:"supporting-02",children:e.string("plus_roomlist_skeleton_support")}),Y(H,{})]}),ee,ee,ee,ee]})},_e={__key:7132172628754,id:"067c969db3124ae46dfda233f0b91756",loc:{},definitions:[]},xe=({coBrandingLogoUrl:e,isRoomGridRedesignEnabled:r})=>X("div",{className:s("Hnbqz f k",{TJsdi:r,yNImk:!!e}),children:[Y(S,{display:"flex",className:"yrRAp",children:Y(x,{variant:"title-02",children:Y(T,{id:"hr_ib_offer_select_your_room"})})}),X(S,{display:"flex",flexDirection:"row",alignItems:"center",children:[Y(S,{display:"flex",marginRight:"spacing-02",alignItems:"center",marginBottom:r?"spacing-03":"spacing-00",children:Y(W,{variant:"plus-logo-short",height:e?23:28})}),e&&X(S,{display:"flex",flexDirection:"row",alignItems:"center",children:[Y("div",{className:"Tftqk",children:Y(x,{variant:"supporting-02",marginX:"spacing-01",children:"in partnership with"})}),Y(Z,{src:`https:${e}`,height:30})]})]})]}),Ne=({checkInDate:e,checkOutDate:r,numAdults:n,numChildren:t,numRooms:i,openPicker:o})=>X(S,{paddingX:"spacing-03",paddingTop:"spacing-03",children:[X(S,{display:"flex",justifyContent:"space-between",flexDirection:["column","row-reverse","row-reverse"],paddingX:["spacing-00","spacing-02","spacing-02"],marginBottom:"spacing-04",children:[Y(V,{width:176}),Y(S,{display:"flex",paddingTop:["spacing-03","spacing-00","spacing-00"],children:Y(x,{variant:"title-02",children:Y(T,{id:"hr_ib_offer_select_your_room"})})})]}),X(S,{display:"flex",flexDirection:["column","row","row"],paddingX:["spacing-00","spacing-02","spacing-02"],children:[Y(x,{variant:"body-01",marginRight:"spacing-02",children:Y(T,{id:"hr_ib_offer_best_prices_for"})}),X(S,{display:"flex",flexDirection:"row",children:[Y(z,{checkInDate:e,checkOutDate:r,numberOfRooms:i,numberOfAdults:n,numberOfChildren:t}),Y(O,{marginLeft:"spacing-04",onClick:o,children:Y(T,{id:"hr_ib_offer_edit"})})]})]})]}),Pe=({perks:e,cashbackDisplayAmount:r})=>{var{localize:n}=_(),[i,o]=t(!1);return r||e&&e.length>0?Y(S,{className:"znZCg Ra d",marginTop:"spacing-03",children:X(x,{variant:"title-05",children:[n.string("plus_roomlist_callout_good_upgrade"),"Â ",Y("button",{className:"YkSFV B- Cg _S d",onClick:()=>o(!0),children:Y(J,{})}),i&&Y(Q,{variant:"steps",onClose:()=>o(!1),perks:e,cashbackDisplayAmount:r,showCloseButton:!1})]})}):null},Oe=({optimusPerks:e,variant:r="PARTIAL"})=>{var{localize:n}=_();return X($,{children:[X(S,{display:"flex",flexDirection:"row",alignItems:"flex-start",paddingX:"spacing-04",paddingTop:"spacing-04",children:[Y(x,{variant:"title-02",children:n.string("plus_roomlist_select_your_room")}),Y("div",{className:"HLzBW F2 Wi",children:Y(W,{variant:"plus-logo-short"})})]}),Y(S,{display:"flex",flexDirection:"column",alignItems:"flex-start",paddingX:"spacing-04",children:Y(x,{variant:"supporting-01",marginY:"spacing-02",children:n.string("plus_roomlist_support")})}),"FULL"===r&&Y(S,{paddingX:"spacing-04",children:Y(ie,{perks:e})})]})},Be="plus_red_room_list_on_/hr_v2_1624295048",Ue="room-grid-ready",Ee=()=>Y(re,{}),Ae=(e,r)=>{if(e){var n=e.getBoundingClientRect().top+window.pageYOffset-r;window.scrollTo({top:n,behavior:"smooth"})}},Le=({checkInDate:e,checkOutDate:r,coBrandingLogoUrl:n,hasCashback:t,isIbBranded:i,isRoomGridRedesign:o,numAdults:a,numChildren:l,numRooms:s,openPicker:u,optimusPerks:c})=>i?Y(te,{checkInDate:e,checkOutDate:r,numAdults:a,numChildren:l,numRooms:s,openPicker:u}):t||o?X($,{children:[Y(ne,{coBrandingLogoUrl:n,isRoomGridRedesignEnabled:o}),X(S,{paddingX:"spacing-04",display:"flex",flexDirection:["column","row","row"],children:[Y(x,{variant:"body-01",marginRight:"spacing-02",children:Y(T,{id:"hr_ib_offer_best_prices_for"})}),X(S,{display:"flex",flexDirection:"row",children:[Y(z,{checkInDate:e,checkOutDate:r,numberOfRooms:s,numberOfAdults:a,numberOfChildren:l}),Y(O,{marginLeft:"spacing-04",onClick:u,children:Y(T,{id:"hr_ib_offer_edit"})})]})]})]}):Y(oe,{variant:"FULL",optimusPerks:c}),Fe=({bookingSessionId:e,offerData:r,partnerData:t=[],roomSelectionSummary:i,roomSelectionData:o,bookingAdditionalContext:l,optimusSavings:s,optimusSubscriptionPrice:h,refreshRooms:D,onSelectRoom:S,showPriceMismatchError:R,onPriceMismatchErrorShown:I,parentFunnelKey:T,funnelKey:_,isCashback:x,hasError:N,setFullStoryCustomAttributes:P,logFullStoryEvent:O})=>{var B,U,A,L,F,j,M={...o.polling,...null!=o&&o.trackingContext?{trackingContext:o.trackingContext}:{}},[z,{partnerData:q,roomSelectionData:G},H]=f({...o,polling:M},t,x),W=z?q:t,Z=z?G:o;v(i,D);var V=k(W||[],s,l.originalMetaPrice),{filterBlockedRooms:J}=y(),Q=J(V,i,null==Z||null==(B=Z.partnerInfos[0])||null==(U=B.commerce)?void 0:U.providerId),[ee,re]=n.useState(!1);a((()=>{var e=setTimeout((()=>re(!0)),36e5);return()=>clearTimeout(e)}),[]);var ne=E(),{page:te}=c(),ie=d(),oe=u(),ae=m(),se=C(),{plusRoomGridRedesign:ue,fetching:ce}=K();a((()=>{var e,r={isSubscriber:(null==h?void 0:h.isMember)||!1,isVF:x};P(r);var n={numberOfRooms:Q.length,providerOfOffer:(null==Z||null==(e=Z.partnerInfos[0])?void 0:e.displayName)||"",funnelKey:_||""};O("PlusEvent",n),se&&ne({itemType:"optimusCheckoutStep",itemId:"RoomSelection",itemName:"FULL_STORY",team:"Plus",impressionKey:_||"",pageUid:ie,sessionId:oe,userId:ae,page:te,customData:JSON.stringify(n)})}),[h,x,Q,Z,P,O,_,se,ne,te,oe,ae,ie]);var de=!!H||N,me=l.originalMetaPrice>0,pe=b(W,l),ge=me&&"same"!==pe&&R&&!ee&&!de,he=null==(A=(W||[])[0])?void 0:A.name,fe=Z.partnersOptimusPerks[he||""]||[],ke=null==(L=(W||[])[0])||null==(F=L.hotel)?void 0:F.locationId,ye=null==(j=(W||[])[0])?void 0:j.coBrandingLogoUrl;if(!z||ce)return Y(Ee,{});if(de)return Y(p,{variant:"inline",onClick:()=>{!Q.length||H?(window.location.reload(),window.scrollTo(0,0)):I()}});var be=new Date(ve(Z.summary.checkInDs)),we=new Date(ve(Z.summary.checkOutDs)),De="IB"===(null==r?void 0:r.optimusBranding);return X($,{children:[Y(Le,{checkInDate:be,checkOutDate:we,coBrandingLogoUrl:ye,hasCashback:!(null==s||!s.cashback),isIbBranded:De,isRoomGridRedesign:ue,numRooms:Z.summary.rooms,numAdults:Z.summary.adults,numChildren:Z.summary.totalChildren,openPicker:()=>{le.emit("open")},optimusPerks:fe}),ge&&Y(g,{}),H?null:Y(w,{bookingSessionId:e,rooms:Q||[],flow:"HOTEL",onSelectRoom:S,offerData:r,alwaysStretchShowAllButton:!1,allowCollapse:!0,locationId:ke,parentImpressionKey:T||void 0,isCashback:x,optimusPerks:fe,isRoomGridRedesign:ue})]})},je=({offerData:e,guests:r,locationId:t})=>{var[l,s]=n.useState(0),[p,g]=n.useState(!1),[f,v]=n.useState(null),[k,y]=n.useState(null),[b,w]=n.useState(!1),S=u(),C=m(),T=i(null),{page:_}=c(),x=d(),N=n.useRef(null),O=n.useRef(null),B=P({experimentKeys:[Be]}),[F,j]=n.useState(!1),z=null!==B&&"test"===B[Be],K=E(),G=q(),H=o(((e,r,n)=>{G({itemType:"optimusCheckoutPurchaseError",itemName:e,impressionKey:N.current||"",customData:{flow:"HOTEL",reasonType:n||"Unknown",errorDetail:r}})}),[N,G]),$=o((e=>{var r=e?e.map((({name:e})=>e)).join("|"):"MISSING_DATA",n=e?e.map((({message:e})=>e)).join("|"):"",t=e?e.map((({type:e})=>e)).join("|"):"Unknown";H(r,n,t)}),[H]);a((()=>{(l||p)&&Ae(T.current,96)}),[l,p]),a((()=>(k?(ae.emit(Ue,!1),ae.reply(Ue,(()=>!1))):(ae.emit(Ue,!0),ae.reply(Ue,(()=>!0))),()=>{ae.emit(Ue,!1),ae.reply(Ue,(()=>!1))})),[k,e]),a((()=>{k&&(H(k),w(!0))}),[k,H]),a((()=>{var e=e=>{O.current=e,l&&T.current?Ae(T.current,96):s((e=>e+1))};return ae.on("expand-rooms",e),()=>{ae.off("expand-rooms",e)}}),[l]);var W=e&&e.clickToken||"",Z=()=>{s((e=>e+1))},V=()=>{Z()};a((()=>{W?globalThis.require(["trjs!commerce/offerclick"],(e=>{var r=e.expandToken(W);N.current=r.ik;var n=null;try{var[,t]=(r.url||"").split("?");n=new URLSearchParams(t)}catch(e){return void v(null)}if(n&&l){if(g(!0),1===l){K({itemType:"optimusCheckoutStep",itemId:"RoomSelection",itemName:"ROOMLIST",team:"Plus",impressionKey:N.current||"",pageUid:x,sessionId:S,userId:C,page:_,customData:JSON.stringify({flow:"HOTEL",booking_flow:"allowed"})});var i=new AbortController,o=setTimeout((()=>i.abort()),3e3);n.set("puid",encodeURIComponent(x)),fetch("/StartBooking",{method:"POST",credentials:"same-origin",body:n.toString(),headers:{"content-type":"application/x-www-form-urlencoded"},signal:i.signal}).finally((()=>clearTimeout(o)))}n.delete("puid"),n.delete("src"),n.append("sar","true"),fetch(`/data/1.0/booking/rooms?${n.toString()}`,{method:"GET",credentials:"same-origin",headers:{"Content-Type":"application/json"}}).then((e=>e.ok?e.json():(y("REQUEST_FAILURE"),null))).then(v).finally((()=>g(!1)))}else v(null)})):v(null)}),[C,S,_,l,W,K,x]);var J=M(r),[{data:Q,fetching:ee}]=L({query:_e,variables:{locationId:t||0,numRooms:(null==J?void 0:J.rooms)||0,numAdults:(null==J?void 0:J.adults)||0,numChildren:(null==J?void 0:J.children)||0,providerId:(null==e?void 0:e.provider)||""},pause:!(null!=e&&e.provider&&null!=e&&e.isOptimusOffer&&C&&z)}),re=((e,r)=>{var n;return(!r&&(null==e||null==(n=e.OptimusRoomCatalog_getRooms[0])?void 0:n.rooms)||[]).map((e=>({key:e.key,shortDescription:e.shortDescription,longDescription:e.longDescription,photos:e.photos})))})(Q,ee);return!l&&re.length&&C&&z&&"ALLOWED"===(null==e?void 0:e.optimusBookingFlow)?Y(U,{funnelKey:N.current,children:X(se,{ref:T,children:[Y(oe,{variant:"PARTIAL"}),Y(D,{partialRooms:re,flow:"HOTEL",onSelectShowPrice:()=>s((e=>e+1)),locationId:t||0})]})}):null!=e&&e.isOptimusOffer&&(ee||l)?Y(R,{children:Y(I.Consumer,{children:({setCustomAttributes:r,logEvent:n})=>Y(U,{funnelKey:N.current,children:Y(h,{data:f,loading:p,error:k,children:({bookingData:t,errors:i,loading:o})=>{if(o||ee)return Y(se,{ref:T,children:Y(Ee,{})});var{bookingSessionId:a,partnerData:l,roomSelectionSummary:s,roomSelectionData:u,bookingAdditionalContext:c,optimusSavings:d,optimusSubscriptionPrice:m,isCashback:p}=t||{};return!u||i?Y(A,{onVisible:()=>{ae.emit(Ue,!1),$(i)},children:e=>Y("div",{ref:e})}):Y(se,{ref:T,children:Y(Fe,{bookingSessionId:a,offerData:e,partnerData:l||[],roomSelectionSummary:s,roomSelectionData:u,bookingAdditionalContext:c,optimusSavings:d,optimusSubscriptionPrice:m,refreshRooms:Z,onSelectRoom:V,showPriceMismatchError:!F,onPriceMismatchErrorShown:()=>j(!0),parentFunnelKey:O.current,funnelKey:N.current,isCashback:p,hasError:b,setFullStoryCustomAttributes:r,logFullStoryEvent:n})})}})})})}):null};return[()=>{ee=X(S,{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",children:[Y("div",{className:"EXXqb Wh",children:Y(G,{height:"100%",width:"100%"})}),X("div",{className:"vljsv F2",children:[Y(G,{height:21,width:"50%"}),Y(G,{height:21,width:"80%",marginTop:12}),Y(G,{height:21,width:"65%",marginTop:12})]})]}),re=Te,ne=xe,te=Ne,ie=Pe,oe=Oe,ae=N("optimus/room-list"),le=N("h-drg"),se=l((function({children:e},r){var n=i(null),{enabled:t}=j();return X($,{children:[Y(S,{backgroundColor:"primaryBackground",marginBottom:"spacing-04",ref:r,className:s({"B1 Z BB":t}),children:e}),Y(B,{callback:()=>{n.current&&(n.current.getBoundingClientRect().bottom<0?ae.emit("sticky-top-bar-enable"):ae.emit("sticky-top-bar-disable"))}})]})})),ue=F((e=>{var r;return{guests:(null==(r=e.travelerInfo.hotels)?void 0:r.guests)||""}}))(je),e("default",ue)},[e=>(n=e,t=e.useState,i=e.useRef,o=e.useCallback,a=e.useEffect,l=e.forwardRef),e=>s=e.default,e=>u=e.useSessionId,e=>(c=e.useRoute,d=e.usePageviewUid),e=>m=e.useUserId,e=>(p=e.RoomUnavailableAlert,g=e.PriceMismatchAlert),e=>(h=e.HotelCheckoutParsedDataSupplier,f=e.useRoomSelectionPolling,v=e.useRefreshRooms,k=e.useRoomsWithPatchedSavings,y=e.useBlockedRooms),e=>b=e.usePriceMismatchCheck,e=>(w=e.default,D=e.PartialRoomGrid),e=>S=e.Box,e=>(R=e.PlusFullStoryProvider,C=e.useFullStoryEnabled),e=>I=e.BaseFullStoryContext,e=>(T=e.default,_=e.useLocalize),e=>x=e.default,e=>N=e.createRadio,e=>P=e.default,e=>O=e.BorderlessButton,e=>B=e.default,e=>U=e.FunnelTrackingProvider,e=>E=e.default,e=>A=e.HasBeenVisible,e=>L=e.useQuery,e=>F=e.connect,e=>j=e.useHRExpandedCommerce,e=>M=e.parseGuestInfo,e=>z=e.default,e=>q=e.useOptimusImpression,e=>K=e.useRoomGridRedesignEnabled,e=>G=e.default,e=>H=e.OllieSpinner,e=>(X=e.jsxs,Y=e.jsx,$=e.Fragment),e=>W=e.default,e=>(Z=e.OptimusPartnerLogo,V=e.TripadvisorLogo),e=>J=e.default,e=>Q=e.default]]},["1o4yt4","fkji80","1al4vi","fgwvq1","52far5","sfmsly","vk3cpw","14lbe8","1vmz0v","lyyh8d","79sk7i","4cu0tk","17thqz","1essqv","1bqgab","gugp1d","jppfwt","1w1vb4","1kkqcv","xg719z","1w0dpw","1mqwhq","12mj4n","wsk8ra","1bxkng","1jllno","1yc73m","17g0c7","u59av4","1qndsd","121h32","sw5ax0","1bovo2","zq967r","1bnv3w"]]);
