(this.$WP=this.$WP||[]).push(["uy63ln",(e,i)=>{"use strict";var r,t,a,n,s,l,o,c,d,u,h,v,p,g,m,f,_,w,y,T,b,N,S,R,C,I,E,L,A,x,k,F,O,M,P,D,H,V,z,G,j,q,B,U,$,W,X,Q,Y,Z,J,K,ee,ie,re,te,ae,ne,se,le,oe,ce,de,ue,he,ve,pe,ge,me,fe,_e,we,ye,Te,be,Ne,Se,Re,Ce,Ie,Ee,Le,Ae,xe,ke,Fe,Oe,Me,Pe,De,He,Ve,ze,Ge,je,qe,Be,Ue,$e,We,Xe,Qe,Ye,Ze,Je,Ke,ei,ii,ri,ti,ai,ni,si,li,oi,ci,di,ui,hi,vi,pi,gi,mi,fi,_i,wi,yi,Ti,bi,Ni,Si,Ri,Ci,Ii,Ei,Li,Ai,xi,ki,Fi,Oi,Mi,Pi=({review:e,className:i})=>{var a,s,l,o=(a=e.mgmtResponse,s=e.provider,l=t(),a?s&&s.isLocalProvider?l("MANAGEMENT"):l("MANAGEMENT_PARTNERS"):null);return o?n("div",{className:r("YQSVm S2 i d w",i),children:o}):null},Di=(e,i)=>{if(!e||e.length<=i)return e;if(i<3)return"";var r=e.lastIndexOf(" ",i-3);return r<i/2&&(r=i-3),`${e.substring(0,r)}...`},Hi=()=>(v("hr-community-tab").emit("selectTab","RoomTips",!0),!1),Vi=({tipText:e,isSeeMoreLinkEnabled:i})=>{var{localize:r}=c();return e?s(l,{children:[s("div",{className:"Pb",children:[n("span",{className:"tkWaG b",children:r("room_tip_colon_f4")})," ",n("span",{dangerouslySetInnerHTML:{__html:Di(e||"",100)}})]}),i&&n("div",{className:"taLnk RIvfn Md Nb MC NC",onClick:Hi,children:r("see_more_room_tips_f4")})]}):null},zi=({review:e,isSeeMoreLinkEnabled:i=!0})=>n(Vi,{tipText:e&&e.roomTip,isSeeMoreLinkEnabled:i}),Gi="TnInx",ji="Lvqmo",qi=e=>(e||"").replace(/[&<>"'\n\u0086\u0087]|&#?[0-9a-zA-Z]+;/g,(e=>Pe[e]||e)),Bi=(e,i,r)=>{if(!r)return[e];var t=[];return i.forEach((i=>{(i===e||t.length>0)&&t.push(i)})),t.length>0?t:[e]},Ui=e=>s("div",{className:Gi,"data-test-target":"expand-review",children:[n("span",{className:"Ignyf _S Z",children:e("common_Read_more")}),n(f,{className:ji,name:"caret-down"})]}),$i=e=>s("div",{className:Gi,children:[n("span",{className:"uoxiZ _S Z",children:e("common_Readless")}),n(f,{className:ji,name:"caret-up"})]}),Wi=(e,i,r)=>{var t=e.replace(/\n/g," ");if(t.length<=r)return n("span",{dangerouslySetInnerHTML:{__html:qi(t)}});var a=t.substr(0,r);if(a=a.substr(0,Math.min(a.length,a.lastIndexOf(" "))),!e.includes("")||a.includes("")){var o=i?n("span",{className:"_",children:t.substr(a.length,t.length)}):"";return s(l,{children:[n("span",{dangerouslySetInnerHTML:{__html:qi(a)}}),o]})}var c=t.indexOf(""),d=t.substr(c-r,r),u=Math.max(0,d.indexOf(" "));d=d.substr(u,c-u);var h=i?n("span",{className:"_",children:t.substr(0,t.indexOf(d))}):"";return s(l,{children:["...",h,n("span",{dangerouslySetInnerHTML:{__html:qi(d)}})]})},Xi=e=>{var i,{localize:r}=c(),{location:t,reviewList:a,review:o,expanded:d,reviews:u,children:h,expandReviews:v,alwaysShowReadMore:p,i18nlanguage:f}=e,_=b(),w=o.id,{text:T,language:N,originalLanguage:S,translationType:R}=o,C={};"MACHINE"===R&&S&&(C.lang=`${f}-x-mtfrom-${S}`);var I=u.map((e=>e.id)),E=(null==t?void 0:t.placeType)||"ALL",L=0===(null==a||null==(i=a.page)?void 0:i.offset),A=((e,i)=>"ACCOMMODATION"===i?e?12:8:4)("MOBILE"===_,E),x="ACCOMMODATION"===E?790:280;return s("div",{className:"vTVDc",children:[n(g,{collapsible:!0,alwaysShowReadMore:p,cta:Ui(r),ctaCollapse:$i(r),ctaNewline:!0,initialDivHeight:20*A,collapsed:!d,clickCallback:e=>("CTA"===e||"CONTENT"===e&&!d?(v(Bi(w,I,!0),!0),y({module:"Reviews",action:"click_read_more",context:"expand"})):"CTA_COLLAPSE"===e&&d&&v(Bi(w,I,!1),!1),!1),numLinesToShow:A,children:n("span",{className:"QewHA H4 _a",...C,children:s(m,{contentLanguage:N||"",children:[d?n("span",{dangerouslySetInnerHTML:{__html:qi(T.trim())}}):Wi(T,L,x),!d&&T.length>x&&n(l,{children:"…"})]})})}),h&&h(d)]})},Qi=(e,i,r)=>p(((t,a)=>{var n=(_(t)||{}).expandedReviews||{};return{i18nlanguage:t.i18n.language,alwaysShowReadMore:i,expanded:r?n[a.review.id]||!(a.review.id in n):n[a.review.id],reviews:a.reviewList.reviews||[],children:i=>e.children&&e.children(a,i)}}),{expandReviews:w.expandReviews})(Xi),Yi=({myLang:e,sourceLang:i,locationId:t,geoId:a,reviewId:l,reviewTranslationType:o,showOverlay:d,isReviewText:u,url:h,onClick:v})=>{var{localize:p}=c();if(o||!(e&&i&&t&&a&&l))return null;if(e.substring(0,2)===i.substring(0,2))return null;var g=(e=>/^zh..$/.test(e)?`${e.substring(0,2)}-${e.substring(2)}`:e)(i),m=void 0!==h?h:`/MachineTranslation?g=${a}&d=${t}&r=${l}&page=review&sl=${g}&tl=${e}`,f=`GoogleTranslation_${l}`;return s("div",{className:r("jngyZ",u?"dULAC":null),children:[n(N,{type:"secondary",size:"small",onClick:()=>{v&&v(),d(f)},children:p("mobile_google_translation")}),n(R,{name:f,children:n("div",{className:"Mjrrg",children:n(C,{url:m,responseType:"html",children:({loading:e,data:i})=>e||!i?n(S,{height:"300px",marginTop:"16px"}):n("div",{className:"NAWdx _T _Z o P0",dangerouslySetInnerHTML:{__html:i}})})})})]})},Zi=({review:e})=>e?n(x,{objectEventType:"onFullReview",object:e,actor:e.userProfile||{},isEmbedded:!1}):null,Ji="MtByY _T",Ki=({photos:e,locationId:i,geoId:t,allowMediaViewer:a})=>{var o=e&&e.length-3,c=k(((e,r)=>{a?G("hr_mediaviewer_mas")&&j(i,107,r):((e,i,r,t)=>{globalThis.require(["trjs!actions/openRespPhotoViewer"],(a=>{a.open(e,e.currentTarget,i,r,t,2)}))})(e,i,t,r)}),[i,t,a]),d="";if(!e||0===e.length)return null;if(e)switch(e.length){case 1:d=r(Ji,"PNjsP");break;case 2:d=r(Ji,"wfskf");break;default:d=r(Ji,"PfFfr")}return n("div",{className:"pDrIj f z",children:e&&e.filter((e=>!!e)).slice(0,3).map(((e,i)=>{var r=s(l,{children:[2===i&&o>0&&s("span",{className:"MIzNL",children:["+",o]}),n(z,{sources:e.photoSizes,width:"100%",height:"128px"})]});return n("div",{className:d,onClick:i=>c(i,e.id),children:r},e.id||i)}))})},er=({photos:e,locationId:i,geoId:r,allowMediaViewer:t})=>{var a=(e||[]).filter((e=>!!e&&e.statuses.includes("PUBLISHED"))).slice(0,4);return a&&a.length?n(Ge,{photos:a,locationId:i,geoId:r,allowMediaViewer:t}):null},ir=({review:e,allowMediaViewer:i})=>{var r,t;return n(er,{photos:e.photos,locationId:null==(r=e.location)?void 0:r.locationId,geoId:null==(t=e.location)?void 0:t.parentGeoId,allowMediaViewer:i})},rr=({name:e,url:i})=>n("div",{className:"HzTZP",children:n(o,{id:"attractions_review_of_activity",args:{activityName:n("a",{className:"eyrEy b",href:i,children:e})}})}),tr=({review:e})=>n(rr,{name:e.location.name,url:e.location.url}),ar="diVSr",nr=e=>{var{localize:i}=c(),t=d(),{ownerResponse:a,userProfile:u,username:h,connectionToSubject:v,publishedDate:p,locationName:_,reviewId:w,text:y,language:T,expanded:b,header:N,expandReviews:S,translationType:R,additionalClassName:C,alwaysShowReadMore:I}=e,E=q();if(!y||"MACHINE"===R&&!E)return null;var L=b?y:y.replace(/\n/g," "),A=s("div",{className:r("ajLyr",C),children:[n("div",{className:"LOrZF",children:n(X,{size:"small",alt:""})}),s("div",{children:[s("div",{className:"nNoCN n",children:[h&&v&&i("hsx_management_response_header",{0:h,1:v,2:_}),p&&n("div",{className:"miiHC",title:p,children:U(new Date(p))?i("relative_dates_responded_caps",{0:$(new Date(p),i,t)}):i("absolute_dates_responded_caps",{0:W(new Date(p),t)})})]}),N&&N(b),n(g,{collapsible:!0,cta:s("div",{className:"rMVaK",children:[n("span",{className:"HpbNq _S",children:n(o,{id:"common_Read_more"})}),n(f,{className:ar,name:"caret-down"})]}),ctaCollapse:s(l,{children:[n("span",{className:"ywcNw _S",children:n(o,{id:"common_Readless"})}),n(f,{className:ar,name:"caret-up"})]}),ctaNewline:!0,alwaysShowReadMore:I||!1,collapsed:!b,initialDivHeight:20,clickCallback:e=>("CTA"===e||"CONTENT"===e&&!b?S([w],!0):"CTA_COLLAPSE"===e&&b&&S([w],!1),!1),numLinesToShow:3.25,children:n("span",{className:"MInAm _a",children:n(m,{contentLanguage:T||"",children:n("span",{dangerouslySetInnerHTML:{__html:qi(L)}})})})})]}),n("div",{className:"JrHOP",children:n(Q,{closeOverflowOnScroll:!0,sectionObject:a,sectionActor:u,overrideItems:{FOLLOW:!1,UNTAG:!1},deleteObject:null})})]});return"MACHINE"===R?n(B,{children:A}):A},sr=e=>p(((i,r)=>{var t=r.location||{},a=r.review||{},n={...a.mgmtResponse||{},__typename:"ReviewMgmtResponse"};return{ownerResponse:n,userProfile:a.userProfile||{},reviewId:a.id,username:n.username,connectionToSubject:n.connectionToSubject,publishedDate:n.publishedDate,locationName:t.name,text:n.text,language:n.language,translationType:a.translationType,alwaysShowReadMore:!1,additionalClassName:void 0,header:e.header&&(i=>e.header?e.header(r,i):null),expanded:((_(i)||{}).expandedReviews||{})[a.id]}}),{expandReviews:w.expandReviews})(nr),lr=e=>"SHIP"===e,or=(e,i,r,t)=>{if("SHIP"===r)switch(e){case 0:return t.string("cruise_review_cabin_type",i);case 1:return t.string("cruise_review_type_of_trip",i);case 2:return t.string("cruise_review_destination",i)}return""},cr=(e,i,r)=>{switch(e){case"ACCOMMODATION":return r.string("Date_of_stay",i);case"AIRLINE":case"CAR_RENTAL_OFFICE":return r.string("Date_of_travel",i);case"ACTIVITY":case"ATTRACTION":return r.string("Date_of_experience",i);case"EATERY":return r.string("Date_of_visit",i);case"SHIP":return r.string("cruise_review_sail_date",i)}return""},dr=({rating:e,labels:i,placeType:r})=>s("div",{className:"IkECb f O",children:[n("div",{className:"Hlmiy F1","data-test-target":"review-rating",children:e?n(Y,{rating:e}):null}),(()=>{if(lr(r)||null==i||0===i.length)return null;var e=[];return i.forEach((i=>{e.push(n("div",{className:"dmRSR n R2 S2",children:i}))})),n("div",{className:"tNvbV f Ng",children:e})})()]}),ur=({review:e})=>n(dr,{rating:e.rating,labels:e.labels,placeType:e.location&&e.location.placeType}),hr=({locationInfo:e,index:i,preferredReviewIds:r,review:t,injectHeader:a,renderPhotos:l,renderHeader:o,renderMainCol:d})=>{var{localize:u}=c(),h=((e,i)=>{if(e.accommodationCategory){if("HOTEL"===e.accommodationCategory)return i.string("hotels_favorite");if("COLLAPSED_BB_INN"===e.accommodationCategory)return i.string("Innkeepers_Favorite_Review")}return i.string("Propertys_Favorite_Review")})(e,u);return s(F,{children:[a||null,o(),l(),n(J,{onVisible:()=>{y({module:"Reviews",action:"review_in_view",value:i,context:t.id.toString()})},children:e=>s("div",{ref:e,className:"WAllg _T","data-reviewid":t.id,children:[r&&r[0]===t.id?n(Z,{type:"flat-right",text:h,color:"primary"}):null,d()]})})]},t.id)},vr=({slots:e,queryProps:i,injectHeader:r,index:t})=>n(hr,{locationInfo:i.reviewList&&i.reviewList.locationInfo,index:t,preferredReviewIds:i.reviewList&&i.reviewList.preferredReviewIds,review:i.review,injectHeader:r,renderHeader:()=>e.header?e.header(i):null,renderPhotos:()=>e.photos?e.photos(i):null,renderMainCol:()=>e.mainCol?e.mainCol(i):null},i.review.id),pr=({title:e,i18nlanguage:i,language:r,originalLanguage:t,translationType:a,reviewId:s,url:l})=>{var o={};"MACHINE"===a&&t&&(o.lang=`${i}-x-mtfrom-${t}`);var c,d=ie({module:"Reviews",action:"review_title_click",context:s.toString()});return n("div",{className:"KgQgP MC _S b S6 H5 _a",dir:(c=r,c&&c.match(/^(ar|iw)/i)?"rtl":"ltr"),"data-test-target":"review-title",children:n(K,{target:"_blank",rel:"noopener",onClick:()=>{d()},href:l,className:"Qwuub",children:n("span",{...o,children:n("span",{dangerouslySetInnerHTML:{__html:qi(e||"")}})})})})},gr=({additionalRatings:e,isLoading:i,largeBubbles:t})=>{var{localize:a}=c();return i?n(S,{height:"10px",marginTop:"10px"}):e&&e.length?n("div",{className:"ZzICe Me f",children:e.map((e=>s("div",{className:r("hemdC S2 H2",t?"WWOoy":null),children:[n("span",{className:"Nd",children:n(Y,{rating:e.rating})}),n("span",{dangerouslySetInnerHTML:{__html:a.string(e.ratingLabel)}})]},e.ratingLabel)))}):null},mr=({review:e,location:i})=>n(gr,{isLoading:!1,additionalRatings:e.additionalRatings,largeBubbles:"ACCOMMODATION"===(null==i?void 0:i.placeType)}),fr=({stayDate:e,placeType:i})=>{var{localize:r}=c(),t=d();if(lr(i))return null;if(e){var a={0:"usajM",1:t.formatDate("date_full_month_year",new Date(e))},s=cr(i,a,r);return n("span",{dangerouslySetInnerHTML:{__html:s},className:"teHYY _R Me S4 H3"})}return null},_r=({review:e})=>n(fr,{stayDate:e.tripInfo&&e.tripInfo.stayDate,placeType:e.location&&e.location.placeType}),wr="SFNCM Me S4 H3",yr="wSCXE",Tr=({labels:e,placeType:i})=>{var{localize:r}=c();return null==e||0===e.length?null:n(l,{children:e.map(((e,t)=>n("div",{className:wr,children:n("span",{dangerouslySetInnerHTML:{__html:or(t,{0:yr,1:e},i,r)}})},wr)))})},br=({stayDate:e,placeType:i,labels:r})=>{var t=d(),{localize:a}=c();if(!lr(i))return null;if(e){var l={0:yr,1:t.formatDate("date_full_month_year",new Date(e))},o=cr(i,l,a);return null==r||0===r.length?null:s("div",{className:"SrZBX Me f",children:[n("div",{className:wr,children:n("span",{dangerouslySetInnerHTML:{__html:o}})}),n(Tr,{labels:r,placeType:i})]})}return null},Nr=({review:e})=>n(br,{stayDate:e.tripInfo&&e.tripInfo.stayDate,placeType:e.location&&e.location.placeType,labels:e.labels}),Sr=({isLoading:e,tripType:i})=>{var r,t,{localize:a}=c();if(e)return n(S,{height:"10px",marginTop:"10px"});switch(i){case"BUSINESS":t=1;break;case"COUPLES":t=2;break;case"FAMILY":t=3;break;case"FRIENDS":t=4;break;case"SOLO":t=5;break;default:t=null}if(t){var s=a.string("triptype_desc_sentence_pl",{0:t});r=a.string("trip_type_sentence",{0:s})}return r?n("span",{dangerouslySetInnerHTML:{__html:r},className:"TDKzw _R Me"}):null},Rr=({review:e})=>n(Sr,{tripType:e.tripInfo&&e.tripInfo.tripType,isLoading:!1});function Cr({loggedUserLocationOwner:e}){var i,{localize:r}=c(),t=r.string("hr_review_attribution_reppro_flyout");return i=e?r.string("hr_review_attribution_reppro_v2",{0:"/business/reputationpro",1:""}):r.string("hr_review_attribution_reppro"),s("div",{className:"IIgXd o Md S2",children:[n("span",{onClick:e=>{"A"===e.target.tagName&&y({module:"Reviews",action:"review_reppro_attribution_click"})},className:"lGiOh",dangerouslySetInnerHTML:{__html:i}}),n(te,{above:!0,message:t,onShow:()=>y({module:"Reviews",action:"review_reppro_attribution_flyout_hover"}),children:e=>n("div",{ref:e,className:"VZFco",children:n(f,{name:"information-circle",className:"yJDAk"})})})]})}var Ir=e=>e.string("RCP_attribution_generic_hotel_fffff20a"),Er=({mcid:e,attribution:i,placeType:r})=>{var{localize:t}=c();if(e&&(i||""===i)){var a=((e,i,r)=>i?e.string("RCP_attribution_branded_fffff20a",{0:i}):((e,i)=>{if(i)switch(i){case"ATTRACTION":return e.string("RCP_attribution_generic_attraction_fffff20a");case"EATERY":return e.string("RCP_attribution_generic_restaurant_fffff20a");case"AIRLINE":return e.string("RCP_attribution_generic_airlines");default:return Ir(e)}return Ir(e)})(e,r))(t,i,r);return s("div",{className:"JnvAa o Md S2",children:[a,n(te,{above:!0,message:t("rcp_review_attribution_update"),children:e=>n("div",{ref:e,className:"Zfppk",children:n(f,{name:"information-circle",className:"khoOz"})})})]})}return null},Lr=({checkRepProAttribution:e,review:i,location:r})=>{var t,a=Je.has(i.mcid)&&new Date(i.publishedDate)>Ke;return e&&a?n(Cr,{loggedUserLocationOwner:null==(t=r.currentUserOwnerStatus)?void 0:t.isValid}):n(Er,{attribution:i.attribution,mcid:i.mcid,placeType:null==r?void 0:r.placeType})},Ar=e=>{var{review:i,readonlyMode:r,showOverlay:t,userId:a}=e;return i&&"MACHINE"===i.translationType?(i.mtProviderId||-1)<=0?null:n(ae,{children:n(O,{children:n(ii,{review:i,readonlyMode:r,userId:a,showOverlay:t})})}):null},xr="rating",kr="safety",Fr="travelType",Or="travelTime",Mr="language",Pr="text",Dr="classOfService",Hr="route",Vr="showMT",zr="sortType",Gr="sortBy",jr="connectionsFirst",qr="FAVORABLE_RATING",Br="ML_SORTED",Ur="b",$r=({locationId:e,placeType:i,setSort:r})=>{var{localize:t}=c();return e?n(se,{locationId:e,placeType:i,children:(e,a)=>{if(a||!e||!e.locations||!e.locations[0]||!e.locations[0].name)return null;var l=e.connectionContributions.contributionsByLocation[0],o=l.userReviewContributions[0],c=["",t.string("common_Terrible"),t.string("common_Poor"),t.string("common_Average"),t.string("common_Verygood_fffffabd"),t.string("common_Excellent")],d=o.userDisplayInformation.fullname?o.userDisplayInformation.fullname:o.userDisplayInformation.username,u=l.userReviewContributions.map((e=>e.userDisplayInformation)).filter(((e,i,r)=>i===r.findIndex((i=>i.userId===e.userId)))),h=u.map((e=>({withBorder:!0,size:"small",photo:{photoSizes:[{url:e.avatarUrl,width:100,height:100}]}}))),v=c[o.rating];return n(T,{click:{module:"reviews_social",action:"click_social_header",once:!0},children:s("div",{className:"LhMwG Pd PN Pq PA w f",children:[n("div",{className:"Nd",children:n(ne,{avatarProps:h,maxFaces:7})}),s("div",{children:[n("div",{dangerouslySetInnerHTML:{__html:"AIRLINE"===i?u.length>1?t.string("socialproof_friends_have_flown_with_airline",{name_class:Ur,n_connections_class:Ur,userName:d,numConnections:u.length-1,airlineName:e.locations[0].name||""}):t.string("single_connection_reviewed_airline",{name_class:Ur,userName:d,airlineName:e.locations[0].name||""}):u.length>1?t.string("socialproof_friends_visited_non_geo",{name_class:Ur,n_connections_class:Ur,userName:d,numConnections:u.length-1,POI:e.locations[0].name||""}):t.string("hr_connection_reviewed_single_see_said",{name_class:Ur,userName:d,rating_class:Ur,ratingCategory:v})}}),s("div",{className:"jKzSh _S b",onClick:()=>(e=>{var i=document&&document.getElementById("REVIEWS");i&&i.scrollIntoView(!0),e()})(r),children:[t("socialproof_see_their_activity",{numPeople:u.length}),n(f,{name:"single-chevron-right-circle-fill",className:"ND"})]})]})]})})}}):null},Wr=({children:e})=>n("div",{className:r("aBbCw b S4 H4"),children:e}),Xr={ACCOMMODATION:"Hotels",ACTIVITY:"Experiences",AIRLINE:"Flights",ALL:"Hotels",ATTRACTION:"Experiences",EATERY:"Restaurants",SHIP:"Cruises"},Qr=(e,i)=>{var r=[],t=i.reviewList.filters.text||[],a=i.reviewList.filters.language||[];t.forEach((e=>{"TEXT"===e.axis&&e.selections&&e.selections.forEach((e=>{e&&e.split(" ").forEach((e=>{e&&""!==e&&r.push(e)}))}))}));var n="en"===E(e);return a.forEach((e=>{"LANGUAGE"===e.axis&&e.selections&&e.selections.forEach((e=>{e&&""!==e&&"en"!==e&&(n=!1)}))})),{...i,keywords:n?i.reviewList.keywords:[],query:r.join(" ")}},Yr={setQuery:e=>{var i=(e||"").trim();return""===i?w.changeFilters({[Pr]:[]}):w.changeFilters({[Pr]:[{axis:"TEXT",selections:[i]}]})}},Zr=e=>{var{localize:i}=c();return n(xe,{...e,localize:i})},Jr=e=>s("div",{className:"rXoPE",children:[n(f,{name:"search",className:"GaiSk S7 H6 Vm PQ"}),n(ce,{...e,className:r("abNIJ",e.className)}),e.value&&n("span",{onClick:e.onCTAClick,children:n(f,{name:"times-circle-fill",className:"WlvDg _S"})})]}),Kr=e=>{var i=e.text||[],r=[],t=[];return i.forEach((e=>{"TEXT"===e.axis&&e.selections&&e.selections.forEach((e=>{e&&(t.push(e),e.split(" ").forEach((e=>{e&&""!==e&&r.push(e)})))}))})),r.length<1?[]:[{index:0,param:Pr,value:t.join(","),label:r.join(" "),tracker:""}]},et=(e,i)=>{var r=[],t=i.reviewList.filters.text||[],a=i.reviewList.filters.language||[];t.forEach((e=>{"TEXT"===e.axis&&e.selections&&e.selections.forEach((e=>{e&&e.split(" ").forEach((e=>{e&&""!==e&&r.push(e)}))}))}));var n="en"===E(e);return a.forEach((e=>{"LANGUAGE"===e.axis&&e.selections&&e.selections.forEach((e=>{e&&""!==e&&"en"!==e&&(n=!1)}))})),{...i,keywords:n?i.reviewList.keywords:[],query:r.join(" ")}},it=e=>{var{localize:i}=c();return n(ke,{...e,localize:i})},rt="MOST_RECENT",tt="ML_SORTED",at=e=>e&&e.sortType===Br?tt:rt,nt=({reviewList:e,changePrefs:i})=>{var{localize:r}=c(),[t,a]=D(""),o=k(((e,i)=>{e.stopPropagation(),a((e=>e===i?"":i))}),[a]),d=k((()=>{setTimeout((()=>a("")),100)}),[a]),u=k(((e,i)=>s(l,{children:[e.label,e.tooltipText&&!i&&s(l,{children:[n("span",{onClick:i=>o(i,e.value),children:n(f,{name:"information-circle",className:"AWFnX"})}),t===e.value&&n("div",{className:"GyFaf S2 H1 _X",children:e.tooltipText})]})]})),[o,t]),h=H((()=>hi.map((e=>i=>u(e,i)))),[u]),v=at(null==e?void 0:e.prefs),p=hi.findIndex((e=>e.value===v));return s(l,{children:[r("airm_sortBy"),n("span",{className:"SVsAL d",children:n(de,{options:h,selectedIndex:p,onSelect:e=>{var r=hi[e].value;i(vi[r])},onClose:d,open:!1,size:"large",allowOptionWrapping:!0,hideSelection:!0,beneathPersistentTripSearch:!0,openBelow:!0})})]})},st=({reviewList:e,changePrefs:i})=>{var[r,t]=D(""),a=k(((e,i)=>{e.stopPropagation(),t((e=>e===i?"":i))}),[t]),o=at(null==e?void 0:e.prefs);return n("div",{className:"oGwHH",children:hi.map((e=>s("div",{className:"tXAlg Cj "+(o===e.value?"JzMvy":""),children:[n(ue,{name:"reviewsortoption",value:e.value,selected:o===e.value,onSelect:()=>(e=>{i(vi[e])})(e.value),children:n("span",{className:"QbdgX b",children:e.label})}),e.tooltipText&&s(l,{children:[n("span",{onClick:i=>a(i,e.value),children:n(f,{name:"information-circle",className:"XUFpV"})}),r===e.value&&n("div",{className:"ahuSd _X",children:e.tooltipText})]})]},e.value)))})},lt=["fr-FR"];function ot(){var{localize:e}=c();return s("div",{className:"NudNn",children:[e("Disclaimer_Reviews_Control_Hamon_FR")," ",s("a",{href:"/pages/service.html",children:[e("hotel_info_about_service")," "]})]})}function ct(){var e=u(),{localize:i}=c();return lt.includes(e)?s("div",{className:"drhQP S4 Hn n d",children:[n("div",{className:"d",children:n(he,{below:!0,alignEdge:"left",closeButton:!1,contents:()=>n(ot,{}),children:(e,i)=>n("div",{ref:e,onClick:i,className:"fnBAj _S d",children:n(f,{name:"question-circle"})})})}),i("CTA_Review_Control_Hamon_FR")]}):null}var dt="LojWi w S4",ut="jRZDE Vm _S",ht="XpoVm",vt=({reviewList:e,selectedSort:i,displayType:t,placeType:a,updateSort:l})=>{var{localize:o}=c(),d=(e=>({"":e.string("reviews_all_reviewers"),[jr]:e.string("ppl_you_know")}))(o);return e&&e.locationInfo&&e.locationInfo.locationId?n(se,{locationId:e.locationInfo.locationId,placeType:a,children:(e,a)=>{if(a||!e)return null;for(var c=[],u=[],h=Object.keys(d),v=h.includes(i)?i:"",p=function(e){c.push(s("li",{className:r("ui_radio",ht),children:[n("input",{id:`ReviewedByRadio_${e}`,type:"radio",value:h[e],checked:h[e]===v,onChange:()=>{l(h[e]),y({module:"Reviews_Controls",action:"click_social",context:"people_you_know",value:h[e]===jr?1:0})}}),n("label",{htmlFor:`ReviewedByRadio_${e}`,className:ut,children:d[h[e]]})]},e)),h[e]===v&&""!==h[e]&&u.push({id:String(e),value:d[h[e]],active:!0})},g=0;g<h.length;++g)p(g);return"dropdown"===t?n(fe,{category:"reviews",textTitle:o.string("reviewed_by_title"),itemsActive:u,itemsVisible:n("ul",{className:dt,children:c})}):s("div",{children:[n(li,{children:o("reviewed_by_title")}),n("ul",{className:dt,children:c})]})}}):null},pt="ReviewList_Filters",gt=(e,i,r,t)=>"ReviewRatingFilter"===e.name?n(pe,{mobile:{width:12},width:5,children:n(e.content,{reviewList:i,reviewAggregations:r,placeType:t})},e.name):"LanguageFilter"===e.name&&t?n(pe,{mobile:{shown:!1},tablet:{shown:!0,width:e.tabletWidth},children:n(e.content,{reviewList:i,placeType:t,reviewAggregations:r})},e.name):"HealthAndSafetyFilter"===e.name?n(pe,{mobile:{width:12},width:e.tabletWidth,children:n(e.content,{reviewList:i,reviewAggregations:r,placeType:t})},e.name):n(pe,{mobile:{shown:!1},tablet:{shown:!0,width:e.tabletWidth},children:n(e.content,{reviewList:i,placeType:t})},e.name),mt=(e,i,r,t)=>e.length>4?s(l,{children:[n(ve,{children:e.slice(0,4).map((e=>gt(e,i,r,t)))}),n(ve,{children:e.slice(4,e.length).map((e=>gt(e,i,r,t)))})]}):n(ve,{children:e.map((e=>gt(e,i,r,t)))}),ft=({reviewList:e,reviewAggregations:i,showOverlay:r,changeFilters:t,filters:a,placeType:o})=>{var{localize:d}=c();return s("div",{className:"xuMDM",children:[mt(a,e,i,o),s("div",{className:"oJflF f z",children:[n("div",{className:"XtOaI z",children:n(mi,{reviewList:e,placeType:o})}),s("div",{className:"vILgl z",children:[s("div",{className:"UXuGN q _e _h is-hidden-tablet",children:[n("div",{className:"cSCaS S4 H3 b",children:d("hs_selected_filters")}),n(ge,{actions:[{label:d.string("filter_ffffe84e"),chevron:!0,onClick:r,tracker:""}],selections:[...[].concat(...a.map((i=>i.computeFilterSettings(e.filters,d)))),...Kr(e.filters)],onClearSelection:(i,r)=>((e,i,r,t)=>{var a=e[r];if(a){var n={[t]:!0};t.split(",").forEach((e=>{n[e]=!0})),i({[r]:a.map((e=>({...e,selections:(e.selections||[]).filter((e=>!n[e]))}))).filter((e=>e.selections.length>0))})}})(e.filters,t,i,r)})]}),n(oi,{reviewList:e,placeType:o})]})]}),n(me,{name:pt,slideFrom:"right",bodyContentClass:"Xcsaz",header:s(l,{children:[n("div",{className:"nbpyD c S4 H3 b",children:d("filter_reviews")}),n("div",{className:"ENdvC c S4 H3 b",children:d("num_results_plural",{0:e.totalCount||0})})]}),children:()=>n(l,{children:a.map((r=>((e,i,r,t)=>(e.name,n("div",{className:"UAJMm Z",children:n(e.content,{displayType:"dropdown",reviewList:i,placeType:t,reviewAggregations:r})},e.name)))(r,e,i,o)))})})]})},_t=({locationId:e})=>{var i,{localize:t}=c(),a=Ce(e,67394),l=ie({module:"bacta_hotelreview",action:"favreview_button_click",value:67394,location:e,context:"Hotels_WEB_BA_Prospect_Oct22_BAOwnerCTAsTest_0_0"});return s("div",{ref:(i=re(),Se((()=>{var r;r=e.toString(),i({module:"bacta_hotelreview",action:"favreview_in_view",context:r})}))),className:r("gjtot Gi Ra MI f Pk PZ Px PL"),children:[s("div",{className:"exbxq",children:[n(be,{variant:"supporting-03",children:t.string("BA_Business_Advantage_Name")}),n(be,{variant:"title-01",children:t.string("b2b_cta_review_title")})]}),s("div",{className:"znPnV",children:[n(be,{variant:"body-01",children:t.string("b2b_cta_review_desc")}),n(Ne,{href:a,theme:"inline",onClick:l,children:n(be,{variant:"button-02",marginTop:"spacing-03",marginRight:"spacing-03",children:t.string("b2b_cta_link")})})]})]})},wt=({showMT:e,mtOn:i,mtOff:r})=>{var{localize:t}=c();return s("div",{className:"lsSWK H3 P4",children:[n("span",{className:"IYwrC",children:t("machine_translated_review_display_toggle")})," ",s("div",{className:"ui_radio",children:[n("input",{type:"radio",id:"autoTranslateYes",value:"true",checked:e,onChange:i}),n("label",{htmlFor:"autoTranslateYes",children:t("common_Yes")})]}),s("div",{className:"ui_radio",children:[n("input",{type:"radio",id:"autoTranslateNo",value:"false",checked:!e,onChange:r}),n("label",{htmlFor:"autoTranslateNo",children:t("common_No")})]}),n(te,{above:!0,alignEdge:"right",message:t("machine_translated_google_disclaimer"),children:e=>n("span",{ref:e,className:"ui_icon information-circle kLIjR _m"})})]})},yt=({reviewList:e,renderReview:i,clearFilters:r,listQueryProps:t,allowExpansion:a,expanded:s})=>{var l,o,{localize:d}=c(),{reviews:u}=e,{fetching:h,displayOwnerCtaLink:v}=Re((null==t||null==(l=t.location)?void 0:l.locationId)||0);if(!u)return n(we,{numSections:5});var p=-1;if(u.length>0)for(var g=0;g<u.length;++g)if("MACHINE"===u[g].translationType||"MACHINE_SOURCE"===u[g].translationType){p=u[g].id;break}if(u.length<1)return n("div",{className:"SFQus",onClick:r,children:n(_e,{variant:"warning",label:d("no_results_found"),children:n("span",{dangerouslySetInnerHTML:{__html:d.string("p13n_reviews_no_results_with_query_and_filters_2")}})})});var m=i=>i.id===p?n(wi,{reviewList:e}):null,f=u.map(((e,r)=>i?i({queryProps:{...t,review:e},injectHeader:m(e),index:r,hidden:a&&!s&&r>=5}):null));return!h&&v&&0===(null==(o=e.page)?void 0:o.offset)&&f.splice(1,0,n(_i,{locationId:t.location.locationId},"reviewWidget")),f},Tt=e=>{var{root:i,location:r,reviewList:t,reviewAggregations:a,renderHeader:o,renderReviewFilters:c,renderReview:d,renderListFooter:h,clearFilters:v,changePage:p}=e,g={root:i,location:r,reviewList:t,reviewAggregations:a},m=(null==r?void 0:r.placeType)||"ACCOMMODATION",{page:f,path:_}=Te(),w="en-US"===u()&&"Hotel_Review"===f?10:5,[y,T]=D(!1);return n(le,{children:e=>s(l,{children:[o?o(g):null,t.hasReviews||t.isLoading?s(l,{children:[c?c({reviewList:t,reviewAggregations:a,placeType:m}):null,n(yt,{reviewList:t,renderReview:d,clearFilters:v,listQueryProps:g,allowExpansion:!1,expanded:y})]}):null,h?h({location:r,reviewList:t,reviewAggregations:a}):null,(t.totalCount&&t.totalCount,null),t.totalCount&&t.totalCount>w&&t.page?n(ye,{total:t.totalCount,limit:t.page.limit,offset:t.page.offset,module:"Reviews",onClick:(i,t)=>{p(i),e({actionName:"REVIEW_NAV",businessUnit:Xr[(null==r?void 0:r.placeType)||"ALL"],elementType:i.buttonType,itemAttributes:{page_number:i.pageNumber,offset:i.offset,limit:i.limit}}),t.preventDefault()},url:e=>{var i;return L((null==t||null==(i=t.locationInfo)?void 0:i.url)||_,e.offset)}}):null]})})},bt=e=>p(((i,r)=>({...r,renderHeader:e.reviewListHeader,renderReview:e.review,renderReviewFilters:e.reviewFilters,renderListFooter:e.listFooter})),{changePage:w.changePage,clearFilters:w.clearFilters})(Tt),Nt={__key:6520909908055,id:"05ee4484c857bedd3a8bb64a1642744c",loc:{},definitions:[]},St=[0,0,0,0,0],Rt=e=>!G("hotel_review_is_thin_content")&&e?[{axis:"LANGUAGE",selections:[e]}]:[],Ct=e=>`locationReviewFilters_${e}`,It=e=>`locationReviewPrefs_${e}`,Et=(e,i,r,t)=>a=>{var s=void 0!==a.numReviews?a.numReviews:r;return n(Ni,{queryNode:e,renderList:i,pageSize:s,defaultShowMlSortedReviews:!0===a.defaultShowMlSortedReviews,ignoreFilters:t})},Lt=e=>[e.string("common_Terrible"),e.string("common_Poor"),e.string("common_Average"),e.string("common_VeryGood"),e.string("common_Excellent")],At=(e,i)=>{var r=e.rating||[],t={},a=[],n=Lt(i);r.forEach((e=>{"RATING"===e.axis&&e.selections&&e.selections.forEach((e=>{t[e]=!0}))}));for(var s=5;s>=1;--s)t[s]&&a.push({index:0,param:xr,value:String(s),label:n[s-1],tracker:""});return a},xt=({reviewList:e,reviewAggregations:i,displayType:t,changeFilters:a,clearFilters:o,prefilterRating:u,placeType:h})=>{var v=d(),{localize:p}=c(),{ratingCounts:g}=i,m=g.reduce(((e,i)=>e+i),0),f=[],_=[],w={},T=Lt(p),b=e.filters.rating||[],[N,S]=D(!1);b.forEach((e=>{"RATING"===e.axis&&e.selections&&e.selections.forEach((e=>{w[e]=!0}))}));var R=(e,i)=>{var r=String(e);w[r]=!w[r];var t=Object.keys(w).filter((e=>w[e])).sort();t.length?a({[xr]:[{axis:"RATING",selections:t}]}):a({[xr]:[]}),y({module:"Reviews_Controls",action:"click_ta_rating",context:r,value:w[r]?1:0}),i&&i({businessUnit:Xr[h],elementType:r,actionName:"REVIEW_FILTER_TA_RATING",itemAttributes:{filter_value:w[r]?1:0}})};V((()=>{!N&&u&&(o(),R(u),S(!0))}),[]);for(var C=function(e){var i=0;m>0&&(i=100*g[e-1]/m),f.push(n(le,{children:t=>s("li",{className:r("ui_checkbox",ht,{iLXuy:0===g[e-1]}),children:[n("input",{id:`ReviewRatingFilter_${e}`,type:"checkbox",value:e,checked:!!w[String(e)],onChange:()=>R(e,t),disabled:0===g[e-1]}),n("label",{htmlFor:`ReviewRatingFilter_${e}`,className:"jRZDE Vm _S cmbUQ",children:T[e-1]}),n("span",{className:"cttET w",onClick:()=>0===g[e-1]||R(e,t),children:n("span",{className:"SbGYk _T w R2 _S",children:n("span",{className:"TmJIB R2",style:{width:`${i}%`}})})}),n("span",{className:"NLuQa",children:v.formatNumber("integer",g[e-1])})]},e)},e)),w[String(e)]&&_.push({id:String(e),value:T[e-1],active:!0})},I=5;I>=1;--I)C(I);return"dropdown"===t?n(fe,{category:"reviews",textTitle:p.string("common_Travelerrating"),itemsActive:_,itemsVisible:n("ul",{className:dt,children:f})}):s(l,{children:[n(li,{children:p("common_Travelerrating")}),n("ul",{className:dt,children:f})]})},kt=["Family","Couples","Solo","Business","Friends"],Ft=e=>[e.string("favorite_review_travelertype_families"),e.string("favorite_review_travelertype_couples"),e.string("favorite_review_travelertype_solo"),e.string("favorite_review_travelertype_business"),e.string("favorite_review_travelertype_friends")],Ot=(e,i)=>{var r=e.travelType||[],t={},a=[],n=Ft(i);r.forEach((e=>{"SEGMENT"===e.axis&&e.selections&&e.selections.forEach((e=>{t[e]=!0}))}));for(var s=0;s<kt.length;++s)t[kt[s]]&&a.push({index:0,param:Fr,value:kt[s],label:n[s],tracker:""});return a},Mt=({filter:e,displayType:i,changeFilters:t,placeType:a})=>{var{localize:o}=c(),d=[],u=[],h={},v=Ft(o);e.forEach((e=>{"SEGMENT"===e.axis&&e.selections&&e.selections.forEach((e=>{h[e]=!0}))}));for(var p=function(e){d.push(n(le,{children:i=>s("li",{className:r("ui_checkbox",ht),children:[n("input",{id:`TravelTypeFilter_${e}`,type:"checkbox",value:kt[e],checked:!!h[kt[e]],onChange:()=>((e,i)=>{h[e]=!h[e];var r=Object.keys(h).filter((e=>h[e])).sort();r.length?t({[Fr]:[{axis:"SEGMENT",selections:r}]}):t({[Fr]:[]}),y({module:"Reviews_Controls",action:"click_traveler_filter",context:e,value:h[e]?1:0}),i({businessUnit:Xr[a],elementType:e,actionName:"REVIEW_FILTER_TRAVEL_TYPE",itemAttributes:{filter_value:h[e]?1:0}})})(kt[e],i)}),n("label",{htmlFor:`TravelTypeFilter_${e}`,className:ut,children:v[e]})]},e)},e)),h[kt[e]]&&u.push({id:String(e),value:v[e],active:!0})},g=0;g<kt.length;++g)p(g);return"dropdown"===i?n(fe,{category:"reviews",textTitle:o.string("traveler_type"),itemsActive:u,itemsVisible:n("ul",{className:dt,children:d})}):s(l,{children:[n(li,{children:o("traveler_type")}),n("ul",{className:dt,children:d})]})},Pt=[[3,4,5],[6,7,8],[9,10,11],[12,1,2]],Dt=e=>[e.string("season_mar_may_1cb3"),e.string("season_jun_aug_1cb3"),e.string("season_sep_nov_1cb3"),e.string("season_dec_feb_1cb3")],Ht=(e,i)=>{var r=e.travelTime||[],t={},a=[],n=Dt(i);r.forEach((e=>{"MONTH"===e.axis&&e.selections&&e.selections.forEach((e=>{t[e]=!0}))}));for(var s=function(){var e=!1;Pt[l].forEach((i=>{e=e||t[String(i)]})),e&&a.push({index:0,param:Or,value:Pt[l].join(","),label:n[l],tracker:""})},l=0;l<Pt.length;++l)s();return a},Vt=({filter:e,displayType:i,changeFilters:t,placeType:a})=>{var{localize:o}=c(),d=[],u=[],h={},v=Dt(o);e.forEach((e=>{"MONTH"===e.axis&&e.selections&&e.selections.forEach((e=>{h[e]=!0}))}));for(var p=function(e){var i=!1;Pt[e].forEach((e=>{i=i||h[String(e)]})),d.push(n(le,{children:l=>s("li",{className:r("ui_checkbox",ht),children:[n("input",{id:`TravelTimeFilter_${e}`,type:"checkbox",value:e,checked:!!i,onChange:()=>((e,i)=>{var r=!1;Pt[e].forEach((e=>{r=r||h[String(e)]})),r=!r,Pt[e].forEach((e=>{h[String(e)]=r}));var n=Object.keys(h).filter((e=>h[e])).sort();n.length?t({[Or]:[{axis:"MONTH",selections:n}]}):t({[Or]:[]}),y({module:"Reviews_Controls",action:"click_season",context:Pt[e].join(),value:r?1:0}),i({businessUnit:Xr[a],elementType:Pt[e].join(),actionName:"REVIEW_FILTER_TRAVEL_TIME",itemAttributes:{filter_value:r?1:0}})})(e,l)}),n("label",{htmlFor:`TravelTimeFilter_${e}`,className:ut,children:v[e]})]},e)},e)),i&&u.push({id:String(e),value:v[e],active:!0})},g=0;g<Pt.length;++g)p(g);return"dropdown"===i?n(fe,{category:"reviews",textTitle:o.string("p13n_time_of_year"),itemsActive:u,itemsVisible:n("ul",{className:dt,children:d})}):s(l,{children:[n(li,{children:o("p13n_time_of_year")}),n("ul",{className:dt,children:d})]})},zt=(e,i)=>("ATTRACTION"===i||"ACTIVITY"===i)&&""===e,Gt=null,jt=e=>Gt=Gt||{...A(e),"":e.string("common_alllangs_3dd")},qt="ReviewList_Languages",Bt=(e,i)=>{var r=e.language||[],t=[],a=jt(i);return r.forEach((e=>{"LANGUAGE"===e.axis&&e.selections&&e.selections.forEach((e=>{a[e]&&t.push({index:0,param:Mr,value:e,label:a[e],tracker:""})}))})),t},Ut=({reviewList:e,reviewAggregations:i,displayType:t,myLang:a,showOverlay:o,hideOverlay:u,changeFilters:h,clearFilters:v,prefilterLang:p,placeType:g})=>{var{localize:m}=c(),f=d(),_=[],w=[],T={},b=e.filters.language||[],N=jt(m),[S,C]=D(!1),I={...i.languageCounts||{}};b.forEach((e=>{"LANGUAGE"===e.axis&&e.selections&&e.selections.forEach((e=>{I[e]=I[e]||0,T[e]=!0}))})),a&&N[a]&&(I[a]=I[a]||0);for(var E=Object.keys(I).filter((e=>N[e]&&!(!I[e]&&!T[e]&&""!==e&&e!==a))).sort(((e,i)=>I[i]-I[e]||e.localeCompare(i))),L=-1,A=0;A<E.length;++A)if(T[E[A]]&&(S||!p)||!S&&p&&E[A]===p){L=A;break}var x=E.length;if("dropdown"!==t&&x>5&&(x=4,L>=4)){var k=E[L];E.splice(L,1),L=3,E.splice(L,0,k)}var O=L>0?E[L]:"",M=(e,i,r)=>{h(e&&""!==e?{[Mr]:[{axis:"LANGUAGE",selections:[e]}]}:{[Mr]:[]},i),y({module:"Reviews_Controls",action:"click_language",context:e}),r&&r({businessUnit:Xr[g],elementType:e,actionName:"REVIEW_FILTER_LANGUAGE"}),u()};V((()=>{!S&&p?(v(),M(p,!1),C(!0)):O!==a&&M(a,!1)}),[]);for(var P=function(e){_.push(n(le,{children:i=>s("li",{className:r("ui_radio",ht),children:[n("input",{id:`LanguageFilter_${e}`,type:"radio",value:E[e],checked:E[e]===O,onChange:()=>M(E[e],!0,i)}),s("label",{htmlFor:`LanguageFilter_${e}`,className:"Qukvo Vm _S",children:[n("span",{className:"ZmySZ q",children:N[E[e]]}),!zt(E[e],g)&&s("span",{className:"POjZy",children:["(",f.formatNumber("integer",I[E[e]]||0),")"]})]})]},e)},e)),E[e]===O&&""!==E[e]&&w.push({id:String(e),value:N[E[e]],active:!0})},H=0;H<x;++H)P(H);if("dropdown"===t)return n(fe,{category:"reviews",textTitle:m.string("OwnerResponse_filter_languages_1"),itemsActive:w,itemsVisible:n("ul",{className:dt,children:_})});var z=null;if(E.length>x){for(var G=[],j=function(e){G.push(n(le,{children:i=>s("li",{className:r("ui_radio",ht),children:[n("input",{id:`LanguageFilter_${e}`,type:"radio",value:E[e],checked:E[e]===O,onChange:()=>M(E[e],!0,i)}),s("label",{htmlFor:`LanguageFilter_${e}`,className:ut,children:[N[E[e]]," ",!zt(E[e],g)&&s("span",{className:"POjZy",children:["(",f.formatNumber("integer",I[E[e]]||0),")"]})]})]},e)},e))},q=0;q<E.length;++q)j(q);z=s(F,{children:[n(R,{name:qt,children:n("ul",{className:dt,children:G})}),n("div",{onClick:o,className:"EfbKZ b _S",children:n("span",{className:"text",children:m("common_more_capital_ffffe27f")})})]},"moreLink")}return s(l,{children:[n(li,{children:m("OwnerResponse_filter_languages_1")}),s("ul",{className:dt,children:[_,z]})]})},$t=["BASIC_ECONOMY","ECONOMY","PREMIUM_ECONOMY","BUSINESS","FIRST"],Wt=["BasicEconomy","Economy","PremiumEconomy","Business","First"],Xt=[8729017,8729019,8729020,8729060,8729213,8729086,8729099,8729157,8700105,8729177];function Qt(e){var i=[];return i.push(e.string("flights_airline_reviews_basic_economy")),i.push(e.string("airm_economy")),i.push(e.string("airm_premiumEconomy")),i.push(e.string("airm_businessClass")),i.push(e.string("airm_firstClass")),i}var Yt=(e,i)=>{var r=e.classOfService||[],t={},a=[],n=Qt(i);r.forEach((e=>{"CLASS_OF_SERVICE"===e.axis&&e.selections&&e.selections.forEach((e=>{t[e]=!0}))}));for(var s=0;s<$t.length;++s)t[$t[s]]&&a.push({index:0,param:Dr,value:$t[s],label:n[s],tracker:""});return a},Zt=({filter:e,displayType:i,changeFilters:t,reviewList:a})=>{var{localize:o}=c(),d=[],u=[],h={},v=a&&a.locationInfo&&Xt.includes(a.locationInfo.locationId),p=Qt(o);e.forEach((e=>{"CLASS_OF_SERVICE"===e.axis&&e.selections&&e.selections.forEach((e=>{h[e]=!0}))}));for(var g=e=>!a.classOfServiceCounts||a.classOfServiceCounts[Wt[e]]&&a.classOfServiceCounts[Wt[e]]>0,m=function(e){d.push(s("li",{className:r("ui_checkbox",ht,{HwZOB:!g(e)}),children:[n("input",{id:`ClassOfServiceFilter_${e}`,type:"checkbox",value:$t[e],checked:!!h[$t[e]],onChange:()=>(e=>{h[e]=!h[e];var i=Object.keys(h).filter((e=>h[e])).sort();i.length?t({[Dr]:[{axis:"CLASS_OF_SERVICE",selections:i}]}):t({[Dr]:[]}),y({module:"Reviews_Controls",action:"click_class_of_service_filter",context:e,value:h[e]?1:0})})($t[e]),disabled:!g(e)}),n("label",{htmlFor:`ClassOfServiceFilter_${e}`,className:ut,children:p[e]})]},e)),h[$t[e]]&&u.push({id:String(e),value:p[e],active:!0})},f=v?0:1;f<$t.length;++f)m(f);return"dropdown"===i?n(fe,{category:"reviews",textTitle:o.string("airm_cabin"),itemsActive:u,itemsVisible:n("ul",{className:dt,children:d})}):s(l,{children:[n(li,{children:o("airm_cabin")}),n("ul",{className:dt,children:d})]})},Jt=["True"],Kt=(e,i)=>{var r=e.safety||[],t={},a=[],n=(e=>[e.string("hs_safety_filter_removable")])(i);r.forEach((e=>{"ALERT_STATUS"===e.axis&&e.selections&&e.selections.forEach((e=>{t[e]=!0}))}));for(var s=0;s<Jt.length;++s)t[Jt[s]]&&a.push({index:0,param:kr,value:Jt[s],label:n[s],tracker:""});return a},ea=({reviewAggregations:e,filter:i,displayType:t,changeFilters:a})=>{var{localize:o}=c(),[d,u]=D(0);if((null==e||!e.alertStatusCount)&&0===d)return null;var h=[],v=[],p={};null!=e&&e.alertStatusCount&&d!==(null==e?void 0:e.alertStatusCount)&&u(e.alertStatusCount);var g=((e,i)=>[i.string("hs_safety_filter",{0:e})])(d,o);i.forEach((e=>{"ALERT_STATUS"===e.axis&&e.selections&&e.selections.forEach((e=>{p[e]=!0}))}));for(var m=function(e){h.push(s("li",{className:r("ui_checkbox",ht),children:[n("input",{id:`HealthAndSafetyFilter_${e}`,type:"checkbox",value:Jt[e],checked:!!p[Jt[e]],onChange:()=>(e=>{p[e]=!p[e];var i=Object.keys(p).filter((e=>p[e])).sort();i.length?a({[kr]:[{axis:"ALERT_STATUS",selections:i}]}):a({[kr]:[]}),y({module:"Reviews_Controls",action:"click_safety_filter",context:e,value:p[e]?1:0})})(Jt[e])}),n("label",{htmlFor:`HealthAndSafetyFilter_${e}`,className:ut,children:g[e]})]},e)),p[Jt[e]]&&v.push({id:String(e),value:g[e],active:!0})},_=0;_<Jt.length;++_)m(_);return"dropdown"===t?n(fe,{category:"reviews",textTitle:o.string("hs_traveler_safety_title"),itemsActive:v,itemsVisible:n("ul",{className:dt,children:h})}):s(l,{children:[s("div",{className:"f",children:[n(li,{children:o("hs_traveler_safety_title")}),n(te,{below:!0,message:o("hs_safety_tooltip"),maxWidth:222,alignEdge:"left",shiftX:-50,shiftArrow:-8,toggleOnTouch:!0,children:e=>n("span",{ref:e,className:"f u PB",children:n(f,{name:"information-circle",className:"IYoaF"})})})]}),n(T,{visible:{module:"Reviews_Controls",action:"impression_safety_filter",once:!0},children:n("ul",{className:dt,children:h})})]})},ia=e=>e.message&&e.hasSensitiveIssuesBadge?n(ae,{children:n(O,{children:n(Ai,{...e})})}):null,ra=e=>{var[{data:i}]=Le({query:ta,variables:{hotelId:e.locationId}}),r=h();if(!i||!i.HPS_getWebHRComponents)return null;var t=i.HPS_getWebHRComponents.locationAlert,a=i.HPS_getWebHRComponents.location;if(!(t&&a&&t.message&&t.hasSensitiveIssuesBadge&&t.ownerResponse))return null;var s={message:t.message,hasSensitiveIssuesBadge:t.hasSensitiveIssuesBadge,responseDate:t.ownerResponse.responseDate,ownerName:t.ownerResponse.ownerName,ownerRole:t.ownerResponse.ownerRole,ownerPropertyName:a.name,ownerResponseText:t.ownerResponse.ownerResponseText,shouldTranslateResponse:G("translate_ta_message_sensitive_issues_badge"),targetLanguage:r};return n(ae,{children:n(O,{children:n(ki,{...s})})})},ta={__key:0xe4a2ed448613,id:"e4a2ed4486137ab1769df3ad21497e36",loc:{},definitions:[]},aa=["AFRICA","ASIA","CANADA","CARIBBEAN","CENTRAL_AMERICA","DOMESTIC","EUROPE","INTERNATIONAL","MEXICO","MIDDLE_EAST","NORTH_AFRICA","NORTH_ASIA","RUSSIA","SE_ASIA","SOUTH_AMERICA","SOUTH_PACIFIC","TRANS_TASMAN","USA"],na=e=>[e.string("routecategory_africa"),e.string("routecategory_asia"),e.string("routecategory_canada"),e.string("routecategory_caribbean"),e.string("routecategory_central_america"),e.string("routecategory_domestic"),e.string("routecategory_europe"),e.string("routecategory_international"),e.string("routecategory_mexico"),e.string("routecategory_middle_east"),e.string("routecategory_north_africa"),e.string("routecategory_north_asia"),e.string("routecategory_russia"),e.string("routecategory_southeast_asia"),e.string("routecategory_south_america"),e.string("routecategory_south_pacific"),e.string("routecategory_trans_tasmin"),e.string("routecategory_usa")],sa="ReviewList_Route",la=(e,i)=>{var r=e.route||[],t={},a=[],n=na(i);r.forEach((e=>{"ROUTE"===e.axis&&e.selections&&e.selections.forEach((e=>{t[e]=!0}))}));for(var s=0;s<aa.length;++s)t[aa[s]]&&a.push({index:0,param:Hr,value:aa[s],label:n[s],tracker:""});return a},oa=({filter:e,displayType:i,changeFilters:t,showOverlay:a,reviewList:o})=>{var{localize:d}=c(),u=[],h=[],v={},p=na(d),[g,m]=D([]);e.forEach((e=>{"ROUTE"===e.axis&&e.selections&&e.selections.forEach((e=>{v[e]=!0}))}));var f=aa.length;"dropdown"!==i&&(f=4);var _=e=>{v[e]=!v[e];var i=Object.keys(v).filter((e=>v[e])).sort();i.length?t({[Hr]:[{axis:"ROUTE",selections:i}]}):t({[Hr]:[]}),y({module:"Reviews_Controls",action:"click_route_filter",context:e,value:v[e]?1:0})};if(0===g.length&&!o.isLoading){for(var w=[],T=0;T<aa.length;++T)(!o.routeCounts||o.routeCounts[aa[T]]&&o.routeCounts[aa[T]]>0)&&w.push(T);m(w)}for(var b=function(e){u.push(s("li",{className:r("ui_checkbox",ht),children:[n("input",{id:`RouteFilter_${e}`,type:"checkbox",value:aa[g[e]],checked:!!v[aa[g[e]]],onChange:()=>_(aa[g[e]])}),n("label",{htmlFor:`RouteFilter_${e}`,className:ut,children:p[g[e]]})]},e)),v[aa[g[e]]]&&h.push({id:String(e),value:p[g[e]],active:!0})},N=0;N<g.length&&N<f;++N)b(N);var S=null;if(g.length>f){for(var C=[],I=function(e){C.push(s("li",{className:"ui_checkbox XpoVm",children:[n("input",{id:`RouteFilter_${e}`,type:"checkbox",value:aa[g[e]],checked:!!v[aa[g[e]]],onChange:()=>_(aa[g[e]])}),n("label",{htmlFor:`RouteFilter_${e}`,className:ut,children:p[g[e]]})]},e))},E=0;E<g.length;++E)I(E);S=s(F,{children:[n(R,{name:sa,children:n("ul",{className:dt,children:C})}),n("div",{onClick:a,className:"taLnk",children:n("span",{className:"text",children:d("common_more_capital_ffffe27f")})})]},"moreLink")}return"dropdown"===i?n(fe,{category:"reviews",textTitle:d.string("airm_route"),itemsActive:h,itemsVisible:n("ul",{className:dt,children:u})}):s(l,{children:[n(li,{children:d("airm_route")}),s("ul",{className:dt,children:[u,S]})]})};function ca({locationId:e}){var[i,r]=D(null),t=Se((()=>{fetch(`/data/1.0/reviewpointscampaign/${e}`,{method:"GET",credentials:"same-origin"}).then((e=>{if(e.ok)return e.json();throw Error()})).then((e=>{r(e)})).catch((()=>!1))}),0,1);return n("div",{ref:t,children:n(ae,{children:n(O,{children:i&&i.campaignPointValue>0&&n(Mi,{campaign:i})})})})}function da(e){var i=e||"tripadvisor.com";return i.endsWith("daodao.com")&&(i="tripadvisor.cn"),i.startsWith("www")||(i=`www.${i}`),i}var ua=({review:e,className:i})=>{var{disclaimer:t,translationText:l}=function(e,i,r,t){var s,l="INDIVIDUAL_TRAVELER",{localize:o}=c();e.isLocalProvider?l="MEMBER":e.isToolProvider&&(l="INDIVIDUAL_CONTRIBUTOR");var d=n(a,{variant:l});if("HUMAN"===i){var u=A(o)[r||"en"]||r||"en";s=o.string("userreview_92d",{0:u,1:da(t)})}return{disclaimer:d,translationText:s}}(e.provider,e.translationType,e.original?e.original.language:null,e.original?e.original.submissionDomain:null),o=function(e){var{localize:i}=c();return"HUMAN"===e.translationType&&e.original?n("a",{href:e.original.url,children:i("userreview_92e")}):null}(e);return t?s("div",{className:r("XCJRC S2 Me MD i",i),children:[t,l,o]}):null};return e({PointsCampaign:ca,ReviewControlNotice:ct}),[()=>{Me=Pi,Pe={"":'<span class="jLQSJ">',"":"</span>","\n":"<br>","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},De=Xi,Xi.defaultProps={alwaysShowReadMore:!1},Yi.defaultProps={isReviewText:!1,url:void 0},He=p(((e,i)=>({myLang:E(e),sourceLang:i.review&&i.review.language||void 0,reviewTranslationType:i.review&&i.review.translationType||void 0,locationId:i.location&&i.location.locationId||void 0,geoId:i.location&&i.location.parentGeoId||void 0,reviewId:i.review&&i.review.id||void 0,isReviewText:!0,url:void 0,onClick:void 0})),{showOverlay:I.overlays.showGlobalOverlay})(Yi),Ve=p(((e,i)=>({myLang:E(e),sourceLang:i.review&&i.review.mgmtResponse&&i.review.mgmtResponse.language||void 0,reviewTranslationType:i.review&&i.review.mgmtResponse&&i.review.mgmtResponse.translationType||void 0,locationId:i.location&&i.location.locationId||void 0,geoId:i.location&&i.location.parentGeoId||void 0,reviewId:i.review&&i.review.mgmtResponse&&i.review.mgmtResponse.id||void 0,isReviewText:!1,url:void 0,onClick:void 0})),{showOverlay:I.overlays.showGlobalOverlay})(Yi),ze=Yi,Ki.defaultProps={photos:[],locationId:-1,geoId:-1},Ge=Ki,je=er,qe=dr,Be=hr,Ue=p(((e,i)=>({i18nlanguage:e.i18n.language,reviewId:i.review.id,title:i.review.title,language:i.review.language,originalLanguage:i.review.originalLanguage,translationType:i.review.translationType,url:i.review.url})),{expandReviews:w.expandReviews})(pr),$e=pr,gr.defaultProps={additionalRatings:null},We=gr,Xe=fr,Qe=br,Sr.defaultProps={tripType:null},Ye=Sr,Ze=new Set([26630,36167,31832,56342,49806,53840,49280,26470,58378,37673,58370,58610,62657,26576,32899,60331,36916,55343,21607,51676,48931,35231,48226,56776,35274,42626,26574,37676,35827,64442,26610,35230,33504,59617,36513,21608,30145,21438,55340,35829,41608,56334,59981,36924,47327,53822,49707,54688,59983,42628,26514,42446,57222,28155,49276,28683,39221,42625,55407,25045,56787,56773,35232,40326,59972,49803,61833,35083,26584,32915,61835,28035,58598,26566,26622,26609,27684,26626,49224,26612,26577,26592,40299,26598,49949,49951,43257,26572,30451,59982,49709,21610,33538,27685,30454,35275,49881,25111,49798,36320,40621,47326,31806,26606,40298,41607,42447,33505,36915,26603,60332,26631,21529,49277,26471,33506,64841,59410,26587,59661,28153,49801,41610,26608,28152,25110,42627,54685,26593,35273,35637,26623,41652,36516,56788,53843,65297,49814,41655,36539,47325,26589,30452,33537,51673,26633,58703,28682,43254,58375,26472,49275,54926,49795,31814,21606,32941,51674,49799,55341,30023,33532,55342,36318,36536,35272,40328,26578,30025,43283,55002,55754,26582,49879,60295,26613,54999,32916,36910,26634,26573,36315,64842,22009,36926,36317,34329,36321,30144,58609,21579,26570,35639,58368,30026,21528,28154,33534,31812,49274,56340,21577,49278,56335,21604,48225,26469,26625,35640,32945,33530,54925,36310,59979,43284,55001,58700,54720,55756,36316,54928,26594,49706,36311,40325,51678,35085,47269,35084,56790,21564,56789,55408,40623,36313,26632,26591,26629,49802,40324,21527,35638,49710,35826,31807,58701,22010,26565,58596,35086,26616,31833,34330,53838,48928,25109,39224,26621,32898,40327,49880,28034,32943,49816,21578,27683,30024,26619,23312,58612,23307,49815,42448,31809,49952,49817,59411,40622,36515,60296,58377,26586,51677,53836,36514,58376,26597,49281,55406,32900,49797,21605,22006,25042,35277,39223,21437,23318,37674,21609,57224,26635,40329,51680,41650,43256,60294,55753,26618,21603,26628,36538,36913,26575,30881,36923,59980,49279,56774,25043,31831,55405,39228,48929,36537,23311,39226,33540,65295,36909,26583,56775,42449,35828,57225,31813,62656,21565,28037,54719,36166,54722,31808,58367,60334,23317,64843,28036,22008,51675,43255,58597,54687,26585,60297,59409,62658,36319,26516,48930,56333,23316,30147,33535,26517,58611,53824,27682,54927,53842,64840,35233,43282,43281,54721,64441,36912,61834,26580,60333,30879,56343,35276,31830,36312,48227,32944,26588,56332,26579,26615,32940,40322,40297,41609,31811,58702,36914,53837,36911,40296,53835,21566,32938,59974,55755,26599,59662,25044,35270,49804,57223,56341,49796,55e3,26571,26600,54686,28684,49805,53823,51679,39227,62660,35271,40323,26601,26611,26607,26515,40624,49800,49882,41653,37675,26595,36314,59619,64440,26590,32913,39222,49950,26602,58369,30453,26620,26567,26596,34328,36925,21526,33509,26564,30878,59408,34327,64439,58599,59660,32939,32901,30146,26581,26624,36165,59975,22007,61831,26614,53825,32946,21567,36168,26617,28685,30880,26605,33531,23310,23315,39225,32914,25108,21580,53841,59659]),Je=Ze,Ke=new Date(2020,10,1),ei=Er,ii=M((()=>i("18or92"))),ri=p(((e,i)=>({...i,review:i.review,readonlyMode:e.meta.readonlyMode,userId:e.auth.loggedInUserId||e.auth.altSessId})),{showOverlay:I.overlays.showGlobalOverlay})(Ar),ti=Ar,ai=[xr,kr,Fr,Or,Mr,Pr,Dr,Hr],ni={RATING:xr,ALERT_STATUS:kr,SEGMENT:Fr,MONTH:Or,LANGUAGE:Mr,TEXT:Pr,CLASS_OF_SERVICE:Dr,ROUTE:Hr},$r.defaultProps={placeType:void 0},si=p((()=>({})),{setSort:()=>w.setPrefs({[zr]:jr})})($r),li=Wr,xe=class extends P{static getDerivedStateFromProps(e,i){return e.query!==i.query?{value:e.query,query:e.query}:null}constructor(e){super(e),this.onKeywordClicked=e=>{this.onSubmit(null,e)},this.state={value:e.query,query:e.query}}componentDidMount(){v("traveler-talk-about").on("keywordClicked",this.onKeywordClicked)}onSubmit(e,i){i!==this.state.query?(this.setState({value:i}),this.props.setQuery(i)):i!==this.state.value&&this.setState({value:i})}render(){return s(l,{children:[this.props.keywords&&this.props.keywords.length>0&&n(li,{children:this.props.localize("community_popular_mentions")}),n("div",{className:"OBlIq",children:(e=this.state.query,i=this.props.keywords,r=e=>this.onSubmit(null,e),t=this.props.placeType,a=this.props.localize,c=` ${e} `,d=[],i&&i.length>0&&(o=i.length>22?i.slice(0,22):i,""===e?d.push(n("button",{className:"ui_button primary small SaMXJ Md S2 n",children:a("airm_all_reviews")},"*")):d.push(n("button",{className:"ui_button secondary small JDpQB Md S2 n",onClick:i=>{i&&i.detail>0&&i.currentTarget&&i.currentTarget.blur(),""!==e&&r("")},children:a("airm_all_reviews")},"*")),o.forEach((i=>{var a=c.indexOf(` ${i} `)>=0;d.push(n(le,{children:s=>n("button",{className:`ui_button ${a?"primary":"secondary"} small ${a?"SaMXJ Md S2 n":"JDpQB Md S2 n"}`,onClick:a=>{a&&a.detail>0&&a.currentTarget&&a.currentTarget.blur(),((i,a)=>{var n=` ${i} `,s=c.indexOf(n)>=0;r(s?c.replace(n," ").trim():`${e} ${i}`),y({module:"Reviews_Controls",action:"click_tag_cloud",context:i,value:s?0:1}),a({businessUnit:Xr[t],elementType:i,actionName:"REVIEW_FILTER_TAG_CLOUD",itemAttributes:{filter_value:s?0:1}})})(i,s)},children:i},i)},i))}))),d)})]});var e,i,r,t,a,o,c,d}},oi=p(Qr,Yr)(Zr),ci=Jr,di={setQuery:e=>{var i=(e||"").trim();return""===i?w.changeFilters({[Pr]:[]}):w.changeFilters({[Pr]:[{axis:"TEXT",selections:[i]}]})},clearFilters:w.clearFilters},ke=class extends P{static getDerivedStateFromProps(e,i){return e.query!==i.query?{value:e.query,query:e.query}:null}constructor(e){super(e),this.onCTAClick=e=>{this.onSubmit(null,"",e)},this.state={value:e.query,query:e.query}}onSubmit(e,i,r){i!==this.state.query?(this.setState({value:i}),this.props.setQuery(i),y({module:"Reviews_Controls",action:"click_search",context:i}),r({businessUnit:Xr[this.props.placeType],elementType:i,actionName:"HR_REVIEW_SEARCH"})):i!==this.state.value&&this.setState({value:i})}onChange(e,i){this.setState({value:i})}onKey(e,i,r){"Enter"===e.key&&this.onSubmit(e,i,r)}onDSChange(e){var i=e.target.value;this.setState({value:i})}onDSKey(e,i){"Enter"===e.key&&this.onSubmit(e,this.state.value,i)}render(){return n(le,{children:e=>this.props.useDsSearchBox?n(oe,{placeholder:this.props.localize.string("Search_reviews_248"),value:this.state.value,onChange:e=>this.onDSChange(e),disabled:this.props.disabled,onKeyUp:i=>this.onDSKey(i,e),onBlur:i=>this.onSubmit(i,this.state.value,e),onClear:()=>this.onCTAClick(e)}):n(ci,{placeholder:this.props.localize.string("Search_reviews_248"),value:this.state.value,disabled:this.props.disabled,onChange:(e,i)=>this.onChange(e,i),onKeyUp:(i,r)=>this.onKey(i,r,e),onBlur:(i,r)=>this.onSubmit(i,r,e),onCTAClick:()=>this.onCTAClick(e)})})}},ui=p(et,di)(it),hi=[{label:"Most Recent",value:rt},{label:"Detailed Reviews",value:tt,tooltipText:"Reviews order informed by descriptiveness of user-identified themes such as cleanliness, atmosphere, general tips and location information."}],vi={MOST_RECENT:{[zr]:null,[Gr]:null},ML_SORTED:{[zr]:Br,[Gr]:qr}},pi=p(null,{changePrefs:e=>w.setPrefs(e)})(nt),gi=p(null,{changePrefs:e=>w.setPrefs(e)})(st),mi=p(((e,i)=>({...i,selectedSort:i.reviewList.prefs.sortType})),{updateSort:e=>w.setPrefs({[zr]:e})})(vt),fi=p(((e,i)=>i),{showOverlay:()=>I.overlays.showGlobalOverlay(pt),changeFilters:w.changeFilters})(ft),_i=_t,wi=p(((e,i)=>({showMT:!1!==i.reviewList.prefs.showMT})),{mtOn:()=>w.setPrefs({[Vr]:!0}),mtOff:()=>w.setPrefs({[Vr]:!1})})(wt),yi=class extends P{shouldComponentUpdate(e){return e.version>0&&(!this.props||e.version!==this.props.version)}componentDidUpdate(e){this.props.version>0&&(!e||this.props.version!==e.version)&&this.props.onChange()}render(){return null}},Fe=class extends P{componentDidUpdate(e){if(this.props.props.offset!==e.props.offset){if(!(this.props.navigate&&this.props.route&&"object"==typeof window&&window.history&&document))return;var i={...this.props.route,o:`r${this.props.props.offset}`};this.props.navigate(i,{noHistory:!0});var r=L(window.location.pathname,this.props.props.offset);window.history.pushState(i,document.title,r),window.location.hash="#REVIEWS"}}render(){return null}},Ti=p((e=>({offset:_(e).offset})))(ee(Fe)),bi=G("crawler_or_search_ua"),(Oe=class extends P{constructor(e){super(e),this.stash=void 0,this.stash={},this.state={}}componentDidMount(){this.stash.filters&&!this.props.filtersVersion&&this.props.onGotFilters&&this.props.onGotFilters(this.stash.filters),this.stash.prefs&&!this.props.prefsVersion&&this.props.onGotPrefs&&this.props.onGotPrefs(this.stash.prefs)}render(){var e=!!(this.props.filtersVersion||this.props.prefsVersion||this.props.offset),i=[];this.props.filtersMap&&e&&!this.props.ignoreFilters?(i=[],ai.forEach((e=>{var r,t,a,n=this.props.filtersMap&&this.props.filtersMap[e]||[];"language"===e&&null!=(r=this.props.filtersMap)&&r[e]&&null!=(t=this.props.filtersMap)&&null!=(a=t.safety)&&a.length||i&&i.push(...n)}))):(i=Rt(this.props.language),this.props.urlReviewQuery&&i.push({axis:"TEXT",selections:[this.props.urlReviewQuery]}));var r={};this.props.defaultPreferFriendReviews?r={[zr]:jr}:this.props.defaultShowMlSortedReviews&&(r={[zr]:Br,[Gr]:qr});var t=this.props.prefsVersion>0&&this.props.prefs||null;if(this.stash.locationId&&this.stash.locationId!==this.props.locationId&&(this.stash={}),!this.props.locationId){this.stash={};var a={hasReviews:!1,keywords:[],page:{offset:0,limit:this.props.pageSize},isLoading:!0,filters:{},prefs:{}},o={ratingCounts:St,languageCounts:{},alertStatusCount:0};return this.props.renderList({location:null,root:null,reviewList:a,reviewAggregations:o})}return s(l,{children:[n(Ie,{query:Nt,children:({executeMutation:e})=>n(yi,{version:this.props.filtersVersion,onChange:()=>e({key:Ct(this.props.locationId),val:JSON.stringify(i)})})}),n(Ie,{query:Nt,children:({executeMutation:e})=>n(yi,{version:this.props.prefsVersion,onChange:()=>e({key:It(this.props.locationId),val:JSON.stringify(t)})})}),n(Ee,{query:this.props.queryNode,variables:{locationId:this.props.locationId,offset:this.props.offset,filters:i,prefs:t,initialPrefs:r,limit:this.props.pageSize,filterCacheKey:this.props.filtersVersion>0?null:Ct(this.props.locationId),prefsCacheKey:this.props.prefsVersion>0||bi?null:It(this.props.locationId),needKeywords:!(e&&this.stash.keywords),keywordVariant:`location_keywords_v2_llr_order_30_${this.props.language}`},children:({fetching:e,data:i,error:a,executeQuery:n})=>{var s=i&&i.locations&&i.locations[0],l=!e&&s&&s.reviewListPage&&!0,o=s&&s.reviewListPage||{},c=s&&s.reviewAggregations||{},d=o.page&&o.page.offset||this.props.offset,u=c.ratingCounts?c.ratingCounts.reduce(((e,i)=>i+e),0):0,h=s&&s.keywords&&s.keywords.keywords;h=(h=h&&h.map((e=>e&&e.keyword)).filter((e=>!!e)))||this.stash.keywords;var v=o.reviews?o.totalCount||0:this.stash.totalCount,p=c.ratingCounts||this.stash.ratingCounts,g=((e,i,r)=>{if(!i)return e;var t={...e};return Object.keys(i).forEach((r=>{i&&i[r]>(e[r]||0)&&(t[r]=i[r])})),(!e[""]||r&&r>e[""])&&(t[""]=r||0),t})(this.stash.languageCounts||{},c.languageCounts,u),m=this.props.filtersMap||((e,i)=>{try{if(!i)return{[Mr]:Rt(e)};var r=JSON.parse(i);if(!r||!r.length||!r.forEach)return{};var t={};return r.forEach((e=>{var i=ni[e.axis];i&&(t[i]=t[i]||[],t[i].push(e))})),t}catch(e){return{}}})(this.props.language,i&&i.cachedFilters),f=t||((e,i,r,t)=>{try{if(!r||"{"!==r.charAt(0))return t||{};var a=JSON.parse(r);if(!a)return t||{};var n={[Vr]:!!a.showMT,[zr]:a.sortType,[Gr]:a.sortBy};return e?{...n,[zr]:jr}:i?{...n,[zr]:Br,[Gr]:qr}:n}catch(e){return{}}})(!this.props.prefsVersion&&this.props.defaultPreferFriendReviews,this.props.defaultShowMlSortedReviews,i&&i.cachedPrefs,r);if(this.stash={locationId:this.props.locationId,keywords:h,totalCount:v,ratingCounts:p,languageCounts:g,filters:m,prefs:f,retryCount:this.stash.retryCount,retryRequested:this.stash.retryRequested},!e)if(l||!a)this.stash.retryRequested=!1,this.stash.retryCount=null;else if(!this.stash.retryRequested){this.stash.retryRequested=!0;var _=(this.stash.retryCount||0)+1;this.stash.retryCount=_,_>=1&&_<=4?setTimeout((()=>{this.stash.retryRequested=!1,n()}),[1e3,1e3,1500,2200,3500,1e3,1e3][_]):_>6&&(l=!0)}var w={root:i,location:i&&i.locations&&i.locations[0],reviewList:{...o,hasReviews:!!u,keywords:h,totalCount:v,page:{offset:d,limit:this.props.pageSize},isLoading:!l,locationInfo:s,filters:m,prefs:f},reviewAggregations:{...c,ratingCounts:p||St,languageCounts:g}};return this.props.renderList(w)}}),n(Ti,{})]})}}).defaultProps={offset:0,filtersVersion:0,prefsVersion:0,filtersMap:null,prefs:null,language:"en",pageSize:5},Ni=p(((e,i)=>{var r=_(e);return{locationId:e.page.detailId,queryNode:i.queryNode,renderList:i.renderList,pageSize:i.pageSize,offset:r.offset||0,filtersVersion:r.filtersVersion||0,filtersMap:r.filters||e.route.q&&{text:[{axis:"TEXT",selections:[e.route.q]}]}||null,prefs:r.prefs,prefsVersion:r.prefsVersion||0,language:E(e),defaultPreferFriendReviews:e.route&&"true"===e.route.preferFriendReviews,urlReviewQuery:e.route.q,defaultShowMlSortedReviews:i.defaultShowMlSortedReviews}}),{onGotFilters:w.gotFilters,onGotPrefs:w.gotPrefs})(Oe),Si=p(((e,i)=>({...i,prefilterRating:e.route.filterRating,myLang:E(e)})),{changeFilters:w.changeFilters,clearFilters:w.clearFilters})(xt),Ri=p(((e,i)=>({filter:i.reviewList.filters.travelType||[]})),{changeFilters:w.changeFilters})(Mt),Ci=p(((e,i)=>({filter:i.reviewList.filters.travelTime||[]})),{changeFilters:w.changeFilters})(Vt),Ii=p(((e,i)=>({...i,myLang:E(e),prefilterLang:e.route.filterLang})),{showOverlay:()=>I.overlays.showGlobalOverlay(qt),hideOverlay:()=>I.overlays.hideGlobalOverlay(qt),changeFilters:w.changeFilters,clearFilters:w.clearFilters})(Ut),Ei=p(((e,i)=>({filter:i.reviewList.filters.classOfService||[]})),{changeFilters:w.changeFilters})(Zt),Li=p(((e,i)=>({filter:i.reviewList.filters.safety||[]})),{changeFilters:w.changeFilters})(ea),Ai=M((()=>i("s2m6yi"))),xi=Ae(((e,i)=>{var r=e.page.detailId?i(`/data/1.0/hotelDetail/${e.page.detailId}/locationAlert`):null,t=r&&r.get().data;return()=>t||{}}))(ia),ki=M((()=>i("s2m6yi"))),Fi=ra,Oi=p(((e,i)=>({filter:i.reviewList.filters.route||[]})),{changeFilters:w.changeFilters,showOverlay:()=>I.overlays.showGlobalOverlay(sa)})(oa),Mi=M((()=>i("3jasx5"))),e({AdditionalRatings:We,AdditionalRatingsInListing:mr,AttributionFooter:ei,AttributionFooterInListing:Lr,ClassOfServiceFilter:Ei,ConnectedRateMTFooterShell:ri,ConnectedReviewTitle:Ue,ConnectionReviewsCTA:si,DetailReviewListContainer:Ni,DisclaimerFooter:ua,EventDate:Xe,EventDateInListing:_r,EventDetails:Qe,EventDetailsInListing:Nr,ExpandableReview:De,GoogleTranslateButton:ze,HealthAndSafetyFilter:Li,InlineReviewPhotosInListing:ir,InlineRoomTipInListing:zi,LanguageFilter:Ii,MTFooter:ti,PREF_NAME_SORTTYPE:zr,Photos:je,PointsCampaign:ca,ProductAttributionInListing:tr,REVIEW_SORT_CONNECTIONS_FIRST:jr,RatingLine:qe,RatingLineInListing:ur,ResponseDisclaimerFooter:Me,ReviewControlNotice:ct,ReviewFilters:fi,ReviewGoogleTranslateButton:He,ReviewHeader:Zi,ReviewRatingFilter:Si,ReviewResponseGoogleTranslateButton:Ve,ReviewSortDropdown:pi,ReviewSortOverlay:gi,ReviewTitle:$e,ReviewedByRadioFilter:mi,RouteFilter:Oi,SearchBox:ui,SearchFilter:oi,SensitiveIssuesBadge:xi,SensitiveIssuesBadgeGql:Fi,SensitiveIssuesBadgeQuery:ta,SingleReview:Be,SingleReviewInListing:vr,TravelTimeFilter:Ci,TravelTypeFilter:Ri,TripType:Ye,TripTypeInListing:Rr,connectExpando:Qi,connectLocationReviewQuery:Et,connectOwnerResponse:sr,connectReviewList:bt,getCOSSelections:Yt,getHealthAndSafetySelections:Kt,getLanguageSelections:Bt,getRatingSelections:At,getRouteSelections:la,getSegmentSelections:Ot,getTextSelections:Kr,getTimeSelections:Ht})},[e=>r=e.default,e=>(t=e.default,a=e.TransparencyLinkReviewDisclosure),e=>(n=e.jsx,s=e.jsxs,l=e.Fragment),e=>(o=e.default,c=e.useLocalize,d=e.useIntlFormatter,u=e.useLocale,h=e.useLanguage),e=>v=e.createRadio,e=>p=e.connect,e=>(g=e.ReadMore,m=e.DirectionalText),e=>f=e.Icon,i=>{_=i.getState,w=i.ACTIONS,e("REVIEW_LIST_ACTIONS",i.ACTIONS)},e=>(y=e.default,T=e.Track),e=>b=e.useViewportCategory,e=>N=e.default,e=>S=e.default,e=>R=e.Modal,e=>C=e.AjaxRequest,e=>I=e.actions,i=>{E=i.contentLangFromState,L=i.getReviewsUrl,A=i.getLanguageNames,e("contentLangFromState",i.contentLangFromState)},e=>x=e.MemberEventOnObjectBlock,e=>(k=e.useCallback,F=e.Fragment,O=e.Suspense,M=e.lazy,P=e.Component,D=e.useState,H=e.useMemo,V=e.useEffect),e=>z=e.ResponsiveImage,e=>G=e.featureIsEnabled,e=>j=e.openMediaViewer,e=>(q=e.useIsRobotSafe,B=e.MountedClientOnly),e=>(U=e.shouldUseRelativeDate,$=e.renderRelativeDate,W=e.renderAbsoluteDate),e=>X=e.Avatar,e=>Q=e.SectionOverflowMenu,e=>Y=e.BubbleRating,e=>Z=e.default,e=>J=e.HasBeenVisible,e=>(K=e.Link,ee=e.withRouteContext),e=>(ie=e.useGARecordCallback,re=e.useGARecorder),e=>te=e.default,e=>ae=e.ErrorBoundary,e=>ne=e.FacePile,e=>se=e.LocationContributionsPoller,e=>le=e.BBMLInteractionLogger,e=>oe=e.default,e=>ce=e.TextInput,e=>de=e.Dropdown,e=>ue=e.default,e=>he=e.default,e=>(ve=e.Columns,pe=e.Column),e=>ge=e.default,e=>me=e.default,e=>fe=e.FilterGroup,e=>_e=e.InlineAlert,e=>we=e.FeedLoadingSkeleton,e=>ye=e.default,e=>Te=e.useRoute,e=>be=e.default,e=>Ne=e.default,e=>Se=e.useOnVisible,e=>(Re=e.default,Ce=e.getMarketingLanderUrl),e=>(Ie=e.Mutation,Ee=e.Query,Le=e.useQuery),e=>Ae=e.bind]]},["fkji80","12ksxj","121h32","17thqz","1bqgab","12mj4n","wgun1f","1ybxsm","itf998","4axon3","1ys6v1","4nzso8","u59av4","18m6oj","1w1pct","45ddp0","jlm8x1","j16vpf","1o4yt4","76j3t0","skjzuv","uk99rb","1mb2nz","1o5y7t","ljqkwp","1shzb6","k3tmpy","14bebv","1w0dpw","bvvaww","32pwc7","wt5b21","183pm0","1eag60","118jbw","15nmd8","gppdva","uovzt8","13yhbd","16110k","14q9l4","ptdiqu","1wi7w8","vcz45k","ihwtf3","lt9m20","2kokoi","10i47a","fgwvq1","1essqv","lr6tb6","13btuy","16ac2e","1mqwhq","16z5q2"]]);
