(this.$WP=this.$WP||[]).push(["ll8oko",(e,t)=>{"use strict";var o,n,i,a,s,l,r,c,d,u,m,_,h,p,b,v,w,g,C,I,T,f,R,N,y,k,U,E,O,S,q,x,P,H,z,D,L,A,M,Q,B,j,W,G,$,F,V,J,K,X,Y,Z,ee,te,oe,ne,ie,ae,se={__key:0x74507785a3b2,id:"74507785a3b238e5917d3f952e627743",loc:{},definitions:[]},le={loading:!0,writeUserReviewUrl:"",topicsUrl:"",postPhotosUrl:"",roomTipsCount:0,questionsCount:0,reviewsCount:0,hasNoContent:!1,isActiveOwner:!1,locationId:0,geoId:0},re=({locationId:e,children:t})=>{var o,[{data:n,fetching:i}]=u({query:se,variables:{locationId:e},pause:!e||e<0});if(!i&&n&&n.locations&&n.locations[0]){var a,s,l=n.locations[0],r=l.topicCount||0,c=(null==(a=l.reviewSummary)?void 0:a.count)||0;o={loading:i,writeUserReviewUrl:l.writeUserReviewUrl||"",topicsUrl:l.topicsUrl||"",postPhotosUrl:l.postPhotosUrl||"",roomTipsCount:l.roomTipsCount||0,questionsCount:r,reviewsCount:c,hasNoContent:0===r&&0===c,isActiveOwner:(null==(s=l.currentUserOwnerStatus)?void 0:s.isValid)||!1,locationId:l.locationId||0,geoId:l.parentGeoId||0}}else o=le;return m($,{value:o,children:t})},ce=40537,de="community_qa_question_form",ue="photo-uploader",me=({locationId:e,geoId:t,writeUserReviewUrl:o,className:n,pid:i,cookieDomain:a,onClick:s,children:l})=>e<=0||t<=0?null:m("a",{href:o||`/UserReview-g${t}-d${e}`,target:"_blank",className:n,onClick:e=>{s&&s(e),i&&i>0&&C(i,a)},children:l}),_e=e=>_("div",{className:o("PxcvT","ui_column is-4"),children:[m(I,{name:e.icon,className:"okNbn"}),m("div",{className:"IdBqQ b H",children:e.title}),m("div",{className:"LdcTd Md Nb MC NC",children:e.subtitle}),e.children("oBeaB")]}),he=()=>{var{localize:e}=p(),t=t=>t?e.string("hotel.review.finish.review_fffff216"):e.string("hr_write_a_review");return m(G,{children:({locationId:n,geoId:i,writeUserReviewUrl:a})=>m(V,{icon:"pencil-paper",title:e.string("hr_write_your_review"),subtitle:e.string("hr_write_your_review_sub_title"),children:e=>m(w,{children:({hasDraftReview:s})=>m(F,{locationId:n,geoId:i,writeUserReviewUrl:a,pid:ce,className:o("ui_button primary",e),onClick:e=>v(e,{module:"low_content_collection_cta_review",action:"start_submission",context:"POI|Hotel",dstServlet:"UserReviewEdit",value:0,once:!0}),children:t(s)})})})})},pe=({module:e,children:t,location:o})=>m(f,{name:ue,children:n=>m(T,{forceLogin:!1,children:i=>t((()=>{b({module:e,location:o,action:"start_submission",context:"POI|Hotel"}),i().then(n)}))})}),be=()=>{var{localize:e}=p();return m(K,{module:"low_content_collection_cta_photo",children:t=>m(V,{icon:"camera",title:e.string("hr_share_your_photo"),subtitle:e.string("hr_share_your_photo_subtitle_period"),children:n=>m("span",{className:o("ui_button primary",n),onClick:t,children:e("hr_post_a_photo")})})})},ve=()=>{var{localize:e}=p();return m(G,{children:({topicsUrl:t})=>m(V,{icon:"forums",title:e.string("hr_get_answers"),subtitle:e.string("hr_get_answer_subtitle"),children:n=>m("a",{href:`${t}#AskQuestionForm`,target:"_blank",className:o("ui_button primary",n),onClick:e=>{v(e,{module:"low_content_collection_cta_question",action:"start_submission",context:"POI|Hotel",value:0,once:!0})},children:e("hr_ask_a_question")})})})},we=e=>m(re,{locationId:e.locationId,children:m(G,{children:({loading:t,isActiveOwner:i,questionsCount:a,reviewsCount:s,roomTipsCount:l})=>{var r=5;switch(e.selectedTab){case"Questions":r=a;break;case"RoomTips":r=l;break;default:r=s}return t||i||r>=5&&0!==s?null:_(n,{testTarget:"low_content_cta",className:o("ui_columns","NC Nb",0===s?"Mf":""),section:"communityContent",theme:"box",children:[m(J,{}),m(X,{}),m(Y,{})]})}})}),ge=()=>{var{localize:e}=p();return m(G,{children:({topicsUrl:t,questionsCount:o})=>o>3?m("a",{href:t,target:"_blank",className:"weEPs _R S4 H3 b",children:e("qa_see_all_n_questions",{nQuestions:o})}):null})},Ce=e=>{var{localize:t}=p();return m(G,{children:o=>m(W,{...e,context:o,localize:t,children:e.children})})},Ie=({locationId:e})=>{var{localize:t}=p();return m("a",{href:`/ManagementCenter-d${e}`,className:"ui_button primary",onClick:t=>{v(t,{module:"owner_cta",action:"owner_visit_mc_middle",context:e.toString(),value:0,once:!0})},children:t("restaurant_owners_visit_your_owner_mangement_center")})},Te="yMKLb",fe="qCJme _S b Wc",Re="SvHEb",Ne=e=>{var{localize:t}=p(),{logImpression:o,logInteraction:n}=j(),i=e=>e?t.string("hotel.review.finish.review_fffff216"):t.string("hr_write_a_review");c((()=>{"Questions"!==(null==e?void 0:e.selectedTab)&&o("POI_WRITE_REVIEW_SECTION",!0,{customData:JSON.stringify({geoId:e.geoId})})}),[null==e?void 0:e.selectedTab,o,e.geoId]);var a={Reviews:()=>m(G,{children:({writeUserReviewUrl:t})=>m(w,{children:({hasDraftReview:o})=>m(F,{locationId:e.locationId,geoId:e.geoId,writeUserReviewUrl:t,pid:ce,className:"ui_button primary",onClick:t=>{n("POI_WRITE_REVIEW_SECTION",!1,{customData:JSON.stringify({geoId:e.geoId})}),v(t,{module:"content_submission|review",action:"start_submission",context:"POI|Hotel",dstServlet:"UserReviewEdit",value:0,once:!0})},children:i(o)})})}),Questions:()=>m(f,{name:de,children:e=>m(M,{call:e,children:e=>m(A,{type:"primary",onClick:()=>{Q("hr-community-tab").emit("selectTab","Questions",!0),e(),b({module:"content_submission|question",action:"start_submission",context:"POI|Hotel",value:0,once:!0})},children:t("hr_ask_a_question")})})})},s={Reviews:({close:t})=>m(G,{children:({writeUserReviewUrl:o})=>m(w,{children:({hasDraftReview:a})=>_(F,{locationId:e.locationId,geoId:e.geoId,writeUserReviewUrl:o,pid:ce,className:fe,onClick:o=>{t(),n("POI_WRITE_REVIEW_SECTION",!1,{customData:JSON.stringify({geoId:e.geoId})}),v(o,{module:"contextual_cta_dropdown_review",action:"start_submission",context:"POI|Hotel",dstServlet:"UserReviewEdit",value:0,once:!0})},children:[m(I,{name:"pencil-paper",className:Te}),m("span",{className:Re,children:i(a)})]})})}),Photos:()=>m(K,{module:"contextual_cta_dropdown_photo",children:e=>_("span",{className:fe,onClick:()=>{e()},children:[m(I,{name:"camera",className:Te}),m("span",{className:Re,children:t("hr_post_a_photo")})]})}),Questions:({close:e})=>m(f,{name:de,children:o=>m(M,{call:o,children:o=>_("span",{className:fe,onClick:()=>{e(),Q("hr-community-tab").emit("selectTab","Questions",!0),o(),b({module:"contextual_cta_dropdown_question",action:"start_submission",context:"POI|Hotel",value:0,once:!0})},children:[m(I,{name:"forums",className:Te}),m("span",{className:Re,children:t("hr_ask_a_question")})]})})})},l=()=>{var t="Questions"===(null==e?void 0:e.selectedTab)?a.Questions:a.Reviews;return m("div",{className:"woPbY",children:d(t)})},r=()=>m(L,{below:!0,fullBleed:!0,local:!0,arrowType:"none",closeButton:!1,alignEdge:"right",shiftY:2,contents:e=>Object.keys(s).map((t=>d(s[t],{close:e,key:t}))),children:(e,t,o,n)=>m(B,{className:"fjFUH",events:n?["onTouchStart"]:["onClick","onTouchStart","onTouchEnd"],children:m("div",{ref:e,className:"sSyKE u j",onClick:()=>{(n?o:t)(),b({module:"contextual_cta_dropdown_toggle",action:"open",context:"POI|Hotel",value:0,once:!0})},children:m(I,{name:n?"caret-up":"caret-down"})})})});return m(D,{children:m(G,{children:({loading:t,hasNoContent:o,isActiveOwner:n})=>t||o?null:n?m(ne,{locationId:e.locationId}):m("div",{className:"EXBEN _S",children:_("div",{className:"lDMPR _m","data-test-target":"ugc_cta_button",children:[m(l,{}),m(r,{})]})})})})},ye=(e,t)=>{switch(e){case"Reviews":return t.string("common_Reviews");case"Questions":return t.string("mobile_questions_answers");case"RoomTips":return t.string("tabs_room_tips_title_fffff661");default:return""}},ke=e=>{var{localize:t}=p(),{enabled:l}=H(),r=s.useContext(P);return s.useEffect((()=>(r.add(i.reviews),()=>{r.delete(i.reviews)})),[r]),_(re,{locationId:e.locationId,children:[m(n,{section:e.isTabbedTestEnabled?"reviewsTabs":"reviews",theme:"none",children:m(N,{children:m(oe,{...e,countClass:"iypZC Mc _R b",typeClass:"xJTmy",children:t=>t.map((t=>m(k,{children:n=>_(y,{active:t.tab===e.selectedTab,onClick:t.count>0?()=>{n({elementType:t.tab,actionName:"HR_GROUPING_TAB"}),e.setSelectedTab(t.tab,!0)}:()=>!1,className:o("wHqmu",`test-target-tab-${t.tab}`,t.count>0?null:"rvvXh"),children:[m(I,{name:t.icon,className:"oGeFI _R"}),m("span",{"data-test-target":`CC_TAB_${t.tab}_LABEL`,children:m("span",{dangerouslySetInnerHTML:{__html:t.label}})})]},t.tab)},t.tab)))})})}),_(n,{theme:"tabbed-top",joinable:!te.has(e.selectedTab),section:"communityContent",children:[_(a,{text:_(h,{children:[ye(e.selectedTab,t),"Reviews"===e.selectedTab?_(h,{children:[m(E,{}),m(q,{marginTop:"spacing-02"})]}):null,"RoomTips"===e.selectedTab?m(q,{includeHamonLawLocales:!0,marginTop:"spacing-02"}):null]}),subText:"Questions"===e.selectedTab?m(ee,{}):null,noDivider:te.has(e.selectedTab),isDsStyle:l,children:["Reviews"===e.selectedTab?m(O,{locationId:e.locationId}):null,m(ie,{selectedTab:e.selectedTab,locationId:e.locationId,geoId:e.geoId})]}),m(U,{}),"Reviews"===e.selectedTab?m(S,{locationId:e.locationId}):null]}),m(x,{mediaType:"photo",linkUploaderModalName:"link-uploader",modalName:ue,pid:ce,locationId:e.locationId})]})},Ue=(e=0)=>{var t=document.querySelector("#REVIEWS"),o=document.querySelector("body");if(o&&t){var n=o.getBoundingClientRect().top;window.scrollTo(0,t.getBoundingClientRect().top-n-e)}};return[()=>{({Consumer:G,Provider:$}=l(le)),F=g((e=>({cookieDomain:e.meta.cookieDomain})))(me),V=_e,J=he,K=g((e=>({location:e.page.detailId})))(pe),X=be,Y=ve,Z=we,ee=ge,te=new Set(["Questions","RoomTips"]),W=class extends r{constructor(...e){super(...e),this.state={defaultTabCheckCompleted:!1}}componentDidUpdate(){this.state.defaultTabCheckCompleted||this.defaultTabCheck()}defaultTabCheck(){var{loading:e,hasNoContent:t,questionsCount:o,reviewsCount:n}=this.props.context;e||(this.setState({defaultTabCheckCompleted:!0}),!t&&0===n&&o>0&&this.props.setSelectedTab("Questions"))}render(){var{loading:e,hasNoContent:t,questionsCount:o,reviewsCount:n,roomTipsCount:i}=this.props.context,{selectedTab:a,children:s,countClass:l,typeClass:r}=this.props;if(t)return null;if(e)return m(z,{height:"120px"});var c={selectedTab:a};return s([{tab:"Reviews",icon:"pencil-paper",count:n,label:this.props.localize.string("hr_community_tab_reviews",{countClass:l,typeClass:r,count:n}),...c},{tab:"Questions",icon:"forums",count:o,label:this.props.localize.string("hr_community_tab_questions_2",{countClass:l,typeClass:r,count:o}),...c},{tab:"RoomTips",icon:"lightbulb-on",count:i,label:this.props.localize.string("hr_community_tab_room_tips",{countClass:l,typeClass:r,count:i}),...c}])}},oe=Ce,ne=Ie,ie=Ne,ae=R(((e,t)=>(U.stage(e,t),(e,t)=>t)))(ke),e({HEADER_SCROLL_OFFSET:66,H_R_CONTENT_COLLECTION_PID:ce,LowContentCTA:Z,PHOTO_UPLOADER_MODAL_NAME:ue,QUESTION_FORM_MODAL_NAME:de,TabBarAboveHeader:ae,scrollIntoView:Ue})},[e=>o=e.default,e=>(n=e.Section,i=e.sectionToElementIdMapping,a=e.ComplexHeader),e=>(s=e,l=e.createContext,r=e.Component,c=e.useEffect,d=e.createElement),e=>u=e.useQuery,e=>(m=e.jsx,_=e.jsxs,h=e.Fragment),e=>p=e.useLocalize,e=>(b=e.default,v=e.trackClick),e=>w=e.DraftReviewConsumer,e=>g=e.connect,e=>C=e.setPIDCookie,e=>I=e.Icon,e=>T=e.SocialLoginGate,e=>f=e.Opener,e=>R=e.bind,e=>(N=e.GroupingTabs,y=e.GroupingTab),e=>k=e.BBMLInteractionLogger,e=>(U=e.SensitiveIssuesBadge,E=e.ReviewControlNotice,O=e.PointsCampaign,S=e.ConnectionReviewsCTA),e=>q=e.default,e=>x=e.MediaUploaderModal,e=>P=e.SectionIdContext,e=>H=e.useHRExpandedCommerce,e=>z=e.default,e=>D=e.HideOnReadonly,e=>L=e.default,e=>A=e.default,e=>M=e.AuthGated,e=>Q=e.createRadio,e=>B=e.default,e=>j=e.useUserReviewTracking]]},["fkji80","mjqgle","1o4yt4","1mqwhq","121h32","17thqz","4axon3","rm3gfe","12mj4n","12ve3z","1ybxsm","10506z","80hn7v","16z5q2","1k3un4","15nmd8","uy63ln","633gr8","1sqiy8","1a182z","wsk8ra","u59av4","zjrz9w","14q9l4","4nzso8","1c6byb","1bqgab","65rb8q","1tbrqz"]]);
