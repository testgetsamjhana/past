(this.$WP=this.$WP||[]).push(["1r5lgo",(t,e)=>{"use strict";var n,a,r,i,h,l,s,u,o;function d(t){var e=String(t);return(1===e.length?"0":"")+e}var T=(...t)=>t.map((t=>{return t?[(e=t).getFullYear(),d(e.getMonth()+1),d(e.getDate())].join("_"):"__";var e})).join("_"),g=t=>{var e,n,a=t?t.split("_"):[];if(a.length&&a.length%3==0){for(var r,i,h,l=[];a.length;)[r,i,h,...a]=a,r.length&&i.length&&h.length?l.push(new Date(parseInt(r,10),parseInt(i,10)-1,parseInt(h,10))):l.push(void 0);[e,n]=l}return{startDate:e,endDate:n}},c=t=>{n().dispatch(a.page.hotels.setPickerOpen(t))},D=t=>{n().dispatch(a.page.hotels.setDatePickerPage(t))},p=(t,e,h,l,s,o)=>{var d,g,c=T(t,e);try{var D;n().dispatch(a.travelerInfo.setHotelsTravelerInfo(c,void 0,!1)),t&&e&&o&&(d=c,(g=u.STAYDATES&&u.STAYDATES.queryString)&&d&&fetch("/UpdateSessionDatesAjax",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},credentials:"same-origin",body:`${g}=${d}`})),((t,e)=>{try{var n,a,i;null!=(n=window)&&null!=(a=n.ta)&&null!=(i=a.page)&&i.pushDates?window.ta.page.pushDates(null,t,e):r("wcDateEventsRadio").emit("dateSelected",null,t,e)}catch(t){globalThis.require(["trjs!ta/util/Error"],(e=>{e.record(t,"page-dates-interface: Failed to update with new dates")}))}})("STAYDATES",[t,e]),h&&s&&(D=h.startDate||h.endDate?l?"default_dated_to_manually_dated":"manually_dated_to_manually_dated":"undated_to_manually_dated",i({module:"DATEPICKER",action:D,context:s}))}catch(t){}},y=30,S=396,E=(t,e,n)=>!(u[t].children&&e&&n)||new s(e).compare(new s(n))<0,R=(t,e,n)=>!(u[t].children&&e&&n)||0!==new s(e).compare(new s(n)),A=(t,e)=>Math.abs(new s(t).daysToNormalized(new s(e))),f=t=>(e,n,a)=>!(u[e].children&&n&&a)||A(n,a)<=t,v=(t,e,n)=>{var a=new Date;return(!e||new s(e).compare(new s(a))>=0)&&(!n||new s(n).compare(new s(a))>0)};return[()=>{t("CalendarDate$1",h=class t{constructor(t){this.date=void 0;var e=t||new Date;this.date=new Date(e.getFullYear(),e.getMonth(),e.getDate())}daysInMonth(){return new Date(this.year(),this.month()+1,0).getDate()}eachDayInMonth(e){for(var n=1,a=this.daysInMonth();n<=a;n++)e(new t(new Date(this.year(),this.month(),n)))}thisMonth(){return new t(new Date(this.year(),this.month(),1))}nextMonth(){return this.relativeMonth(1)}previousMonth(){return this.relativeMonth(-1)}relativeMonth(e){return new t(new Date(this.year(),this.month()+e,1))}relativeDay(e){return new t(new Date(this.year(),this.month(),this.day()+e))}firstOfMonth(){return new t(new Date(this.year(),this.month(),1))}lastOfMonth(){return new t(new Date(this.year(),this.month(),this.daysInMonth()))}year(){return this.date.getFullYear()}month(){return this.date.getMonth()}day(){return this.date.getDate()}dayOfWeek(){return this.date.getDay()}firstDayOfMonth(){return new Date(this.year(),this.month(),1).getDay()}inRange(t,e){return!(!t||!e)&&this.compare(t)>0&&this.compare(e)<0}compare(t){for(var e=[t=>t.getFullYear(),t=>t.getMonth(),t=>t.getDate()],n=0,a=e.length;n<a;n++){var r=e[n];if(r(this.date)<r(t.date))return-1;if(r(this.date)>r(t.date))return 1}return 0}daysTo(t){return Math.ceil((t.date.getTime()-this.date.getTime())/864e5)}daysToNormalized(t){var e=Date.UTC(this.date.getFullYear(),this.date.getMonth(),this.date.getDate()),n=Date.UTC(t.date.getFullYear(),t.date.getMonth(),t.date.getDate());return Math.floor((n-e)/864e5)}toString(){return[this.year(),this.month(),this.day()].join("-")}static fromString(e){var n=e.split("-").map((t=>parseInt(t,10)));return new t(new Date(n[0],n[1],n[2]))}}),s=h,u=Object.freeze(function(){var t={CHECKIN:{queryString:null,pathString:null},CHECKOUT:{queryString:null,pathString:null},STAYDATES:{children:["CHECKIN","CHECKOUT"],queryString:"staydates",pathString:"zus"},EATERY:{queryString:"eaterydate",pathString:"zur"},DEPARTURE:{queryString:null,pathString:null},RETURN:{queryString:null,pathString:null},ROUNDTRIP:{children:["DEPARTURE","RETURN"],queryString:"rtdates",pathString:"zut"},ONEWAYFLIGHT:{queryString:"oneway",pathString:"zuo"},LEG_1:{queryString:"leg1date",pathString:"zu1"},LEG_2:{queryString:"leg2date",pathString:"zu2"},LEG_3:{queryString:"leg3date",pathString:"zu3"},ATTRACTION:{queryString:"attrdate",pathString:"zua"},ATTRACTION_FROM:{queryString:null,pathString:null},ATTRACTION_TO:{queryString:null,pathString:null},ATTRACTIONRANGE:{children:["ATTRACTION_FROM","ATTRACTION_TO"],queryString:"attrrange",pathString:"zue"},VPDATES:{children:["VPDEPARTURE","VPRETURN"],queryString:"vpdates",pathString:null},VPDEPARTURE:{queryString:null,pathString:null},VPRETURN:{queryString:null,pathString:null}};function e(e){var n=[];for(var a in t)t.hasOwnProperty(a)&&t[a].children&&t[a].children.indexOf(e)>=0&&n.push(a);return n}function n(t){var e=ta.page.getDates(t);return e&&e[0]?new s(e[0]):null}return Object.values(t).forEach((t=>{t.children&&Object.freeze(t.children),Object.freeze(t)})),t.getStartDateType=function(n){var a=e(n);if(0==a.length){var{children:r}=t[n];return r&&r.length>0?r[0]:n}return t[a[0]].children[0]},t.getEndDateType=function(n){var a=e(n);if(0==a.length){var{children:r}=t[n];return r&&r.length>0?r[r.length-1]:n}var i=t[a[0]];return i.children[i.children.length-1]},t.isChildDateType=function(t){return e(t).length>0},t.isSingleDateType=function(e){var n=t[e];return!(t.isChildDateType(e)||n&&n.children&&n.children.length>0)},t.getParents=e,t.isHotelDateType=function(t){return e(t).indexOf("STAYDATES")>=0},t.isRoundTripDateType=function(t){return e(t).indexOf("ROUNDTRIP")>=0},t.isAttractionRangeDateType=function(t){return e(t).indexOf("ATTRACTIONRANGE")>=0},t.isVacationPackagesDateType=function(t){return e(t).indexOf("VPDATES")>=0},t.allowsSameDayRange=function(e){return t.isAttractionRangeDateType(e)||t.isRoundTripDateType(e)},t.isMultiCityDateType=function(t){return"LEG_1"==t||"LEG_2"==t||"LEG_3"==t},t.isStartDateType=function(n){var a=e(n);return 0!=a.length&&0==t[a[0]].children.indexOf(n)},t.isEndDateType=function(n){var a=e(n);if(0==a.length)return!1;var r=t[a[0]];return r.children.indexOf(n)==r.children.length-1},t.getStartDate=function(e){var n=t.getStartDateType(e);return null==n?ta.page.getDates(e)[0]:ta.page.getDates(n)[0]},t.getEndDate=function(e){var n=t.getEndDateType(e);return null==n?ta.page.getDates(e)[0]:ta.page.getDates(n)[0]},t.getMinEnabledDate=function(e){if(t.isHotelDateType(e)||t.isRoundTripDateType(e));else{if("LEG_1"==e)return n("ONEWAYFLIGHT");if("LEG_2"==e)return n("LEG_1")||n("ONEWAYFLIGHT");if("LEG_3"==e)return n("LEG_2")||n("LEG_1")||n("ONEWAYFLIGHT");if("ATTRACTION_TO"==e)return n("ATTRACTION_FROM")}return null},t.flattenType=function(e){var n=t[e];return n?n.children?n.children.slice(0):[e]:[]},t.getCorrespondingDateType=function(t){switch(t){case"CHECKIN":return"CHECKOUT";case"CHECKOUT":return"CHECKIN";case"DEPARTURE":return"RETURN";case"RETURN":return"DEPARTURE";case"ATTRACTION_FROM":return"ATTRACTION_TO";case"ATTRACTION_TO":return"ATTRACTION_FROM";case"VPDEPARTURE":return"VPRETURN";case"VPRETURN":return"VPDEPARTURE";default:return null}},t}()),t("Validation$1",l=class{constructor(t,e={}){this.dateType=void 0,this.maxStayLength=void 0,this.maxStayDistance=void 0,this.validators=void 0,this.validate=(t,e)=>{var n=this.validators[this.dateType];return!n||0===n.length||!n.some((n=>!n(this.dateType,t,e)))},this.dateType=t;var n,{maxStayLength:a=y,maxStayDistance:r=S}=e;this.maxStayLength=a,this.maxStayDistance=r,this.validators={STAYDATES:[v,E,R,f(this.maxStayLength),(n=this.maxStayDistance,(t,e,a)=>{var r=new Date;return(!e||A(r,e)<=n)&&(!a||A(r,a)<=n)})],ROUNDTRIP:[E],ATTRACTIONRANGE:[E],VPDATES:[E,R,f(this.maxStayLength)]}}}),o=new l("STAYDATES"),t({CalendarDate:s,DateTypeStore:u,HotelsValidation:o,Validation:l,decode:g,encode:T,setHotelsDatesOpen:c,setHotelsDatesPage:D,setHotelsPageDates:p})},[t=>(n=t.getStore,a=t.actions),t=>r=t.createRadio,t=>i=t.default]]},["45ddp0","1bqgab","4axon3"]]);
