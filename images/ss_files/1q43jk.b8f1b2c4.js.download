(this.$WP=this.$WP||[]).push(["1q43jk",(e,i)=>{"use strict";var l,r,t,a,n,o,s,d,c,u,v,m,p,f,h,y,T,b,k,I,g,N,w,R,q,C,B,S,_,j,z,M={__key:18026724777579,id:"10652c86de6b382267b0eedc3e72a8da",loc:{},definitions:[]},A=()=>"invalidateAndRefetch",D=()=>{var e,i=f(),l=(null==i||null==(e=i.params)?void 0:e.geoId)||1,[{fetching:t,data:a},n]=g({query:M,variables:{geoId:l},pause:!0},{addItemToTrip:A,tripsRemoveItem:A,tripsRemoveReference:A,createTrip:A,Trips_createTrip:A}),o=r((()=>{n({requestPolicy:"network-only"})}),[n]);return[{fetching:t,recentTrip:null==a?void 0:a.userTrip,geoId:l},o]},E=e=>R("div",{className:e.isMobile?"muhZz":null,children:R(N,{saveObject:{id:e.id,type:e.type},allowPopStatModal:!0,children:(i,l)=>R(w,{active:l,onClick:i,decorated:!1,bookmarkStyle:"outline",bookmarkSize:"20",asButton:!0,fullWidth:e.isMobile,children:()=>"Save to Trip"})})}),L={__key:2689667834694,id:"02723cb22346f4436ee794ffc912e864",loc:{},definitions:[]},O=e=>{var i,l,r,t,[a]=B({query:L,variables:{locationId:e||1},pause:!e});return a.fetching||a.error?null:null==(i=a.data)||null==(l=i.locations)||null==(r=l[0])||null==(t=r.names)?void 0:t.name},W=(e,i,l)=>{var o=t(i),s=t(l),[d,c]=a(!1),u=r((()=>c(!1)),[c]);return n((()=>{if(!e)return()=>{};var i=setTimeout((()=>c(!0)),o.current);return()=>clearTimeout(i)}),[e,o]),n((()=>{if(!d)return()=>{};var e=setTimeout(u,s.current);return()=>clearTimeout(e)}),[d,u,s]),n((()=>d?(window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}):()=>{}),[d,u]),[d,u]},Z="gyhvZ",x="olcnV",P=({onDismiss:e,isMobile:i,geoId:l})=>{var r=j(l);return r?q("div",{className:"Rdavf D",children:[R(T,{on:"bottom",from:i?"center":"left",offset:20}),R("div",{className:"oRSbw b",children:"Let's keep planning!"}),q("div",{className:"EyNtG H5",children:["See a hotel that looks good to you? Simply click",R("span",{className:"qKrMm B1 Z BB",children:R("span",{className:"EvTyu",children:R(d,{})})}),"to save and view it on a map for your upcoming trip to ",r,"."]}),R(m,{variant:"primary",onClick:e,children:"Got it!"})]}):null},Q=(e,i)=>((null==e?void 0:e.detailCounts)||[]).filter({hotels:e=>"ACCOMMODATION"===(null==e?void 0:e.locationType),restaurants:e=>"EATERY"===(null==e?void 0:e.locationType),attractions:e=>"ATTRACTION"===(null==e?void 0:e.locationType)||"ACTIVITY"===(null==e?void 0:e.locationType)||"attractionproduct"===(null==e?void 0:e.saveType)}[i]).map((e=>(null==e?void 0:e.count)||0)).reduce(((e,i)=>e+i),0),V=({footerShownCallback:e})=>{var i,r,t=h(),a=f(),n=(null==a||null==(i=a.params)?void 0:i.detailId)||null,m="MOBILE"===t,[{fetching:T,recentTrip:g,geoId:N}]=S(),w=y(),B=null==g||null==(r=g.route)?void 0:r.url,j=k(),M=I(),[A,D]=z((e=>{if(e){var i=Date.parse(e);return Date.now()-i<=5e3}return!1})(null==g?void 0:g.created),2e3,3e3),E=!T&&void 0!==(null==g?void 0:g.id)&&(e=>{if(e){var i=Date.parse(e);if((Date.now()-i)/864e5>30)return!1}return!0})(null==g?void 0:g.updated);return l.useEffect((()=>{if(e&&e(E),E){var i=null==g?void 0:g.id;i&&w&&b.set("mostRecentlyAddedToTrip",{tripId:i,userId:w},144e5),M({trips:{element:"view_persistent_footer",tripId:null==g?void 0:g.id}})}}),[e,E,M,g,w]),E?q(C,{children:[q("div",{className:"kcxIj D B1 Z BB k",children:[q("div",{className:"RnKfS Cj",children:[q("div",{className:"yXCZj k",children:[R("div",{className:"b q o W",children:null==g?void 0:g.title}),q("div",{className:"RhIkn q",children:[R(d,{size:22}),R("span",{className:x,children:null==g?void 0:g.size})]})]}),q("div",{className:"sQhRc",children:[R(c,{size:22}),R("span",{className:x,children:Q(g,"hotels")}),R(s,{size:22}),R("span",{className:x,children:Q(g,"attractions")}),R(u,{size:22}),R("span",{className:x,children:Q(g,"restaurants")})]})]}),q("div",{className:"bBWzk q",children:[n&&R("div",{className:o(Z,"aNepR"),children:R(_,{isMobile:m,id:n,type:"location"})}),R("div",{className:Z,children:R("a",{href:B,children:R(v,{legacyStyled:!1,fullWidth:m,size:m?"small":"medium",onClick:()=>{j({Trips:{elementClick:{element:"omni_trip_view"}}})},children:R(p,{id:"cx_trips_view_cta"})})})})]})]}),A&&R(P,{onDismiss:D,isMobile:m,geoId:N})]}):null};return[()=>{S=D,_=E,j=O,z=W,e("default",V)},[e=>(l=e,r=e.useCallback,t=e.useRef,a=e.useState,n=e.useEffect),e=>o=e.default,e=>s=e.default,e=>d=e.default,e=>c=e.default,e=>u=e.default,e=>(v=e.default,m=e.BorderlessButton),e=>p=e.default,e=>f=e.useRoute,e=>h=e.useViewportCategory,e=>y=e.useUserId,e=>T=e.Arrow,e=>b=e.default,e=>k=e.useInteractionLogger,e=>I=e.useImpressionLogger,e=>g=e.useInvalidatableQuery,e=>N=e.QueriedTripFlowSelector,e=>w=e.BookmarkIcon,e=>(R=e.jsx,q=e.jsxs,C=e.Fragment),e=>B=e.useQuery]]},["1o4yt4","fkji80","s1ymgp","1l75rc","1c5q3i","o3mm96","jppfwt","17thqz","fgwvq1","1ys6v1","52far5","79a2um","19b9b1","32pwc7","1vumu0","1fbuhs","9rb8bq","1hfpjv","121h32","1mqwhq"]]);
