(this.$WP=this.$WP||[]).push(["1c6byb",(e,n)=>{"use strict";var t,s,i,a,o,l,r,c,d,p,u,g,h,m,_,v,I,f,k,x,w,q,T,S,y,R=(e,n)=>{e&&fetch("/AnswersAjax",{credentials:"same-origin",method:"POST",body:t(e),headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).then(n)},N=({locationId:e,topicId:n,text:t,requestValidation:s,onResponse:i})=>{if(t){var a={act:"ap",psttxt:t,tpcid:n,pid:-1,altsessid:s.altSessionId,token:s.csrfToken,lcid:e,"g-recaptcha-response":s.captchaResponse.token,geetest_challenge:s.captchaResponse.challenge,geetest_validate:s.captchaResponse.validate,geetest_seccode:s.captchaResponse.seccode,useJson:!0};R(a,i)}},b=({locationId:e,text:n,optIn:t,redirect:s,requestValidation:i,onResponse:a})=>{if(n){var o={act:t?"ats":"at",topicText:n,detail:e,pid:-1,optIn:t,altsessid:i.altSessionId,token:i.csrfToken,"g-recaptcha-response":i.captchaResponse.token,geetest_challenge:i.captchaResponse.challenge,geetest_validate:i.captchaResponse.validate,geetest_seccode:i.captchaResponse.seccode,redirect:s};R(o,a)}},P=({id:e,token:n,onResponse:t})=>{e&&R({act:"dp",pstid:e,token:n},t)},$=({id:e,token:n,onResponse:t})=>{e&&R({act:"dt",tpcid:e,token:n},t)},L=(e,n,t,s)=>{var a={altsessid:t.altSessionId||"",act:"av",pstid:n,vs:e,pid:-1,token:t.csrfToken,useJson:!0};R(a,s),i({module:"faq",action:"click",context:1===e?"upvote":"downvote"})},M=({postingId:e,requestValidation:n,onResponse:t})=>{L(1,e,n,t)},j=({postingId:e,requestValidation:n,onResponse:t})=>{L(-1,e,n,t)},C=({topic:e,query:n,children:t,expanded:s,newPostingId:i})=>{var l=!(!i||e.topPosting&&e.topPosting.id===i),r=e.topPosting?[e.topPosting]:[],c={fetchTopic:s,fetchPosting:l,topicId:s?e.id:null,postingId:i};return o(a,{query:n,variables:c,requestPolicy:"network-only",children:({fetching:n,data:i})=>((e,n,t,s,i,a,o)=>{if(n&&t){var l=[a.topPosting];return i&&l.unshift(null),t&&l.push(...Array(a.postCount-1).fill(null)),s(l)}if(!e)return s(o);var r=i&&e.postings&&e.postings[0]?e.postings[0]:null,c=t&&e.topics&&e.topics[0]?e.topics[0].postings:o;return s(t||i?r?[r,...c.filter((e=>e&&e.id!==r.id))]:c:c.length>0?[c[0]]:[])})(i,n,s,t,l,e,r)})},E=({loggedInUserId:e,csrfToken:n,altSessId:t,call:s,isMobile:i,children:a})=>o(l,{children:a((()=>{if(e)s({csrfToken:n,altSessId:t});else{var a={flow:"CORE_COMBINED",pid:-1,userRequestedForce:!0,onSuccess:()=>s({csrfToken:n,altSessId:t})};globalThis.require(["trjs!ta/registration/RegOverlay"],(e=>e.showRegOverlay(null,null,i,a)))}}))}),A="SzvEE",z=e=>{var{localize:n}=u();return r("ul",{children:[e.location&&e.location.geoName?o("li",{className:A,children:n("qa_guidelines_relevant_visit",{loc_name:e.location.geoName})}):null,e.location&&e.location.parentGeoId?o("li",{className:A,children:o("span",{dangerouslySetInnerHTML:{__html:n.string("qa_guidelines_forums_new_tab",{forum_link:m({page:"ShowForum",g:e.location.parentGeoId})})}})}):null,o("li",{className:A,children:n("qa_guidelines_objective")}),o("li",{className:A,children:n("qa_guidelines_links")}),o("li",{className:A,children:o("span",{dangerouslySetInnerHTML:{__html:n.string("qa_guidelines_adhere_new_tab",{help_link:"https://www.tripadvisorsupport.com/hc/articles/201996887"})}})})]})},O=({modalName:e,location:n})=>{var{localize:t}=u();return r(_,{name:e,children:[o("div",{className:"ZxeMp MF",children:t("qa_guidelines_before")}),o("div",{className:"LurUT",children:t("qa_please_keep")}),o(q,{location:n})]})},V={guidelinesControl:"S2 C5 NB _S",community:"BqJol d _S",linkText:"kSqhw"},F=({locationId:e,topicId:n,postingId:t,contentLanguage:i,pageLanguage:a,children:c})=>{if(i===a)return null;var d,p=i.replace(/^zh/,"zh-"),u=["toverlay",e,n,t,p,a].join("-");return d=t?`/MachineTranslation?g=0&d=${e}&t=${n}&lp=${t}&page=posting&sl=${p}&tl=${a}`:`/MachineTranslation?g=0&d=${e}&t=${n}&page=topic&sl=${p}&tl=${a}`,r(l,{children:[o(h,{name:u,children:c}),o(_,{name:u,children:o(s,{url:d,children:({loading:e,data:n})=>e?o(v,{}):o("div",{className:"VBSHE",dangerouslySetInnerHTML:{__html:n}})})})]})};return[()=>{k={submitAnswer:N,submitQuestion:b,deleteAnswer:P,deleteQuestion:$,upVote:M,downVote:j},x=C,w=c((e=>({loggedInUserId:e.auth.loggedInUserId,csrfToken:e.auth.csrfToken,altSessId:e.auth.altSessId,isMobile:"MOBILE"===e.meta.device.viewportCategory})))(E),q=z,T=O,e("PostingGuidelinesLink$1",f=class extends d{constructor(...e){super(...e),this.state={expand:!1},this.toggleExpansion=()=>{this.setState((e=>({expand:!e.expand})))}}render(){var{theme:e,location:n,inlineExpansion:t}=this.props,{expand:s}=this.state,i=s?"caret-up":"caret-down";return r(l,{children:[r("div",{className:e&&V[e]||V.guidelinesControl,onClick:t?this.toggleExpansion:null,children:[t?o("span",{className:V.linkText,children:o(p,{id:"qa_posting_guidelines"})}):r(l,{children:[o(h,{name:`posting_guidelines_${n.locationId}`,children:e=>o("span",{className:V.linkText,onClick:e,children:o(p,{id:"qa_posting_guidelines"})})}),o(T,{modalName:`posting_guidelines_${n.locationId}`,location:n})]}),t?o(g,{name:i}):null]}),s?o(q,{location:n}):null]})}}),f.defaultProps={theme:void 0,inlineExpansion:!1},S=f,F.defaultProps={postingId:void 0},y=c((e=>({pageLanguage:I(e)})))(F),e({AnswerProvider:x,AuthGated:w,PostingGuidelinesLink:S,TranslateModal:y,answersAjax:k})},[e=>(t=e.formEncode,s=e.AjaxRequest),e=>i=e.default,e=>a=e.Query,e=>(o=e.jsx,l=e.Fragment,r=e.jsxs),e=>c=e.connect,e=>d=e.Component,e=>(p=e.default,u=e.useLocalize),e=>g=e.Icon,e=>h=e.Opener,e=>m=e.buildUrl,e=>_=e.Modal,e=>v=e.LoadingSpinner,e=>I=e.contentLangFromState]]},["1w1pct","4axon3","1mqwhq","121h32","12mj4n","1o4yt4","17thqz","1ybxsm","80hn7v","bvvaww","18m6oj","1l9qeu","jlm8x1"]]);
