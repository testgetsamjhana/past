(this.$WP=this.$WP||[]).push(["poggee",(e,r)=>{"use strict";var t,o,i,a,n,l,d,s,u,c,p,v,m,g,h,f,I,T,y,b=({loggedInUserId:e,args:{title:r,scrollToReference:n},onClose:l,loading:d,data:s,error:u,isIOSSafari:c})=>{var g=s&&s.tripsGetOne,f=g&&h(g,e),y=t((()=>{window.location.reload(!0)}),[]);o((()=>{f&&y()}),[f,y]),o((()=>{d||g||!u||(console.error("A service error occurred in the TripModal query",u),y())}),[d,g,u,y]);var[b,w]=i(!1);return I(v,{title:!b&&r,onClose:l,children:I(p,{onError:y,errorRenderer:()=>I(m,{}),children:I(a,{fallback:I(m,{}),children:!g||d||f?I(m,{}):I(T,{trip:g,scrollToReference:n,onMobileMapMaximized:c?w:void 0})})})})},w=e=>{var r=e.args.id,t=({variables:{tripId:e}})=>e===r?"invalidateAndRefetch":"validate",[o]=f({query:g,variables:{tripId:r,socialReference:!0}},{addItemToTrip:t,tripsRemoveItem:t,tripsRemoveReference:t,updateTrip:t,organizeTrip:t,addTripItemComment:t,updateTripComment:t,tripsCommentsRemoveOne:t});return I(b,{...e,loading:o.fetching,data:o.data,error:o.error})},C=()=>{var{route:{tripModal:e,...r},navigate:o}=l(s),i=d((()=>{if(e&&"object"==typeof e&&e.id)return{tripId:e.id}}),[e]),a=t((()=>{var e,t;null!=(null==(e=window)||null==(t=e.history)?void 0:t.state)?(document.dispatchEvent(new CustomEvent("modalClosingEvent")),window.history.back()):o(r)}),[o,r]);return i?I(u.Provider,{value:i,children:I(y,{args:e,onClose:a})}):null};return[()=>{T=n((()=>r("u311h0"))),y=c((e=>({loggedInUserId:e.auth.loggedInUserId,isIOSSafari:"SAFARI"===e.meta.device.browser.family&&"IOS"===e.meta.device.os.family})))(w),e("default",C)},[e=>(t=e.useCallback,o=e.useEffect,i=e.useState,a=e.Suspense,n=e.lazy,l=e.useContext,d=e.useMemo),e=>s=e.RouteContext,e=>u=e.SponsorshipTrackingContext,e=>c=e.connect,e=>p=e.ErrorBoundary,e=>(v=e.TripModalViewLayout,m=e.TripDetailSkeletonLoader),e=>g=e.GetFullTrip,e=>h=e.isTripUser,e=>f=e.useInvalidatableQuery,e=>I=e.jsx]]},["1o4yt4","bvvaww","1k7dpq","12mj4n","183pm0","1t5lgq","ag9b0s","1iyqcw","1fbuhs","121h32"]]);
