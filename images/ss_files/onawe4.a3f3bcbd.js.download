(this.$WP=this.$WP||[]).push(["onawe4",(e,t)=>{"use strict";var i,o,n,s,r,l,a,d,c,p,_,u="SP_PARTNER_NOTIFICATION_IFRAME",m=(e,t,i,o,s)=>{var r={};e&&(r={placement_slot_name:e.sponsoredPlacementSlot.name,location_id:e.locationId,sponsored_type:e.sponsoredType,sl_line_item_id:e.slLineItemId,page_geo_id:t,chosen_location_id:e.locationId,listing_key:e.listingKey,trip_ads_select_guid:e.tripAdsSelectRequestGuid,trip_ads_id:e.tripAdsId}),n(i,o,{...r,...s})},g=(e,t)=>{e.tripAdsSelectRequestGuid&&t(e.tripAdsSelectRequestGuid,"")},y=({sponsoredListingData:e,delayedPartnerNotificationUrl:t})=>(p((()=>{((e,t)=>{var i,n,l;if(t&&(n=t,(l=document.getElementById(u))||((l=document.createElement("iframe")).setAttribute("id",u),l.setAttribute("style","position: absolute; visibility: hidden; right: 0; bottom: 0; width: 1px; height: 1px"),d(c.ALL,(()=>{document.body&&l&&document.body.appendChild(l)}))),l.src=n),e){var a=o().getState();null!=a&&null!=(i=a.meta)&&i.lineItemsByLoc&&(((e,t)=>{m(e,t,"impression","paid_backup_sponsored_listing_displayed",{})})(e,a.page.geoId),s(e.partnerImpressionNotificationURL),g(e,r))}})(e,t),e&&globalThis.require(["commerce/offerclick"],(t=>{t.on("afterClick",(t=>{((e,t)=>{var i;if(e){var n=o().getState();if(null!=n&&null!=(i=n.meta)&&i.lineItemsByLoc){var{url:s,...r}=t,d=t.isBooking?"paid_backup_sponsored_ib_click":"paid_backup_sponsored_meta_click";m(e,n.page.geoId,"action",d,r);var c=((e,t)=>"DISCOVERY_META_PREFERENCE"===e.sponsoredType&&"1"===t.slot)(e,t);c&&((e,{route:t},i,o,n)=>{if(e){var s={area:e.sponsoredPlacementSlot.name,click_type:i,dest:o,from:t.page,is_backfill:!0,listing_key:e.listingKey,location_id:e.locationId,sl_line_item_id:e.slLineItemId,trip_ads_id:e.tripAdsId,auction_offer_key:n};fetch("/SponsoredListingCommerce/1.0/increment_click_metric",{method:"POST",headers:{"content-type":"application/json","x-requested-by":window.JS_SECURITY_TOKEN},credentials:"same-origin",body:JSON.stringify(s)}).then((e=>(e.ok||e.statusText,e))).catch((e=>{console.error(`Error sending commerce click: ${e.message}`)}))}})(e,n,"META",t.providerName,t.ttAOK),g(e,c?l:a)}}})(e,t)}))}))}),[e]),null),f=e=>{var t,i;return _(y,{sponsoredListingData:null==e||null==(t=e.listing)?void 0:t.sponsoredListingData,delayedPartnerNotificationUrl:null==e||null==(i=e.listing)?void 0:i.delayedPartnerNotificationUrl})},E=({optimusEnabled:e})=>_(i,{optimusEnabled:e,children:e=>_(f,{...e})});return[()=>{e({HotelReviewSpTrackingRenderer:f,default:E})},[e=>i=e.MetaQueryPoller,e=>o=e.getStore,e=>n=e.trackEventWithContext,e=>(s=e.notifyPartner,r=e.logTripAdsImpressionEvent,l=e.logTripAdsClickEvent,a=e.logTripAdsClickUnpaidEvent),e=>(d=e.requestConsent,c=e.CategoriesEnum),e=>p=e.useEffect,e=>_=e.jsx]]},["1nzwvr","45ddp0","4axon3","141w2j","1973cc","1o4yt4","121h32"]]);
