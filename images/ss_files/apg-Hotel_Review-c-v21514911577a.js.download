require(['ta/rollupAmdShim'], function(rollupAmdShim) {rollupAmdShim.install(["servlets/reacthotelreview-pl","ta/prwidgets","ta/p13n/placements-ajax","ta/Core/TA.Event","ta/Browser","ta/Core/TA.Record","ta/util/SessionStorage","ta/util/Error","facebook/authutils","common/Radio","lib/jquery-amd","ta/registration/RegEvents","utils/throttle","utils/asdf-encoder","ta/util/CommonMessagingUtil","api-mod","ta/Core/TA.LocalStorage","ta/Core/TA.Store","utils/urlDecoder","hotels/recentlyViewedHotels","utils/ScrollInContainer","ta/sales/metaClickComScoreTag"],["ta","page-model"]);});
if(window.requirejs && requirejs.taConfig)requirejs.taConfig({"deferred":{},"name":"build/concat/apg-Hotel_Review","files":{"js3_secure":{"ssl":{"ta":{"Core":{"TA.Record":1}}}},"js-amd":{"src":{"hotels":{"recentlyViewedHotels":1},"utils":{"throttle":1,"ScrollInContainer":1,"urlDecoder":1,"asdf-encoder":1},"api-mod":1,"facebook":{"authutils":1},"servlets":{"reacthotelreview-pl":1}}},"js3":{"lib":{"jquery-amd":1},"build":{"es6":{"src":{"common":{"Radio":1}}}},"src":{"ta":{"util":{"CommonMessagingUtil":1,"Error":1,"SessionStorage":1},"prwidgets":1,"registration":{"RegEvents":1},"sales":{"metaClickComScoreTag":1},"Browser":1,"Core":{"TA.Event":1,"TA.LocalStorage":1,"TA.Store":1},"p13n":{"placements-ajax":1}}}}},"_":{"baseUrl":"/"}});
define("mixins/page-dates/DateEvents",["mixins/Events","common/Radio"],function(E,e){"use strict";var n={DATE_SELECTED:"dateSelected",CALENDAR_OPENED:"calendarOpened"},t=new E(n.DATE_SELECTED,n.CALENDAR_OPENED);return e("wcDateEventsRadio").on(n.DATE_SELECTED,function(){Array.prototype.unshift.call(arguments,n.DATE_SELECTED),t.emit.apply(t,arguments)}),t});
define("common/pixels-loader",["vanillajs","mixins/page-dates/DateEvents","ta/Core/TA.FireEvent"],function(n,o,i){"use strict";function e(){return Date.now()-r}function t(n){console.log("pixels-loader: "+e()+" "+n)}var a,r,c=2e3,l=!1;r=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();var s=function(){l&&t("_load starting"),window.require(["trjs!ta/common/behavior/Ads-pagemoniker"],function(n){l&&t("Ads-pagemoniker starting"),n.loadMonikers(),o.on("dateSelected",function(o,i){"STAYDATES"==i&&window.setTimeout(n.loadMonikerForEnterDates,2e3)})}),a&&a.shouldInitFlightsEvents&&u(),s=function(){}},u=function(){var n=new Promise(require.bind(null,["trjs!ta/common/behavior/Ads-pagemoniker"]));i.on("lcbPop",function(){n.then(function(n){n.loadMonikerForLCBPop()})}),i.on("packageClick",function(){n.then(function(n){n.loadVacationPackageMetaMonikers()})}),i.on("metaLinkClickPixelLoad",function(o){n.then(function(n){n.loadFlightsMetaMonikers(o)})}),i.on("metaLightboxLoad",function(o){n.then(function(n){n.loadLightboxMonikers(o)})}),i.on("flightSearchPixelLoad",function(){n.then(function(n){n.loadMonikerForFlightSearch()})})};return{init:function(n){a=n,n&&n.pixelsEnabled&&(n.pixelLoadingTracing&&(l=!0),n.hotelsPixelLoadingStrategyEnabled?(l&&t("init: setting timeout of zero before running _load"),setTimeout(s,0)):(l&&t("init: setting timeout"),setTimeout(s,c)))},remarketingOptions:function(){return a}}});
define("lib/jquery/jquery.hoverIntent",["lib/jquery-amd"],function(e){"use strict";var t,n,i={interval:100,sensitivity:6,timeout:0},o=0,r=function(e){t=e.pageX,n=e.pageY},u=function(e,i,o,v){return Math.sqrt((o.pX-t)*(o.pX-t)+(o.pY-n)*(o.pY-n))<v.sensitivity?(i.off(o.event,r),delete o.timeoutId,o.isActive=!0,e.pageX=t,e.pageY=n,delete o.pX,delete o.pY,v.over.apply(i[0],[e])):(o.pX=t,o.pY=n,o.timeoutId=setTimeout(function(){u(e,i,o,v)},v.interval),void 0)},v=function(e,t,n,i){return delete t.data("hoverIntent")[n.id],i.apply(t[0],[e])};return function(t,n,a){var s=o++,d=e.extend({},i);e.isPlainObject(t)?(d=e.extend(d,t),e.isFunction(d.out)||(d.out=d.over)):d=e.isFunction(n)?e.extend(d,{over:t,out:n,selector:a}):e.extend(d,{over:t,out:t,selector:n});var p=function(t){var n=e.extend({},t),i=e(this),o=i.data("hoverIntent");o||i.data("hoverIntent",o={});var a=o[s];a||(o[s]=a={id:s}),a.timeoutId&&(a.timeoutId=clearTimeout(a.timeoutId));var p=a.event="mousemove.hoverIntent.hoverIntent"+s;if("mouseenter"===t.type){if(a.isActive)return;a.pX=n.pageX,a.pY=n.pageY,i.off(p,r).on(p,r),a.timeoutId=setTimeout(function(){u(n,i,a,d)},d.interval)}else{if(!a.isActive)return;i.off(p,r),a.timeoutId=setTimeout(function(){v(n,i,a,d.out)},d.timeout)}};return this.on({"mouseenter.hoverIntent":p,"mouseleave.hoverIntent":p},d.selector)}});
define("ta/util/Element",["lib/jquery-amd","utils/ajax","ta/Core/TA.Record","ns-exporter","ta/Core/TA.Event","lib/jquery/jquery.hoverIntent","utils/throttle"],function(t,e,i,n,o,r,a){function l(e,i){var n=e.style.fontSize||t(e).css("font-size"),o=n.replace(/[\d\.]/g,""),r=c(o,parseFloat(n)*i);e.style.fontSize=r+o}function s(){function e(e,i){var r=n[e],a=t(r.e);if(a.length>0){var l=r.inView;r.inView=!1,a.each(function(){return!r.inView&&void(r.inView=o.inViewport(this,i,r.persistentElmt,r.offset))}),!l&&r.inView&&(r.cb&&r.cb(r.e),r.multiple||n.splice(e,1))}}function i(){var e=t(window),i={};return i.top=e.scrollTop(),i.left=e.scrollLeft(),i.bottom=i.top+e.height(),i.right=i.left+e.width(),i}var n=[],o=this;this.add=function(i){n.push(i),e(n.length-1),n.length>0&&t(window).on("resize scroll",r)},this.inViewport=function(e,n,o,r){if(e=t(e),!e.is(":visible"))return!1;if(r=t.extend({top:0,left:0,right:0,bottom:0},r),o){var a=o.offsetHeight;a&&(0==o.offsetTop?r.bottom-=a:r.top+=a)}var l=e.offset();return n||(n=i()),n.bottom>=Math.max(l.top+r.top,0)&&n.right>=Math.max(l.left+r.left,0)&&n.top<=Math.max(l.top+e.height()+r.bottom,0)&&n.left<=Math.max(l.left+e.width()+r.right,0)};var r=a(function(){if(n.length){for(var o=i(),a=n.length-1;a>=0;a--)e(a,o);0==n.length&&t(window).off("resize scroll",r)}},300);t(window).on("load",r)}var f={};f.replaceContent=function(i,n,o,r){if(n=t(n),!n.find(".progresstab")){var a=o+(o.indexOf("?")==-1?"?":"&")+"xhr=true";n.append('<div class="progresstab"></div>'),e({url:a,success:function(t){n.html(t),window.behavior&&window.behavior.apply(n),r&&r(n.get(0))},evalScripts:!0}).get()}},f.spinner=function(e,i){t(i).parents(".spinnerReplaceable").children().each(function(t,e){e.toggle(e.hasClass("spinner"))})},f.limitLength=function(t,e,i){return!(e.value.length>=i)||(e.value=e.value.substr(0,i),!1)},f.updateValue=function(e,i){if(e=t(e),e.length>0&&e.val()!=i){e.val(i);var n=document.createEvent("HTMLEvents");n.initEvent("change",!1,!1),e[0].dispatchEvent(n)}},f.keepInWindow=function(e,i){function n(t,e){var i=parseInt(t.get(0).style[e]);return i||0===i}if(e){e=t(e),i||(i={top:!0,right:!0,bottom:!0,left:!0});var o=2,r=e.offset();r.right=r.left+e.width(),r.bottom=r.top+e.height();var a=t(window),l=a.width(),s=a.height(),f=a.scrollTop(),c=a.scrollLeft();i.right&&n(e,"right")?r.left<c+o?e.css("right",l+c-e.width()-o):r.right>l-c-o&&e.css("right",o):i.left&&n(e,"left")&&(r.left<c+o?e.css("left",o):r.right>l-c-o&&e.setStyle("left",l+c-r.width-o)),i.bottom&&n(e,"bottom")?r.top<f+o?e.setStyle("bottom",s+f-r.height-o):r.bottom>s-f-o&&e.setStyle("bottom",o):i.top&&n(e,"top")&&(r.top<f+o?e.setStyle("top",o):r.bottom>s-f-o&&e.setStyle("top",s+f-r.height-o))}};var c=function(t,e){var i=e;return"px"==t?i=8:"em"==t?i=.5:"pt"==t?i=6:"%"==t&&(i=50),Math.max(e,i)};f.makeTextFit=function(e,i,n,r,a){a=a||1,r=r||8;var l=!1;if(t(e).each(function(e,o){o=t(o);var a=o.find(i);if(a){var s;if("number"==typeof n)s=n;else if(s=o.find(n).outerHeight(),void 0===s)return;var f=a.height();if(s<f){var c=a.css("font-size");if(c){var u=function(t,e){return"px"==e&&t>=r||"em"==e&&t>=.5||"pt"==e&&t>6||"%"==e&&t>=50},h=c.replace(/[\d\.]/g,""),d=parseFloat(c)*Math.sqrt(s/f);"px"==h&&(d=Math.max(parseInt(d),r)),u(d,h)&&(a.css("font-size",d+h),l=!0)}}}}),l>0&&a<4){o.fireEvent("makeTextFitResizedText");var s=this;setTimeout(function(){s.makeTextFit(e,i,n,r,a+1)},1)}},function(){function e(t){var e=!1;if(!t||t.clientWidth&&t.clientWidth<=0)return!1;for(var i=t.clientWidth,n=(parseFloat(t.style.paddingLeft)||0)+(parseFloat(t.style.paddingRight)||0),o=0;o<a&&t.scrollWidth>i;o++){var r=(i-n)/(t.scrollWidth-n);l(t,r),e=!0}return t.scrollWidth>i&&(l(t,s),e=!0),e}function i(t,e){var i=t.getAttribute("data-sizegroup"),n=parseFloat(t.style.fontSize);i&&(e[i]=Math.min(e[i]||Number.MAX_VALUE,n))}function n(t){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i],o=[];n.forEach(function(t){o.push([t.scrollWidth,t])}),o.sort(function(t,e){return e[0]-t[0]});for(var r=0;r<o.length&&e(o[r][1]);r++);}}function r(t){var i;for(var n in t)t.hasOwnProperty(n)&&(i={},t[n].forEach(function(t){var n=t.innerHTML,o=i[n];void 0!==o?0!=o&&(t.style.fontSize=o):e(t)?i[n]=t.style.fontSize||0:i[n]=0}))}var a=4,s=.9;f.makeTextFitOneLine=function(i,n){var o=t(i);if(o.each(function(t,i){e(i)}),n){var r;o.each(function(e,i){var n=t(i).css("font-size");(!r||parseFloat(n)<parseFloat(r))&&(r=n)}),r&&o.css("font-size",r)}},f.autoResizeTextInNode=function(o){o=t(o);var a=t(".autoResize",o),l={},s={width:{},text:{}};a.filter(":visible").removeClass("autoResize").each(function(t,n){var o,r,a=n.getAttribute("data-resizeWidthGroup"),f=n.getAttribute("data-resizeTextGroup");a?(o=s.width,r=a):f&&(o=s.text,r=f),o?(o[r]||(o[r]=[]),o[r].push(n)):(e(n),i(n,l))}),n(s.width),r(s.text),a.each(function(t,e){var i=e.getAttribute("data-sizegroup");i&&(e.style.fontSize=l[i]+"px")})},o.queueForLoad(function(){require.defined("ta/Core/TA.Store")&&require("ta/Core/TA.Store").retrieve("no-old-resize")||(o.on("refreshedDOMContent",function(t){f.autoResizeTextInNode(t)}),document.body&&f.autoResizeTextInNode(document.body))},"autoResize all targets on load")}(),f.makeSameWidth=function(e){var i=0;t(e).each(function(t,e){var n=Math.round(parseFloat(e.style.width));n&&n>i&&(i=n)}).css("width",i)},f.fitToContentsHorizontally=function(e,i,n,o){if(o=o||1,!(o<=0||i>n)){var r=function(t){return t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight};t(e).each(function(t,e){e.style.width=i;for(var a=i;a<n&&r(e);a+=o)e.style.width=a;r(e)&&(e.style.width=n)})}},f.scrollIntoView=function(e,i,n,o){if(e){e=t(e);var r=e.offset().top+(i||0);if(n){for(var a=t("html, body"),l=e.parent(),s=function(t){return("auto"===t.css("overflow-y")||"scroll"===t.css("overflow-y"))&&t[0].scrollHeight>t[0].clientHeight};l.length&&!l.is(a)&&!s(l);)l=l.parent();l.length&&!l.is(a)&&s(l)?r=l.offset().top+l.scrollTop()+(i||0):l=a,l.animate({scrollTop:r},{duration:300,complete:function(){o&&o()}})}else window.scrollTo(0,r),o&&o()}};var u=f.scrollTrackers=new s;return f.isScrolledIntoView=function(t,e,i){return u.inViewport(t,null,e,i)},f.doIfElementIsVisible=function(t,e,i,n){t&&u.add({e:t,cb:function(){return e.apply(null,i),!0},offset:n})},f.trackWhenScrolledIntoView=function(t,e,n){if(t&&e){var o=function(){i.trackEventOnPage.apply(i,e)};u.add({e:t,cb:o,multiple:n})}},f.getTotalWidth=function(e){return t(e).outerWidth(!0)||0},f.getTotalHeight=function(e){return t(e).outerHeight(!0)||0},f.hoverIntent=function(e,i){r.bind(t(e),i)()},n.exportTo(f,"ta.util.element"),f});
define("ta/common/behavior/Ads-pagemoniker",["vanillajs","ns-exporter","common/trackingStreams","ta/Core/TA.Store","common/pixels-loader","ta/util/Element","ta/Core/TA.FireEvent"],function(e,o,r,n,t,i,l){function a(){return Date.now()-T}function _(e){console.log("ads-pagemoniker: "+a()+" "+e)}var u={};u.remarketingOptions=t.remarketingOptions()||{};var T,s=function(){return new Promise(function(e){window.require(["@ta/platform.runtime"],function(o){o.importBundle("@ta/platform.consent").then(function(o){o.enqueue(e)})})})},d=function(e){return void 0===u.remarketingOptions.pixelsEnabled&&(u.remarketingOptions=t.remarketingOptions()||{}),u.remarketingOptions[e]},M={OFFER_VIEW:"Monikers_OV",HAC_PRICES_LOADED:"Monikers_HPL",RESTAURANTS_OFFLINE_ATTRIBUTION:"Monikers_ROA",RESTAURANTS_PRODUCT_SELECTION:"Monikers_RPS",RESTAURANTS_PRODUCT_PAYMENT:"Monikers_RPP",RESTAURANTS_PRODUCT_CONVERSION:"Monikers_RPC",RESTAURANTS_NEW_REG_OWNER_FORM:"Monikers_NRO",RESTAURANTS_CONF_REG_OWNER:"Monikers_CRO",MEMBER_REGISTRATION_FORM:"Monikers_MRF",HOTEL_CLAIM_FORM_SUBMISSION:"Monikers_HCFS",STARTER_PACKAGES_PAGE_VIEW:"Monikers_SPPV",STARTER_PACKAGES_PROPERTY_SELECTION:"Monikers_SPPS",HOTELS_PRODUCT_CART_INITIATE_CHECKOUT:"Monikers_HPCIC",HOTELS_PRODUCT_CART_ADD_PAYMENT_INFO:"Monikers_HPCAP",HOTELS_PRODUCT_CART_PURCHASE:"Monikers_HPCPP",UPP_HOTELS_PRODUCT_CART_INITIATE_CHECKOUT:"Monikers_UPP_HPCIC",UPP_HOTELS_PRODUCT_CART_ADD_PAYMENT_INFO:"Monikers_UPP_HPCAP",UPP_HOTELS_PRODUCT_CART_PURCHASE:"Monikers_UPP_HPCPP",FACEBOOK_MC_RETARGETING:"Monikers_FMCR",PAID_FUNNEL_LEAD_CONVERSION:"Monikers_PFLC",MEMBER_CREATE:"Monikers_MC",SAVE_TO_TRIP:"Monikers_STT",SAVE_TO_TRIP_INTENT:"Monikers_STTI",PLUS_CONFIRM:"Monikers_PLUS_Confirm",PLUS_CHECKOUT:"Monikers_PLUS_Checkout",HOTELS_RECOVERY_PACKAGE_AD_LANDER:"Monikers_HRPAL",LINKEDIN_INSIGHT_TAG:"Monikers_LII_T",RESTAURANT_PRODUCT_SELECT_LISTING:"Monikers_RPSL",RESTAURANT_PRODUCT_SELECT_PRODUCT:"Monikers_RPSP",RESTAURANT_PRODUCT_PURCHASE:"Monikers_RP_PURCHASE",MENU_CONNECT_SELECT_LISTING:"Monikers_MCSL",MENU_CONNECT_SELECT_PRODUCT:"Monikers_MCSP",MENU_CONNECT_ORDER_CONFIRMATION:"Monikers_MCOC",LINKEDIN_CALL_WITH_CONVERSION_ID:"Monikers_LICWCI",YOUTUBE_CLAIM_LISTING_HOTEL:"Monikers_YCLH",YOUTUBE_SELECT_PRODUCT:"Monikers_YSP",YOUTUBE_ORDER_CONFIRMATION:"Monikers_YOC"},C=function(e){return"RESTAURANTS_OFFLINE_ATTRIBUTION"===e?M[e]+"_"+Math.floor(Math.random()*Math.floor(1e6)):M[e]},P="dates.enter.moniker.fired",c="hotel.prices.moniker.fired",E=!1,R=30,k="loc1",O="@@@loc1@@@",S="locId",A=10,I=1e3,p=function(){function e(){var r="",t="[data-pernight][data-locationid='"+n[a]+"']",u="[data-index][data-locationid='"+n[a]+"']",T=document.body.querySelector(t),s=document.body.querySelector(u);_<A&&!T?(_++,window.setTimeout(e,I)):(_<A&&(r=T.getAttribute("data-pernight")||""),s&&s.getAttribute("data-automation")&&s.getAttribute("data-automation").startsWith("plus-hotel-offer")&&l++,i.push(r),o=!0)}var o=!1;if(d("hotelPricesEnabled")){var r=d("pixelContext");if(r){var n,t=r.servlet,i=[];"Hotel_Review"===t?n=[r.curLocId.toString()]||"":(n=r.locIds||"",n=n.split(",").slice(0,R));for(var l=0,a=0;a<n.length;a++)if(n[a]){var _=0;e()}r.locPrices=i.join(","),r.plusCount="Hotel_Review"===t||"HotelHighlight"===t?document.body.querySelector("#OPTIMUS_OFFER")?1:0:l}}else o=!0;return o},F=function(){return!!p()&&(x(),!0)},N=!1;T=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();var f=function(){if(N&&_("_loadHotelPricesPixels starting"),d("hotelPricesEnabled")){var e=3,o=function(){!F()&&e--&&setTimeout(o,1e3)};o()}};u.loadMonikerForHotelPrices=function(e){var o=!1;return e&&(N=e.pixelLoadingTracing,o=e.hotelsPixelLoadingStrategyEnabled),N&&_("loadMonikerForHotelPrices starting"),o?void setTimeout(f,0):void f()},u.loadMonikers=function(e){try{if(!d("pixelsEnabled"))return null;e=e||{},e.pixelType="PAGEVIEW";var o=d("pixelContext");!o||"HotelBookingRoomSelectionHtml"!=o.servlet&&"MobileHotelBookingRoomSelection"!=o.servlet||(e.pixelType="IB_CLICK",u._addIBPageViewContext(e));var n=u._loadMonikers(e);return d("cacheMobileClickoutResponse")&&(e.pixelType="CLICKOUT",u._cacheClickoutMonikers(e)),n}catch(o){r.error(o,"ads.loadMonikers",null,{context:e})}return null},u.loadMonikerForEnterDates=function(e){try{if(!d("pixelsEnabled"))return null;n.retrieve(P)||(n.store(P,!0),p(),e=e||{},e.pixelType="ENTER_DATES",setTimeout(u._loadMonikers.bind(null,e),2e3))}catch(e){}};var x=function(e){try{if(!d("hotelPricesEnabled"))return null;n.retrieve(c)||(n.store(c,!0),u._loadMonikersForPixelType(e,"HAC_PRICES_LOADED"))}catch(e){}};return u.loadClickoutMonikers=function(e){try{return d("pixelsEnabled")&&d("clickoutPixelsEnabled")?u._cachedClickoutMonikerTextArr?u._appendMonikersIFrameText(u._cachedClickoutMonikerTextArr,e[S]||""):(e=e||{},e.pixelType="CLICKOUT",u._loadMonikers(e)):null}catch(o){r.error(o,"ads.loadClickoutMonikers",null,{context:e})}return null},u.loadLightboxMonikers=function(e,o){try{if(!d("pixelsEnabled"))return null;e=e||{},e.pixelType="LIGHTBOX_CLICK";var n=u._mergeContexts(e,o),t=u._loadMonikers(n);return t}catch(o){r.error(o,"ads.loadLightboxMonikers",null,{context:e})}return null},u.loadLightboxClickoutMonikers=function(e){try{return d("pixelsEnabled")&&d("clickoutPixelsEnabled")?(e=e||{},e.pixelType="LIGHTBOX_CLICKOUT",u._loadMonikers(e)):null}catch(o){r.error(o,"ads.loadLightboxClickoutMonikers",null,{context:e})}return null},u.loadIBClickMonikers=function(e){if(E)return null;var o=u._loadMonikersForPixelType(e,"IB_CLICK");return E=!0,o},u.loadIBRoomSelectMonikers=function(e){return u._loadMonikersForPixelType(e,"IB_ROOM_SELECT")},u.loadIBConfirmMonikers=function(e){return u._loadMonikersForPixelType(e,"IB_CONFIRM")},u.loadVRConfirmMonikers=function(e){return u._loadMonikersForPixelType(e,"VR_CONFIRM")},u.loadFlightsMetaMonikers=function(e){return null!=u._loadMonikersForPixelType(e,"FLIGHTS_META")?u._loadMonikersForPixelType(e,"LIGHTBOX_CLICKOUT"):null},u.loadMonikerForCarsMeta=function(e){return u._loadMonikersForPixelType(e,"CARS_META")},u.loadMonikerForCarsSearchResults=function(e){return u._loadMonikersForPixelType(e,"CARS_SEARCH_RESULTS")},u.loadVacationPackageMetaMonikers=function(e){return u._loadMonikersForPixelType(e,"PACKAGE_META")},u.loadMonikerForLCBPop=function(e){return u._loadMonikersForPixelType(e,"LCB_POP")},u.loadMonikerForFlightsMetaLightbox=function(e){return u._loadMonikersForPixelType(e,"LIGHTBOX_CLICK")},u.loadMonikerForFlightSearch=function(e){return u._loadMonikersForPixelType(e,"SEARCH")},u.loadMonikerForCruiseMeta=function(e){return u._loadMonikersForPixelType(e,"CRUISE_META")},u.loadMonikerForRestaurantsOfflineAttribution=function(e){return u._loadMonikersForPixelType(e,"RESTAURANTS_OFFLINE_ATTRIBUTION")},u.loadMonikerForRestaurantsProductSelection=function(e){return u._loadMonikersForPixelType(e,"RESTAURANTS_PRODUCT_SELECTION")},u.loadMonikerForRestaurantsProductPayment=function(e){return u._loadMonikersForPixelType(e,"RESTAURANTS_PRODUCT_PAYMENT")},u.loadMonikerForRestaurantsProductConversion=function(e){return u._loadMonikersForPixelType(e,"RESTAURANTS_PRODUCT_CONVERSION")},u.loadMonikerForRestaurantsNewRegOwnerForm=function(e){return u._loadMonikersForPixelType(e,"RESTAURANTS_NEW_REG_OWNER_FORM")},u.loadMonikerForRestaurantsConfirmedRegOwner=function(e){return u._loadMonikersForPixelType(e,"RESTAURANTS_CONF_REG_OWNER")},u.loadMonikerForHotelClaimFormSubmission=function(e){return u._loadMonikersForPixelType(e,"HOTEL_CLAIM_FORM_SUBMISSION")},u.loadMonikerForMcRetargeting=function(e){return u._loadMonikersForPixelType(e,"FACEBOOK_MC_RETARGETING")},u.loadMonikerForPaidFunnelConversion=function(e){return u._loadMonikersForPixelType(e,"PAID_FUNNEL_LEAD_CONVERSION")},u.loadMonikerForStarterPackagesPageView=function(e){return u._loadMonikersForPixelType(e,"STARTER_PACKAGES_PAGE_VIEW")},u.loadMonikerForStarterPackagesPropertySelection=function(e){return u._loadMonikersForPixelType(e,"STARTER_PACKAGES_PROPERTY_SELECTION")},u.loadMonikerForHotelsProductCartCheckout=function(e){return u._loadMonikersForPixelType(e,"HOTELS_PRODUCT_CART_INITIATE_CHECKOUT")},u.loadMonikerForHotelsProductCartAddPaymentInfo=function(e){return u._loadMonikersForPixelType(e,"HOTELS_PRODUCT_CART_ADD_PAYMENT_INFO")},u.loadMonikerForHotelsProductCartPurchase=function(e){return u._loadMonikersForPixelType(e,"HOTELS_PRODUCT_CART_PURCHASE")},u.loadMonikerForHotelsRecoveryPackageAdLander=function(e){return u._loadMonikersForPixelType(e,"HOTELS_RECOVERY_PACKAGE_AD_LANDER")},u.loadMonikerForLinkedInInsightTag=function(e){return u._loadMonikersForPixelType(e,"LINKEDIN_INSIGHT_TAG")},u.loadMonikerForUPPHotelsProductCartCheckout=function(e){return u._loadMonikersForPixelType(e,"UPP_HOTELS_PRODUCT_CART_INITIATE_CHECKOUT")},u.loadMonikerForUPPHotelsProductCartAddPaymentInfo=function(e){return u._loadMonikersForPixelType(e,"UPP_HOTELS_PRODUCT_CART_ADD_PAYMENT_INFO")},u.loadMonikerForUPPHotelsProductCartPurchase=function(e){return u._loadMonikersForPixelType(e,"UPP_HOTELS_PRODUCT_CART_PURCHASE")},u.loadMonikerForMemberRegistrationForm=function(e){return u._loadMonikersForPixelType(e,"MEMBER_REGISTRATION_FORM")},u.loadMonikerForCreateMemberSuccessful=function(e){return u._loadMonikersForPixelType(e,"MEMBER_CREATE")},u.loadMonikerForSaveToTripIntent=function(e){return u._loadMonikersForPixelType(e,"SAVE_TO_TRIP_INTENT")},u.loadMonikerForSaveToTrip=function(e){return u._loadMonikersForPixelType(e,"SAVE_TO_TRIP")},u.loadMonikerForRegistration=function(e,o){var r=u._mergeContexts(e,o);return u._loadMonikersForPixelType(r,"REGISTRATION_SUCCESS")},u.loadMonikerForPlusConfirm=function(e){return u._loadMonikersForPixelType(e,"PLUS_CONFIRM")},u.loadMonikerForPlusCheckout=function(e){return u._loadMonikersForPixelType(e,"PLUS_CHECKOUT")},u.loadMonikerForPlusBookingCheckout=function(e){return u._loadMonikersForPixelType(e,"PLUS_BOOKING_CHECKOUT")},u.loadMonikerForPlusBookingConfirmation=function(e){return u._loadMonikersForPixelType(e,"PLUS_BOOKING_CONFIRMATION")},u.loadMonikerForRestaurantProductSelectListing=function(e){return u._loadMonikersForPixelType(e,"RESTAURANT_PRODUCT_SELECT_LISTING")},u.loadMonikerForRestaurantProductSelectProduct=function(e){return u._loadMonikersForPixelType(e,"RESTAURANT_PRODUCT_SELECT_PRODUCT")},u.loadMonikerForRestaurantProductPurchase=function(e){return u._loadMonikersForPixelType(e,"RESTAURANT_PRODUCT_PURCHASE")},u.loadMonikerForMenuConnectSelectListing=function(e){return u._loadMonikersForPixelType(e,"MENU_CONNECT_SELECT_LISTING")},u.loadMonikerForMenuConnectSelectProduct=function(e){return u._loadMonikersForPixelType(e,"MENU_CONNECT_SELECT_PRODUCT")},u.loadMonikerForMenuConnectOrderConfirmation=function(e){return u._loadMonikersForPixelType(e,"MENU_CONNECT_ORDER_CONFIRMATION")},u.loadMonikerForLinkedinCallWithConversionId=function(e){return u._loadMonikersForPixelType(e,"LINKEDIN_CALL_WITH_CONVERSION_ID")},u.loadMonikerForYoutubeClaimListingHotel=function(e){return u._loadMonikersForPixelType(e,"YOUTUBE_CLAIM_LISTING_HOTEL")},u.loadMonikerForYoutubeSelectProduct=function(e){return u._loadMonikersForPixelType(e,"YOUTUBE_SELECT_PRODUCT")},u.loadMonikerForYoutubeOrderConfirmation=function(e){return u._loadMonikersForPixelType(e,"YOUTUBE_ORDER_CONFIRMATION")},u._loadMonikersForPixelType=function(e,o){try{return e=e||{},e.pixelType=o,d("pixelsEnabled")&&d("ibPixelsEnabled")||e.pixelEnableOverride?u._loadMonikers(e):null}catch(o){r.error(o,"loadMonikers for pixelType, ",null,{context:e})}return null},u._cacheClickoutMonikers=function(e){var o=d("pixelContext"),r=u._mergeContexts(o,e),n=u._buildPixelUrl(r);if(n){n+="&reportOnly=true&jsReplace="+k;var t=new XMLHttpRequest;t.open("GET",n,!0),t.onreadystatechange=function(){4==this.readyState&&(u._cachedClickoutMonikerTextArr=this.response.split(O))},t.send()}},u._addIBPageViewContext=function(e){document.getElementById("roomList")&&(e.lowestPrice=document.getElementById("roomList").dataset.lowestPrice),document.getElementById("roomInfoContainer")&&(e.lowestPrice=document.getElementById("roomInfoContainer").dataset.lowestPrice)},u._buildPixelUrl=function(e){var o=d("pixelServlet")?d("pixelServlet"):e.pixelServlet;if(!o)return r.error(null,"ads._buildPixelUrl: remarketing.pixelServlet not set"),null;var n="/"+o+"?",t=d("pixelsByType");if(t){var i=t[e.pixelType];if(i){var l=i.join(",");l&&(n=n+"pixelList="+l)}}for(var a in e)e.hasOwnProperty(a)&&(n+="&"+a+"="+e[a]);return ta.uid&&(n+="&puid="+ta.uid),n},u._appendMonikersIFrame=function(e,o){return s().then(function(){var r=document.createElement("iframe");return r.setAttribute("id",o||"Monikers"),r.setAttribute("style","border:none; position:absolute; bottom:0; right:0"),r.setAttribute("width","1"),r.setAttribute("height","1"),r.setAttribute("src",e),r.setAttribute("scrolling","no"),document.body.appendChild(r),r})},u._appendMonikersIFrameText=function(e,o){return s().then(function(){var r=document.createElement("iframe");r.setAttribute("id","Monikers"),r.setAttribute("style","border:none; position:absolute; bottom:0; right:0"),r.setAttribute("width","1"),r.setAttribute("height","1"),document.body.appendChild(r);var n=r.contentDocument||r.contentWindow.document;n.open().write(e[0]);for(var t=1;t<e.length;t++)n.write(o),n.write(e[t]);return n.close(),r})},u._mergeContexts=function(e,o){if(!e)return o;if(!o)return e;var r,n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);for(r in o)o.hasOwnProperty(r)&&(n[r]=o[r]);return n},u._loadMonikers=function(e){var o,n;try{o=d("pixelContext");var t=JSON.parse(localStorage.getItem("pbjs_identitylink"));o&&t&&t.value&&t.value.envelope&&(o.liveRampEnvelope=t.value.envelope.envelope),n=u._mergeContexts(o,e);var i=u._buildPixelUrl(n);return i?u._appendMonikersIFrame(i,C(n.pixelType)):null}catch(n){r.error(n,"ads._loadMonikers",null,{pixelContext:o,extraContext:e})}return null},o.exportTo(u,"ta.common.ads"),u});
define("mixins/page-dates/Utils",["vanillajs"],function(e){"use strict";function t(e){var t=String(e);return(1===t.length?"0":"")+t}function r(e){return e.getFullYear()+"_"+t(e.getMonth()+1)+"_"+t(e.getDate())}function n(e,t){return t+"Year="+e.getFullYear()+"&"+t+"Month="+(e.getMonth()+1)+"&"+t+"Day="+e.getDate()}function a(e){return n(e[0],"in")+"&"+n(e[1],"out")}function i(e){if(!e)return null;var t=e.split("-");return t.length<2&&(t=e.split("_")),new Date(parseInt(t[0],10),parseInt(t[1],10)-1,parseInt(t[2],10))}function u(e){return"[object Date]"===Object.prototype.toString.call(e)}function o(e,t){if((!e||!t)&&[e,t].every(u))return!1;var r=new Date(e.getTime()),n=new Date(t.getTime());return r.setHours(0,0,0,0),n.setHours(0,0,0,0),r.getTime()===n.getTime()}function s(e,t){if((!e||!t)&&[e,t].every(u))return!1;var r=new Date(e.getTime()),n=new Date(t.getTime()),a=864e5;return r.setHours(0,0,0,0),n.setHours(0,0,0,0),Math.round((n.getTime()-r.getTime())/a)}function g(e,t){for(var r;e;){if(r=e.querySelector("[data-dateType="+t+"]"))return r;e=e.parentNode}return null}function l(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=!0,n=0;n<e.length;n++)r=r&&o(e[n],t[n]);return r}return{pad:t,dateToIso:r,datesToCommerceUrlParams:a,fromString:i,compareDatesNoTime:o,compareDatesArrayNoTime:l,getNumNightsNoTime:s,findClosestDatepicker:g}});
define("retargeting/util",["ta/Core/TA.Store","mixins/page-dates/Utils"],function(e,t){function r(e){e.hasOwnProperty("drs")||(e.drs=ta.retrieve("retargeting.drs")),e.hasOwnProperty("uvm")||(e.uvm=ta.retrieve("retargeting.uvm")),e.hasOwnProperty("dbi")||(e.dbi=ta.retrieve("retargeting.dbi")),e.hasOwnProperty("geoId")&&void 0!==e.geoId||(e.geoid=ta.retrieve("retargeting.geoId"))}function a(t,a){t&&a&&taq&&(r(a),taq("init",g),e.has("retargeting.rtURL")&&taq("override",e.retrieve("retargeting.rtURL")),window.pageServlet?a.servlet_name=window.pageServlet:require.defined("page-model")&&(a.servlet_name=require("page-model").session.pageServlet),taq("track",t,a))}function i(e){if(ta.page&&ta.page.hasDates("STAYDATES")){var r=ta.page.getDates("CHECKIN")[0],a=ta.page.getDates("CHECKOUT")[0];e.travel_start_date=t.dateToIso(r),e.travel_end_date=t.dateToIso(a)}}var g=481409672;return{send:a,getDates:i}});
define("retargeting/providers/desktop-meta-click",["commerce/offerclick","retargeting/util"],function(e,r){return function(i,n){if(n){var o=window.modelGeoId,d=n.brandname,a=n.vendorname,t=n.pernight,c=n.offerclient,l=!1,g="";require.defined("page-model")&&(l=require("page-model").session.loggedIn,g=require("page-model").DUST_GLOBAL.DEVICE);var m={};m.geoId=o,m.locationId=n.locationid,m.brand=d,m.vendor=a,m.provider=c,m.pernight=t,m.device_type=g,m.is_member=l;var f=n.clicktoken;if(f){var p=e.expandToken(f);m.slot=p.slot,m.area=p.area}r.getDates(m),r.send(i,m)}}});
define("retargeting/listeners/desktop-meta-click",["ta/Core/TA.Event","retargeting/providers/desktop-meta-click"],function(e,t){var n="TripAdvisor";return function(r){require(["trjs!taevents"],function(){e.on("metaLinkClick",function(e){var r=e.dataset;if(r&&"function"==typeof t){var i=r.vendorname===n?"IB_CLICK":"META_CLICK";t(i,r)}})})}});
define("retargeting/providers/mobile-hr-pageview",["retargeting/util"],function(e){return function(r,d){if(d){var a=!1,t="";require.defined("page-model")&&(a=require("page-model").session.loggedIn,t=require("page-model").DUST_GLOBAL.DEVICE);var i={};i.locationId=d.locationId,i.geoId=window.modelGeoId,i.brand=d.brand,i.sub_brand=d.sub_brand,i.ip=d.ip,i.is_member=a,i.device_type=t,i.travel_start_date=d.travel_start_date,i.travel_end_date=d.travel_end_date,e.send(r,i)}}});
define("retargeting/listeners/mobile-hr-pageview",["lib/jquery-amd","retargeting/providers/mobile-hr-pageview"],function(e,i){return function(e){require(["trjs!taevents"],function(){e&&e.enableHolisticTracking&&"function"==typeof i&&i("PAGEVIEW",e)})}});
define("retargeting/providers/desktop-bl-click",["retargeting/util"],function(e){var r={2:"website",3:"virtual tour",4:"affiliate"};return function(t,a,d){if(a){var i=!1,n="";require.defined("page-model")&&(i=require("page-model").session.loggedIn,n=require("page-model").DUST_GLOBAL.DEVICE);var o={};o.locationId=a.locationId,o.geoId=window.modelGeoId,o.brand=a.brand,o.sub_brand=a.sub_brand,o.ip=a.ip,o.is_member=i,o.device_type=n,o.travel_start_date=a.travel_start_date,o.travel_end_date=a.travel_end_date,d&&r[d]&&(o.click_type=r[d]),e.send(t,o)}}});
define("retargeting/listeners/desktop-bl-click",["ta/Core/TA.Event","retargeting/providers/desktop-bl-click"],function(t,e){return function(n){require(["trjs!taevents"],function(){n&&n.enableHolisticTracking&&t.on("onBLClick",function(t,i){var r=t.target.parentNode.getAttribute("data-column");"function"==typeof e&&e("BL_CLICK",n,r)})})}});
define("historyinject/HistoryInject",["utils/browserutils","common/trackingStreams"],function(i,t){"use strict";function n(i,n){if(!r(n))return!1;var o=i.options.pageAction||"back_button_clicked",e=i.options.productAttr||"";t.setEvtCookie(i.module,o,e,"",i.backUrl),window.location.replace(n.state.backUrl)}function o(){return window.history&&"pushState"in window.history}function e(i,t){t&&t.call(i);var o=n.bind(null,i);return window.addEventListener("popstate",o),window.addEventListener("hashchange",o),!!i.isNewTab()&&(i.urlSuffix=i.options.query?i.originalSearch:i.originalHash,void i.updateState())}function r(i){return i.state&&i.state.backUrl}function a(){var t=null;return"ios"===i.Platform.name&&(i.chrome||i.crios)?t="iOSMobileChrome":i.android&&i.firefox&&(t="androidFirefox"),t?new Promise(function(i){require(["trjs!historyinject/browser/"+t],function(t){i(t)})}):Promise.resolve(null)}function l(i,t){try{if(t&&t.backButtonUrl)return t.backButtonUrl;if(window.opener&&window.opener.location&&window.opener.location.pathname){if(window.opener.location.origin===window.location.origin){if(window.opener.location.href&&"/Search"===window.opener.location.pathname)return window.opener.location.href;if("H_NEARBY_HISTORY_INJECT"!==i&&"EXP_NEARBY_HISTORY_INJECT"!==i&&"RESTAURANT_NEARBY_HISTORY_INJECT"!==i&&"R_R_HISTORY_INJECT"!==i&&"A_R_HISTORY_INJECT"!==i)return window.opener.location.pathname;if(window.opener.location.href&&window.opener.location.pathname.includes("/Hotel_Review"))return window.opener.location.pathname}}else if(document.referrer&&document.referrer.length>0){var n=new URL(document.referrer);if(n.hostname===document.location.hostname){if("H_NEARBY_HISTORY_INJECT"!==i&&"EXP_NEARBY_HISTORY_INJECT"!==i&&"RESTAURANT_NEARBY_HISTORY_INJECT"!==i&&"R_R_HISTORY_INJECT"!==i&&"A_R_HISTORY_INJECT"!==i)return n.pathname;if(window.opener.location.href&&window.opener.location.pathname.includes("/Hotel_Review"))return n.pathname}}}catch(i){}return null}var c=function(i,t){this.originalPath=window.location.pathname,this.originalHash=window.location.hash,this.originalSearch=window.location.search,this.backUrl=null,this.backUrlPlaceholder="-BackUrl",this.urlSuffix="",this.options=t||{},this.module=i,this.mixin=a(),this.backUrl=l(i,this.options)};return c.prototype.isNewTab=function(){return 1===window.history.length},c.prototype.updateState=function(){var i=this.originalPath+this.backUrlPlaceholder;if(!(this.backUrl.indexOf("WidgetEmbed")>=0)){if(this.backUrl.indexOf(".htm")>=0){var t=this.originalPath.split(".htm");i=t[0]+this.backUrlPlaceholder+".htm"+t[1]}history.replaceState({backUrl:this.backUrl},document.title,i+this.urlSuffix),history.pushState({},document.title,this.originalPath+this.urlSuffix)}},c.prototype.init=function(){o()&&this.backUrl&&this.mixin.then(e.bind(null,this))},c});
define("servlets/reacthotelreview-pl",["utils/BatchRequest","ta/Core/TA.Record","ta/util/Error","common/pixels-loader","ta/util/Element","ta/common/behavior/Ads-pagemoniker","retargeting/listeners/desktop-meta-click","retargeting/listeners/mobile-hr-pageview","retargeting/listeners/desktop-bl-click","common/trackingStreams","historyinject/HistoryInject"],function(i,t,e,r,o,n,a,c,s,l,k){function g(i){try{r.init(i.remarketingOptions),n.loadMonikerForHotelPrices(),a(),c(i.holisticTrackingOptions),s(i.holisticTrackingOptions)}catch(i){l.error(i,"post-load initialization")}try{i.enableHistoryInjection&&new k("HOTEL_REVIEW_HISTORY_INJECT").init()}catch(i){l.error(i,"history injection")}}return{init:g,loadClickoutMonikers:n.loadClickoutMonikers.bind(n)}});
define("ta/p13n/placements-ajax",["vanillajs","api-mod","utils/ajax","ta/util/Error","ta/Core/TA.Store","ta/Core/TA.Event","ta/prwidgets"],function(e,t,a,r,n,s,l){"use strict";function o(e,t,a,n){var s=a?a.status:-1;if(!(s<400)){var l=a?a.statusText:"?",o=a?a.getResponseHeader("content-length"):"?";r.record(null,e+" load - MetaPlacementAjax "+n+" ("+s+" "+l+", length: "+o+")"),t&&t()}}function u(e,r,n,s,l){var u={detail:""+e.location_id,placementName:e.name,servletClass:e.servletClass,servletName:e.servletName};window.pageServlet&&(u.metaReferer=window.pageServlet),s&&(u=t.merge(u,s)),a({url:"/MetaPlacementAjax",data:u,method:l||"GET",evalScripts:!0,success:r,error:o.bind(null,e.name,n)})}function i(e,r,n){var s,l,u={};e&&(R[e]=R[e]||1e3,n=n||{},s=g()||{},window.pageServlet&&(u={metaReferer:window.pageServlet}),l=t.merge(s,n,{placementName:e,assets:!p(e),wrap:!0,occOffset:R[e]},u),a({url:"/MetaPlacementAjax",data:l,evalScripts:!0,success:function(t){R[e]++,t=v(e,t),r&&r(t)},error:o.bind(null,e,null)}))}function d(e,a,r){if(!n.retrieve("ta.redirectingPage")){if(e[S]&&a<=1)return void(e[S]="requested");a<=1&&(e[S]="polling");var s=!1,o=g();o?s=!0:o={};var i={};window.pageServlet&&(i={metaReferer:window.pageServlet});var c=t.merge(o,i,{"reqNum":a});r.customRequestParams&&(c=t.merge(c,r.customRequestParams));var m=r.displayableRequestNumber||1,v=r.maxRequestNumber||5;u(e,function(n){function o(a){if(!r.displayImmediately){a&&a.target&&(t.removeEvent(a.target,"mouseout",o),t.removeEvent(a.target,"blur",o));var n=p.querySelector&&p.querySelector(":hover");if(n)return void t.addEvent(n,"mouseout",o);var s=p.querySelector&&p.querySelector(":focus");if(s)return void t.addEvent(s,"blur",o)}e.latestCrossSellResponseText&&(r.customUpdater?r.customUpdater(e.latestCrossSellResponseText):(p.innerHTML=e.latestCrossSellResponseText,l.initWidgets(p)),delete e.latestCrossSellResponseText,r.onSuccess&&r.onSuccess())}e.latestCrossSellResponseText=n;var u="requested"===e[S],i=r.readyStrings||["xsellHacStatusReady","xsellHacStatusSOL"],c=a>=v||i.some(function(e){return n.indexOf(e)>=0})||!s,g=a>=m||c,p=document.getElementById(e.id);p&&(g&&o(),!c||u?(e[S]="polling",setTimeout(d.bind(null,e,a+1,r),r.pollWaitTime||2e3)):delete e[S])},r.onFailure,c)}}function c(e,a){e.autoRefreshEnabled||(a=a||{},s.queueForLoad(function(){var r=a.customRequestParams||{};a.includePackagePrivateAssetsOnDateChange&&(r=t.merge({},r,{packagePrivateAssets:!0}));var n=t.merge({},a,{displayableRequestNumber:a.onCalendarRangeSelectDisplayableRequestNumber||2,customRequestParams:r});ta&&ta.page?ta.page.on("dateSelected",function(t,a){"STAYDATES"===a&&ta.page.hasDates("STAYDATES")&&d(e,1,n)}):s.on("onCalendarRangeSelect",d.bind(null,e,1,n));var l=t.merge({},a,{customRequestParams:r});s.on("clearDates",d.bind(null,e,1,l));var o=a.initialRequestNumber||1;(m()||a.allowUndated)&&d(e,o,a)},"initialize "+e.id),e.autoRefreshEnabled=!0)}function m(){return ta.page&&ta.page.hasDates("STAYDATES")||ta.widgets&&ta.widgets.calendar&&ta.widgets.calendar.hasPageDates()}function g(){return ta.page?ta.page.datesToQueryJson("STAYDATES"):ta.widgets&&ta.widgets.calendar?ta.widgets.calendar.getCheckRatesData():null}function v(e,t){var a,r,n=document.createElement("div");for(n.innerHTML=t,a=n.getElementsByTagName("style");a.length>0;)r=n.removeChild(a[0]),p(e)||document.head.appendChild(r);return f[e]=!0,n.innerHTML}function p(e){return!!f[e]}var S="__polling",f={},R={};return{"requestAJAXPlacement":u,"loadDynamicPlacement":i,"enableAutoRefresh":c}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"browser_mode_tracking","handlers",["handlers"]);n(["placement","ta/Core/TA.Event","ta/Browser","ta/Core/TA.Record","ta/util/SessionStorage"],function(e,n,o,r,t){function s(e){r.trackEventOnPage("BROWSER_TRACKING",a,e,null,!0)}var a,i=e.id+"_browser_mode_tracked";n.queueForLoad(function(){t.canUseSessionStore()&&sessionStorage.getItem(i)||o.isChrome()&&(a="Chrome",o.isChromeIncognito(s),t.canUseSessionStore()&&sessionStorage.setItem(i,"1"))})})});
require(["ta/p13n/placements"],function(t){var e=t.define.bind(t,"facebook_autologin","handlers",["handlers"]);e(["placement","ta/Core/TA.Event","ta/util/Error","facebook/authutils","common/Radio"],function(t,e,o,a,n){"use strict";function r(){var t=document.querySelector("#fb_autologin_data");if(!t)return void o.record(null,"Could not find Facebook autologin data");var e=t.getAttribute("data-load-fb-js"),n=t.getAttribute("data-facebook-js-url"),r=t.getAttribute("data-facebook-connect-app-id"),i=t.getAttribute("data-facebook-api-version"),u=t.getAttribute("data-fb-auto-login"),c=t.getAttribute("data-fb-fetch-access-token");try{e&&a.loadSdkAndInit(n,r,i),u&&a.queueForInit(function(){a.autoLogin()}),c&&a.queueForInit(function(){a.refreshToken()})}catch(t){o.record(t,"Error setting up Facebook autologin JS")}}var i=document.querySelector("#fb_autologin_data");if(i){var u=i.getAttribute("data-defer-auto-login");u?n("TimeToInteractive").on("TimeToInteractive",r):e.queueForAfterLoad(r,"placement: facebook_autologin")}})});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"global_nav","handlers",["deferred/lateHandlers","handlers"]);o(["placement","lib/jquery-amd","common/Radio","ta/registration/RegEvents","utils/throttle","utils/asdf-encoder"],function(e,o,n,t,a,r){"use strict";function i(){var e=o(window).scrollTop();if(h.length&&m.is(":visible")){var n=u.height()-e;e<=0&&h.css({"position":"absolute","top":0}),n>0&&(e>0&&e<=50?h.css({"position":"absolute","top":e,"bottom":"auto"}):n<=50&&h.css({"position":"absolute","top":"auto","bottom":0}))}}function s(){var e=o(".second-view",u),n=o(window).scrollTop();h.length&&(y.css({"display":"block"}),e.length&&m.is(":visible")&&(n=p.height()-y.height(),window.scroll(0,n),h.css({"position":"absolute","top":"auto","bottom":0})))}function l(){var e=o(".global-nav-persistent",u);e.length&&e.toggleClass("fixed",o(window).scrollTop()>u.offset().top)}function c(e,o){e.preventDefault();var n=o.getAttribute("data-ahref")?r.asdf(o.getAttribute("data-ahref")).replace(/&amp;/g,"&"):"/";window.open(n,"_self")}var d="TopNav",u=o("#"+e.id),v=n("global-nav"),f=null,g=null,p=o(".persistent-icons",u),h=o(".global-nav-icons",p),y=o(".global-nav-logo",p),b=o(".global-nav-logo-2018",u),m=o('[data-placement-name="global_nav_geopill"]',u),w=n("candy-bar-quick-links"),j=o(".global-nav-bottom",u),_=n("tripsearch-scroll-geo-pill");v.on("run-my-trips-test-3",function(){O(!1,!0)}),_.on("hide-on-header",function(e){b&&b.toggleClass("is-hidden-mobile",!e)});var k=function(t){window.userLoggedIn=!0;var a=0==u.find("[data-non-components]").length;if(a){var r=u.find(".components-nav-legacy-actions"),i=o("<div>").html(t).find(".components-nav-legacy-actions").html();r.html(i)}else{var s=document.querySelector("#"+e.id),l=document.createElement("div");l.innerHTML=t,[].forEach.call(l.querySelectorAll(".react-container"),function(e){var o=s.querySelector('[data-component="'+e.getAttribute("data-component")+'"]');o&&e.parentNode.replaceChild(o,e)});var c=s.querySelector(".global-nav"),d=l.querySelector(".global-nav");c.parentNode.replaceChild(d,c),f&&f.hide("replace-el")}n("inbox").trigger("setup_handler")}.bind(u),C=function(){return{skipLocation:e.location_id<=0,returnTo:document.location.pathname+(document.location.search||"")+(document.location.hash||"")}};t.on("success",function(){e.requestAJAXPlacement(k,null,C())}),u.on("mouseenter",".global-nav-links-container [data-element]",function(e){var n=o(this),t=n.find("a").first();f&&f.hide("new-overlay");var a=u.find(n.data("element")).clone();if(a.length){var r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(r,function(r,i,s,l,c){var d=o(".ppr_priv_global_nav_component").offset(),v=!!o(".skyExpanded").length,g=v&&d?1-d.top:1,p=new r(n[0],new i(a[0],"global-nav-flyout global-nav-menu"),s,l.bottomRight([0,g]),c);p.domParent=u.find(".global-nav-overlays-container")[0],p.show(),t.attr("data-active-menu-trigger",!0),o(e.currentTarget).find(".ui_tab").addClass("hovering"),p.on("hide",function(){t.removeAttr("data-active-menu-trigger"),o(e.currentTarget).find(".ui_tab").removeClass("hovering")}),f=p})}}),u.on("mouseenter",".subItem",function(e){o(this).siblings(".expandSubItem").removeClass("active")}),u.on("mouseenter",".expandSubItem",function(e){var n=o(this);if(!n.hasClass("active")){n.addClass("active"),n.siblings(".expandSubItem").removeClass("active");var t=n.find(".secondSubNav").clone(),a=n.parents(".ui_overlay"),r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseOut","trjs!overlays/options/destroyOnHide"];require(r,function(e,o,r,i){var s=new e(n[0],new o(t[0]),r,i);s.domParent=a[0],t.css("display","block"),s.show()})}}),u.on("mouseenter",".global-nav-links-ellipsis",function(e){var n=o(this);f&&f.hide("new-overlay");var t=u.find(".global-nav-links-container li"),a=t.filter(":hidden"),r=t.filter(function(e,n){return o(n).offset().top>t.offset().top}),i=o().add(a).add(r).clone(),s=u.find(".global-nav-links-menu-more").clone();s.prepend(i);var l=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(l,function(e,t,a,r,i){var l=o(".ppr_priv_global_nav_component").offset(),c=!!o(".skyExpanded").length,d=c&&l?1-l.top:1,v=new e(n[0],new t(s[0],"global-nav-flyout global-nav-menu"),a,r.bottomRight([0,d]),i);v.domParent=u.find(".global-nav-overlays-container")[0],v.show(),n.find(".ui_tab").addClass("hovering"),v.on("hide",function(){n.find(".ui_tab").removeClass("hovering")}),f=v})}),u.on("click","#global-nav-HelpDesk",function(e){e.preventDefault();var o=this,n=["trjs!overlays/Overlay","trjs!overlays/styles/modal","trjs!overlays/options/closeOnEscape","trjs!overlays/position","trjs!overlays/options/closeOnDocClick","trjs!overlays/options/ajax","trcss!src/build/required/help_center_overlay"];require(n,function(e,n,t,a,r,i,s){var l=new e(o,[n(null,"","help_center"),t,a.cssCentered(),r,i("/uvpages/helpCenterOverlay.html")]);l.show(),v.emit("overlay-show")})}),u.on("click",".masthead-saves",function(e){g?(f&&f.hide("new-overlay"),g&&g.destroy()&&(g=null),require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("TopNav","mytrips_dropdown_cancel")})):(O(!1,!1,e.currentTarget),o(e.currentTarget).find(".ui_icon").addClass("hovering"))});var O=function(e,n,t){f&&f.hide("new-overlay");var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","trjs!ta/Core/TA.Record"];require(a,function(a,r,i,s,l,c,d){var v=o(".masthead-saves"),p=new a(v[0],new r("","global-nav-flyout global-nav-utility trips-flyout-container"),i.withoutTouchEvents,v.data("nav-2018-enabled")?s.bottomLeft([v.width()/2-34,9]):s.bottomLeft([-20,-3]),l,c);p.domParent=u.find(".global-nav-overlays-container")[0],p.show(),u.find(".trips-flyout-container").addClass("hide-arrow"),f=p,require(["trdust!masthead-saves-dust","trdust!styleguide-dust","trjs!masthead-saves","trcss!masthead-saves"],function(a,r,i){setTimeout(function(){g=new window.MastheadSavesApp,g.start({inCreateTripFlow:e,runTest3:n}),p.on("hide",function(e){g&&g.destroy()&&(g=null),d.trackEventOnPage("TopNav","mytrips_dropdown_cancel"),t&&o(t).find(".ui_icon").removeClass("hovering")}),u.find(".trips-flyout-container").removeClass("hide-arrow")},0)})})}.bind(u);u.on("click",".global-nav-utility-activator",function(e){var n=o(this),t=u.find(n.data("element")).clone();if(t.length){if(f){if(f.sourceElement==this)return void(f.isOpen()?f.hide("close"):f.show());f.hide("new-overlay")}t=t.clone();var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/autoReposition"];require(a,function(a,r,i,s,l){var c=new a(n[0],new r(t[0],"global-nav-flyout global-nav-utility"),i,n.data("nav-2018-enabled")?s.bottomLeft([n.outerWidth()/2-34,12]):s.bottomLeft([-20,-3]),l);c.domParent=u.find(".global-nav-overlays-container")[0],c.show(),n.addClass("menu-open"),o(e.currentTarget).find(".ui_icon").addClass("hovering"),c.on("hide",function(){n.removeClass("menu-open"),o(e.currentTarget).find(".ui_icon").removeClass("hovering")}),f=c})}}),u.on("click",".global-nav-logo",function(){require(["trjs!ta/Core/TA.Record"],function(e){e.setEvtCookie("TopNav_"+window.pageServlet,"click","TAlogo",0,"/Home")})}),n("inbox").on("has_unread_conversations",function(e){u.find(".global-nav-hamburger .ui_jewel.unread").removeClass("hidden"),u.find(".nav-sub-link.inbox .icon-and-jewel").removeClass("hidden")}),n("inbox").on("no_unread_conversations",function(e){u.find(".global-nav-hamburger .ui_jewel.unread").addClass("hidden"),u.find(".nav-sub-link.inbox .icon-and-jewel").addClass("hidden")}),u.on("click","a.login-button.mobile",function(e){var n=o(".join-button").data("flowName")||"CORE_COMBINED",t=o(".join-button").data("pid")||40422,a=(o(".join-button").data("tracking"),"login");o(this).hasClass("join-button")&&(a="join");var r={flow:n,pid:t,userRequestedForce:"true",locationId:require("page-model").GEO_ID,onSuccess:function(e){}},i={extraQueryParams:{flowOrigin:a}};r=o.extend(r,i),require(["trjs!ta/registration/RegOverlay"],function(o){o.showForMobile(e,e.target,r)}),e.preventDefault()}),s();var T=a(l,100);return o(window).scroll(function(){i(),T()}),w.on("border-top",function(e){j.toggleClass("home_ui_tabs",e)}),u.on("click","a.global-nav-link[data-tracking-label]",function(e){var n=o(e.target).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(o){"HelpDesk"===n||"_blank"==e.target.target?o.trackEventOnPage(d,"click",n):o.setEvtCookie(d,"click",n,0,e.target.href)})}),{checkForPersistentIcons:i,checkForPersistentGlobalNav:l,clickLogoLink:c}})});
require(["ta/p13n/placements"],function(a){var n=a.define.bind(a,"global_nav_action_cart","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(a,n){"use strict";var e=n("#"+a.id);e.on("click","a.shopping-cart-link",function(){var a=n(this).data("tracking-label");require(["trjs!ta/Core/TA.Record"],function(n){n.trackEventOnPage("TopNav_"+window.pageServlet,"click",a)})})})});
define("ta/support/Qualtrics",["vanillajs","ns-exporter","page-model","ta/Core/TA.LocalStorage"],function(e,t,n,s){"use strict";var i={},r=function(e,t,n,s){this.get=function(e){for(var e=e+"=",t=document.cookie.split(";"),n=0,s=t.length;n<s;n++){for(var i=t[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null},this.set=function(e,t){var n="",n=new Date;n.setTime(n.getTime()+6048e5),n="; expires="+n.toGMTString(),document.cookie=e+"="+t+n+"; path=/; "},this.check=function(){var s=this.get(n);if(s)s=s.split(":");else{if(100==e)return!0;"v"==t&&(e=Math.random()>=e/100?0:100),s=[t,e,0],this.set(n,s.join(":"))}var i=s[1];if(100==i)return!0;switch(s[0]){case"v":return!1;case"r":return i=s[2]%Math.floor(100/i),s[2]++,this.set(n,s.join(":")),!i}return!0},this.go=function(){if(this.check()){var e=document.createElement("script");e.type="text/javascript",e.src=s+"&t="+(new Date).getTime(),document.body&&document.body.appendChild(e)}},this.start=function(){var e=this;e.go()}};i.displaySurvey=function(e){var t=n.session.uid,s="QSI_S_"+e,i="//znbkpczkrl5wwqzj3-tripadvisor.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_SIID="+e+"&UID="+t+"&Q_LOC="+encodeURIComponent(window.location.href);try{require(["@ta/platform.runtime"],function(e){e.importBundle("@ta/platform.consent").then(function(e){e.requestConsent(e.CategoriesEnum.ANALYTICS,function(){new r(100,"r",s,i).start()})})})}catch(e){}R(!0)};var a=2592e6,o=6048e5,u=!1,c=!1,l=4,p=3,f=2,g=Math.round(10*Math.random())%2,d=!1,h=function(){return s.get("qualtrics-debug")},v=function(){return Number(s.get("qualtrics-session-count")||0)},q=function(){return!!s.getSessionKey("qualtrics-session-count-incremented")},m=function(){var e=v(),t=s.getSessionKey("qualtrics-session-count-incremented");t||(s.set("qualtrics-session-count",e+1,o),s.setSessionKey("qualtrics-session-count-incremented",!0))},S=function(e){s.setSessionKey("qualtrics-ignored",e)},y=function(){return!!s.getSessionKey("qualtrics-ignored")},w=function(e){s.set("qualtrics-responded",e,a)},I=function(){return!!s.get("qualtrics-responded")},b=function(){return Number(s.getSessionKey("qualtrics-page-views")||0)},D=function(){return Number(s.getSessionKey("qualtrics-intercept-views")||0)},K=function(){var e=D();s.setSessionKey("qualtrics-intercept-views",++e),4===e&&S(!0)},T=function(){return Number(s.getSessionKey("qualtrics-intercept-reqs")||0)},C=function(){var e=T();s.setSessionKey("qualtrics-intercept-reqs",e+1)},N=function(){return d},k=function(e){d=e},L=function(){var e=!1,t=N();if(t){var n=I()||y(),s=v(),i=q(),r=b(),a=D();!n&&(s<p||s==p&&i)&&a<l&&(r===f||r>f&&0===g)&&(e=!0)}return e};i.isDebug=h,i.setResponded=w,i.hasResponded=I,i.getPageViews=b,i.getSmartSurvey=N,i.setSmartSurvey=k,i.updateInterceptViews=K,i.canDisplaySmart=L,i.getSessionCount=v,i.updateSessionCount=m,i.getInterceptViews=D,i.updateInterceptReqs=C,i.getInterceptReqs=T;var R=function(e){e?(s.set("qualtrics-last-seen",Date.now()),u=!0):s.remove("qualtrics-last-seen")},j=function(){var e=parseFloat(s.get("qualtrics-last-seen")),t=isNaN(e)?0:e,n=t<0?0:t+a;return Date.now()<n},x=function(){return u},M=function(){var e=Number(s.get("qualtrics-page-views"));return 2===e&&!i.hasShownInLastThirtyDays()||1===e&&!c&&!i.hasShownInLastThirtyDays()},V=function(){if(N()&&(v()<p||v()==p&&q())&&!I()&&!y()){var e=b();s.setSessionKey("qualtrics-page-views",e+1)}var t=s.get("qualtrics-session-id"),i=n.session.sessionId;if(t&&t===i){var e=Number(s.get("qualtrics-page-views"))+1;s.set("qualtrics-page-views",e)}else s.set("qualtrics-session-id",i),s.set("qualtrics-page-views",1);c=!0};return i.hasShownInLastThirtyDays=j,i.seenThisPageView=x,i.canDisplay=M,i.updatePageViews=V,t.exportTo(i,"ta.support.qualtrics"),i});
define("ta/util/CommonMessagingUtil",["lib/jquery-amd","ta/Core/TA.LocalStorage","ta/support/Qualtrics","ta/util/SessionStorage","common/Radio"],function(e,t,n,a,i){"use strict";function r(e){if(t.enabled){var n=t.get(e+v);return n?parseInt(n):0}return null}function s(e){if(t.enabled&&e){var n=e+v;t.set(n,r(e)+1)}}function o(e){if(t.enabled){var n=t.get(e+y);return n?parseInt(n):0}return 0}function u(e){if(t.enabled&&e){var n=e+y;t.set(n,o(e)+1)}}function c(e){if(t.enabled){var n=t.get(e+p);return!!n}return!1}function l(e){t.enabled&&e&&t.set(e+p,"true")}function d(e){var n=(new Date).getDate();if(t.enabled&&e){var a=e+_;t.set(a,n.toString())}}function f(e){var n=(new Date).getDate();if(t.enabled&&e){var a=e+_,i=t.get(a);return!!i&&i===n.toString()}return!1}function m(e){var n=(new Date).getDate();t.enabled&&t.set(e,n.toString())}function g(e){var n=(new Date).getDate();if(t.enabled){var a=t.get(e);return!!a&&a===n.toString()}}function b(e,t,i){e&&"function"==typeof e&&e()&&(n.seenThisPageView()||n.canDisplaySmart()||n.canDisplay())||t&&"function"==typeof t&&t()||i&&"function"==typeof i&&(document.getElementById("FIXED_AD")?a.canUseSessionStore()&&a.getObject("ads.fixed.close")?i():S.once("ad_closed",function(){i()}):i())}function D(e){return e.toLowerCase().replace("mobile","")}var v="_view_count",p="_is_disabled",y="_times_dismissed",_="_disabled_for_day",S=i("cpm_mw_adhesion");return{getCurrentPageViews:r,incrementPageViews:s,getNumberOfTimesDismissed:o,incrementNumberOfTimesDismissed:u,isPlacementDisabled:c,disablePlacement:l,setPlacementDisabledForToday:d,isPlacementDisabledForToday:f,setPlacementGroupKey:m,checkPlacementGroupKey:g,parseServletName:D,displayPlacementIfNoSurveyNorAdIsPresent:b}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_action_inbox","handlers",["handlers"]);n(["placement","vanillajs","lib/jquery-amd","common/Radio","ta/Core/TA.Record","ta/util/CommonMessagingUtil"],function(e,n,o,i,t,a){function s(e){if(e.receivedCallback&&e.receivedCallback(),o(".inbox-flyout-container").length&&g)g.destroy();else{var n=e.el,i=e.bottomLeftOffset;l(void 0,n,i)}}function r(e){l(e,o(".masthead-inbox-icon")[0])}function l(n,i,a){var s=o("#"+e.id),r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","ta/registration/RegOverlay","trjs!unifiedinbox/inbox-lander","trcss!unified_inbox_lander"];require(r,function(e,r,l,c,d,v,_,b,f){var w=o(".inbox-nav-contents",s).clone()[0];if(w.classList.remove("hidden"),o(".login-cta",w).length){var p=o(".login-cta span",w);p.click(function(){n&&m&&(h=!0,t.trackEventOnPage("reg_trigger","mgp_click_login","Inbox Jewel Notification Log In Click | Nav | mgp_drs_mem",u)),g.destroy(),_.show({type:"dummy"},null,{flow:"CORE_COMBINED",pid:40472,userRequestedForce:!0,onSuccess:function(){o(".login-cta",s).remove(),o(".inbox-nav-dropdown",s).removeClass("with-login-cta")}.bind(this)})})}else for(var x,j=o(".js-inbox-lander-thread-list-item.loading",w),y=o(".inbox-masthead-wrapper",w),C=0;C<10;++C)x=j.clone(),x.removeClass("hidden"),y.append(x);var k=a;k||(k=o(i).data("nav-2018-enabled")?[o(i).width()/2-34,7]:[-20,-3]),g=new e(i,new r(w,"inbox-flyout-container"),l.withoutTouchEvents,c.bottomLeft(k),d,v),g.show(),n&&!n.hasClass("hidden")&&g.on("hide",function(){h||t.trackEventOnPage("reg_trigger","mgp_close","Inbox Jewel Notification | Nav | mgp_drs_mem",u),h=!1,m=!1}),o(".login-cta",s).length||b.loadMastheadDropdown()})}function c(e,n){if(n)if(n.hasClass("is-control"))t.trackEventOnPage("reg_trigger","mgp_view_control","Inbox Jewel Notification Control| Nav | mgp_drs_mem");else{var i=a.getCurrentPageViews(_);i>=b&&a.disablePlacement(_),a.isPlacementDisabledForToday(_)||a.isPlacementDisabled(_)||!n.hasClass("valid-for-test")||(o(".inbox-jewel-test",e).removeClass("hidden"),t.trackEventOnPage("reg_trigger","mgp_view","Inbox Jewel Notification | Nav | mgp_drs_mem",u))}}function d(){var n=o("#"+e.id),s=o(".inbox-jewel-test",n);c(n,s),o(".masthead-inbox-icon, .ui_jewel",n).click(function(e){e.stopPropagation(),s&&!s.hasClass("hidden")?(t.trackEventOnPage("reg_trigger","mgp_click","Inbox Jewel Notification | Nav | mgp_drs_mem",u),a.setPlacementDisabledForToday(_),a.incrementPageViews(_),m=!0,t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","no_unread",v)):o(".ui_jewel",n).length&&o(".ui_jewel",n).hasClass("hidden")?t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","no_unread",v):o(".ui_jewel",n).length&&t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","has_unread",v),o(".masthead-inbox-icon",n).attr("data-on-inbox")?window.location="/Inbox":o(".inbox-flyout-container").length&&g?g.destroy():r(s)}),i("inbox").on("thread_clicked",function(e){g&&g.destroy()}),i("inbox").on("has_unread_conversations",function(e){var i=o(".ui_jewel",n);"undefined"!==i&&i.length>0&&i.each(function(e,n){o(n).hasClass("inbox-jewel-test")||o(n).removeClass("hidden")})}),i("inbox").on("no_unread_conversations",function(e){var i=o(".ui_jewel",n);"undefined"!==i&&i.length>0&&i.each(function(e,n){o(n).hasClass("inbox-jewel-test")||o(n).addClass("hidden")})}),i("inbox").on("setup_handler",function(){d()})}var g,v=40186,u=40405,_="Membership_Inbox_Jewel_Test",b=3,m=!1,h=!1;return i("global-nav-inbox").on("open",function(e,n){s(e,n)}),d(),{}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_profile","handlers",["handlers"]);t(["placement","lib/jquery-amd","page-model"],function(e,t,a){"use strict";function n(){var e=t(".button_container").data("pageProperty1"),a=t(".button_container").data("pageProperty2"),n=t(".button_container").data("pageProperty3"),r=t(".button_container").data("pageProperty4");(e&&""!==e||a&&""!==a||n&&""!==n||r&&""!==r)&&require("ta/Core/TA.Record").trackEventOnPage(e,a,n,r)}function r(e){if(c.hasClass("core-login-button")){var t=c.data("isControl"),a=c.data("trackingPid"),n=c.data("joinAttr"),r="reg_trigger",o="mgp_";t&&n&&"view"===e&&(o="mgp_view_control",require("ta/Core/TA.Record").trackEventOnPage(r,o,n)),!t&&n&&a&&require("ta/Core/TA.Record").trackEventOnPage(r,o+e,n,a)}}var o=t("#"+e.id),i=null,c=t(".join-copy-tracking");r("view"),o.on("click","a.login-button",function(e){i&&i.hide("replace-el");var a=t(".core-login-button").data("flowName"),o=t(".core-login-button").data("pid"),c=(t(".core-login-button").data("tracking"),"login");t(this).hasClass("core-login-button")&&(c="join",t(this).hasClass("join-copy-tracking")&&r("click"));var l={flow:a,pid:o,userRequestedForce:"true",locationId:require("page-model").GEO_ID,onSuccess:function(e){}},d={extraQueryParams:{flowOrigin:c}};l=t.extend(l,d),require(["trjs!ta/registration/RegOverlay"],function(t){t.show(e,e.target,l)}),e.preventDefault(),n()});var l=function(e,a){var n=t(e).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(t){/\/#\s*$/.test(e.href)||"_blank"==e.target?t.trackEventOnPage(a,"click",n):t.setEvtCookie(a,"click",n,0,e.href)})};o.on("click",".global-nav-profile-menu a.subLink[data-tracking-label], .sidebar-nav-profile a.subLink[data-tracking-label]",function(){l(this,"UtilityNav")}),o.on("click","[data-track-profile-dropdown-open]",function(){var e=require("page-model").session.loggedIn?"Signed_in_profile_dropdown":"Signed_out_profile_dropdown";require(["trjs!ta/Core/TA.Record"],function(t){t.trackEventOnPage("UtilityNav","open",e)})})})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_trips","handlers",["handlers"]);t(["placement","lib/jquery-amd","api-mod","page-model","common/Radio","ta/Core/TA.Record","ta/Core/TA.LocalStorage"],function(e,t,n,o,a,i,l){"use strict";var r=t('[data-placement-name="global_nav_menus"]'),s=a("global-nav"),d=null,u={},c=t("#"+e.id),y=(c.find(".my-trips-dropdown-test"),c.find(".my-trips-dropdown-control"),c.find(".quick-save-test")),f="my-trips-dropdown-test-overlay",p="my_trips_educational_flyout",v=require("page-model").JS_SECURITY_TOKEN,m=require("page-model").session.pageServlet,g=function(e){t.ajax({type:"GET",url:"/data/1.0/trips/item",data:{limit:2},beforeSend:function(e){e.setRequestHeader("X-Requested-By",v)},success:e})},h=function(e){return(new Date).getTime()-e<2592e6},_=function(n){var o=["overlays/position","overlays/styles/flyout","overlays/options/destroyOnHide","overlays/options/autoReposition","overlays/options/fade"],a=function(e,t,o,a,i){return[new t(n[0],"global-nav-flyout global-nav-utility my-trips-dropdown-test-flyout"),e.bottomLeft([-20,-3]),o,a,i(i.SHORT,!0,!0)]};n.on("click",".ui_close_x",function(){s.trigger("hide-overlays",f)}),s.trigger("show-overlay",f,t("#"+e.id).find(".masthead-saves")[0],o,null,a)},w=function(){return t.find(".ui_notification_container").length||t.find(".ui_overlay").length||t.find("#qual_ol").length},b=function(){setTimeout(function(){!w()&&y.length>0&&l.has(p)&&!l.getObject(p)&&0==n.scrollTop()&&(_(y),l.set(p,!0),i.trackEventOnPage(p,"flyout_shown",m,0,!1))},1e3)};s.on("hide-overlays",function(e){e?u[e]&&u[e].hide("hide-overlay")&&(u[e]=null):d&&d.hide("replace-el")}),s.on("show-overlay",function(e,t,n,o,a){d&&d.hide("new-overlay");var i=["trjs!overlays/Overlay"].concat(n);require(i,function(n){var i=a.apply(null,[].slice.apply(arguments,1)),l=new n(t,i);l.domParent=r.find(".global-nav-overlays-container")[0],l.show(),o&&o(l),d=l,e&&(u[e]=l)})}),s.on("run-quick-save-test",function(){l.has(p)||g(function(e){e.data&&(e.data.length<=1||!h(e.data[1].date))&&(l.set(p,!1),b())})}),l.enabled&&("complete"===document.readyState?b():t(window).ready(b))})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_dropdowns","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(e,n){"use strict";var a=n("#taplc_global_nav_0"),t=null;a.on("mouseenter",".global-nav-links-container [data-element]",function(e){var s=n(this),r=s.find("a").first();t&&t.hide("new-overlay");var o=a.find(s.data("element")).clone();if(o.length){var i=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(i,function(i,l,v,u,d){var c=new i(s[0],new l(o[0],"global-nav-flyout global-nav-menu"),v,u.bottomRight([0,1]),d);c.domParent=a.find(".global-nav-overlays-container")[0],c.show(),r.attr("data-active-menu-trigger",!0),n(e.currentTarget).find(".ui_tab").addClass("hovering"),c.on("hide",function(){r.removeAttr("data-active-menu-trigger"),n(e.currentTarget).find(".ui_tab").removeClass("hovering")}),t=c})}}),a.on("mouseenter",".subItemDust",function(e){n(this).siblings(".expandSubItemDust").removeClass("activeL2")}),a.on("mouseenter",".expandSubItemDust.secondLevelSubNav",function(e){var a=n(this);if(!a.hasClass("activeL2")){a.addClass("activeL2"),a.siblings(".expandSubItemDust").removeClass("activeL2");var t=a.find(".secondSubNav.secondLevelSubNav").clone(),s=a.parents(".ui_overlay"),r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseOut","trjs!overlays/options/destroyOnHide"];require(r,function(e,n,r,o){r=function(){};var i=a.parent().parent().parent(),l=i.find("ul.secondSubNav.secondLevelSubNav:visible");0!==l.length&&l!==a&&l.parent().remove();var v=i.find("ul.secondSubNav.thirdLevelSubNav:visible");0!==v.length&&v.remove();var u=a.parent().parent().find("div.ui_overlay.ui_flyout");0!==u.length&&void 0===u.childNodes&&u.remove();var d=new e(a[0],new n(t[0]),r,o);d.domParent=s[0],t.css("display","block"),d.show()})}}),a.on("mouseenter",".expandSubItemDust.thirdLevelSubNav",function(e){var a=n(this);if(!a.hasClass("activeL3")){a.addClass("activeL3"),a.siblings(".expandSubItemDust.thirdLevelSubNav").removeClass("activeL3");var t=a.find(".secondSubNav.thirdLevelSubNav").clone(),s=a.parents(".ui_overlay"),r=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseOut","trjs!overlays/options/destroyOnHide"];require(r,function(e,n,r,o){r=function(){};var i=a.parent().parent().parent().parent().find("ul.secondSubNav.thirdLevelSubNav:visible");0!==i.length&&i.parent().remove();var l=new e(a[0],new n(t[0]),r,o);l.domParent=s[1],t.css("display","block"),l.show()})}})})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_geopill","handlers",["deferred/GeoSearch","handlers"]);n([],function(){})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_links","handlers",["handlers"]);n(["utils/asdf-encoder"],function(e){function n(n,a){window.open(e.asdf(a.getAttribute("data-ahref")).replace(/&amp;/g,"&"),"_self")}return{clickAboutGeoLink:n}})});
require(["ta/p13n/placements"],function(e){var r=e.define.bind(e,"masthead_search","handlers",["deferred/lateHandlers","handlers"]);r(["placement","ta/Core/TA.Store","common/Radio"],function(e,r,a){function n(){if(e.params&&"typeahead_to_store"in e.params){var a=e.params.typeahead_to_store;if(a)for(var n in a)a.hasOwnProperty(n)&&r.store(n,a[n])}}n();var t=r.retrieve("typeahead_dual_search_options");return e.require(["trjs!deferred/lateHandlers"],function(e){a("masthead_search").on("open",function(){e.showSearchOverlay()})}),{getOptions:function(){return t}}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"trip_planner_breadcrumbs","handlers",["handlers"]);n(["placement","ta/Core/TA.FireEvent","utils/urlDecoder"],function(e,n,i){"use strict";function r(n){var i=document.getElementById(e.id);i&&(i.innerHTML=n.innerHTML)}function t(e,n){i.goToLink(e,n)}function o(e,n){return require.defined("ta/util/Cookie")&&require("ta/util/Cookie").setOneTimeCookie(e,n)}return n.on("update-"+e.name,r),{goToLink:t,onClick:o}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"featured_road_trip_hotels_impression_tracker","handlers",["handlers"]);t(["placement"],function(e){function t(e){if(e){var t=e.replace("[timestamp]",Date.now()),n=document.createElement("img");n.src=t,n.height="0",n.width="0",n.setAttribute("data-owner","Road Trips Pixel"),document.body.append(n)}}function n(){t(e.params.hotel_impression_pixel)}n()})});
define("ta/Core/TA.PageVisibility",["vanillajs"],function(e){"use strict";function n(){a=!1;for(var e in s)s.hasOwnProperty(e)&&s[e]()}function t(){a=!0;for(var e in f)f.hasOwnProperty(e)&&f[e]()}function d(){var e=document[c]?f:s;for(var n in e)e.hasOwnProperty(n)&&e[n]()}function i(){"undefined"==typeof document[c]?document.addEventListener?(document.addEventListener("focus",n,!1),document.addEventListener("blur",t,!1)):(document.attachEvent("onfocus",n),document.attachEvent("onblur",t)):document.addEventListener(r,d),m=!0}function o(){"undefined"==typeof document[c]?document.removeEventListener?(document.removeEventListener("focus",n,!1),document.removeEventListener("blur",t,!1)):(document.detachEvent("onfocus",n),document.detachEvent("onblur",t)):document.removeEventListener(r,d),a=!1,m=!1}function u(e,n){var t=e.indexOf(n);return t>=0?e.splice(t,1):null}var c,r,f=[],s=[],m=!1,a=!1;return"undefined"!=typeof document.hidden?(c="hidden",r="visibilitychange"):"undefined"!=typeof document.mozHidden?(c="mozHidden",r="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(c="msHidden",r="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(c="webkitHidden",r="webkitvisibilitychange"),{addFocusListener:function(e){s.push(e),m||i()},addBlurListener:function(e){f.push(e),m||i()},removeFocusListener:function(e){e?u(s,e):s.length=0,0===s.length&&0===f.length&&o()},removeBlurListener:function(e){e?u(f,e):f.length=0,0===s.length&&0===f.length&&o()},hidden:function(){return"undefined"!=typeof document.hidden?document.hidden:a}}});
define("utils/VisibilityCheckFunction",function(){function t(){return Element.prototype.getBoundingClientRect?Promise.resolve(function(t){if(!t)return!1;var n;try{n=t.getBoundingClientRect()}catch(t){return!1}return e(n,{top:0,left:0,bottom:Math.max(document.documentElement.clientHeight,window.innerHeight||0),right:Math.max(document.documentElement.clientWidth,window.innerWidth||0)})}):new Promise(function(t){require(["trjs!api-mod"],function(n){t(function(t){if(!t)return!1;var i=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r=n.scrollTop(),u=r+o,h=n.scrollLeft(),c=h+i,f=n.getPosition(t);return e({width:t.offsetWidth,height:t.offsetHeight,top:f.top,left:f.left,bottom:f.top+t.offsetHeight,right:f.left+t.offsetWidth},{top:r,left:h,bottom:u,right:c})})})})}function e(t,e){return 0!==t.width&&0!==t.height&&(!(t.bottom<=e.top||t.top>=e.bottom)&&!(t.left>=e.right||t.right<=e.left))}function n(){return i}var i=t();return{getPromise:n}});
define("utils/VisibilityChecker",["utils/to-array","utils/is-element","utils/VisibilityCheckFunction"],function(e,t,r){function i(r,i,n){return null==n?i:t(n)?i.concat(n):"string"==typeof n?i.concat(e(r.querySelectorAll(n))):i}function n(e){var t=e.elements,r=e.context||document,n=e.callback,c=!1;if(!Array.isArray(t))throw new TypeError("VisibilityChecker must have an elements array");return function(){c||(c=!0,l.then(function(e){c=!1;var l=t.reduce(i.bind(null,r),[]).filter(e);if(l.length>0&&"function"==typeof n){var u=n(l);Array.isArray(u)&&(t=u)}}))}}var l=r.getPromise();return n});
define("utils/classnameUtils",["vanillajs"],function(){function s(s){return e[s]?e[s].lastIndex=0:e[s]=new RegExp("(\\s|^)"+s+"(\\s|$)","g"),e[s]}var a={},e={};return a.hasClass=function(a,e){return!!a&&(a.classList?a.classList.contains(e):s(e).test(a.className))},a.addClass=function(s,e){s&&e&&(s.classList?s.classList.add(e):a.hasClass(s,e)||(s.className+=" "+e))},a.removeClass=function(a,e){a&&e&&(a.classList?a.classList.remove(e):a.className=a.className.replace(s(e)," "))},a.toggleClass=function(s,e,n){s&&(n||void 0===n&&!a.hasClass(s,e)?a.addClass(s,e):a.removeClass(s,e))},a.getParentByClassname=function(s,e){for(var n=s&&s.parentNode;n;n=n.parentNode)if(a.hasClass(n,e))return n;return null},a});
define("hotels/recentlyViewedHotels",["ta/Core/TA.LocalStorage","ta/Core/TA.PageVisibility","ta/Core/TA.Event","utils/VisibilityChecker","utils/classnameUtils","common/trackingStreams","utils/throttle"],function(e,t,n,o,i,r,c){function a(t,n){e.onLocalStorageSessionInit(function(){var o=e.getSessionKey(t)||{};o[n]||(o[n]=!0,e.setSessionKey(t,o))})}function l(e){v(e)&&(a(w,e),A&&A())}function s(t){e.onLocalStorageSessionInit(function(){u(t)||a(y,t)})}function u(t){var n=e.getSessionKey(w)||{};return!!n[t]}function d(e,t){_[e]=t,delete I[e],t.setAttribute(R,e),T||m(_)}function m(e){var i=o({elements:Object.values(e),callback:function(e){var t=e[0].getAttribute(R)||0;r.trackEvent(b,"recentlyViewTreatmentSeen",t),T=!0,f()}});f(),A=c(i,300),window.addEventListener("scroll",A),n.on("page-polling-complete",A),t.addFocusListener(A)}function f(){A&&(window.removeEventListener("scroll",A),n.off("page-polling-complete",A),t.removeFocusListener(A),A=null)}function C(e,n,o){Object.keys(I).length||t.addFocusListener(k),I[e]={fn:i.addClass.bind(null,n,o),elmt:n}}function k(){e.onLocalStorageSessionInit(function(){var n=e.getSessionKey(y)||{};Object.keys(n).forEach(function(e){I[e]&&(I[e].fn(),d(e,I[e].elmt))}),Object.keys(I).length||t.removeFocusListener(k)})}function v(e){return!!_[e]}function g(e,t,n){n&&require.defined("ta/Core/TA.Record")?require("ta/Core/TA.Record").trackEventOnPage(b,e,t):r.trackEvent(b,e,t)}function H(e,t,n,o){v(e)&&g(t,n,o)}function L(t,n,o,i){e.onLocalStorageSessionInit(function(){u(t)&&g(n,o,i)})}function S(){var e=document.querySelectorAll("["+R+"]");g("NUM_RECENTLY_VIEWED",e.length)}function E(e){var t=h[window.pageServlet]||h.Unknown;t.trackCommerce(e,"COMMERCE_CLICK_"+t.id,e,!0)}require(["trjs!ta/Core/TA.Record"],function(){});var y="recently_viewed_ids",w="recently_viewed_interactions",b="RECENTLY_VIEWED_HOTEL",R="data-is-recently-viewed",h={"Hotels":{id:"H",trackCommerce:H},"MobileHotels":{id:"H",trackCommerce:H},"Hotel_Review":{id:"HR",trackCommerce:L},"MobileHotel_Review":{id:"HR",trackCommerce:L},"HotelsList":{id:"HL",trackCommerce:H},"HotelsNear":{id:"HN",trackCommerce:H},"SmartDeals":{id:"SD",trackCommerce:H},"MobileSmartDeals":{id:"SD",trackCommerce:H},"HotelHighlight":{id:"HH",trackCommerce:H},"MobileHotelHighlight":{id:"HH",trackCommerce:H},"Unknown":{id:"UK",trackCommerce:function(){}}},_={},I={},T=!1,A=null;return{visitedLocation:s,interactedWithLocation:l,registerUnvisitedLocation:C,registerVisitedLocation:d,trackEventIfRecentlyViewed:H,trackEventIfRecentlyInteracted:L,trackRecentlyViewedCountOnPage:S,trackCommerceClick:E}});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"recently_viewed_helper_detail","handlers",["handlers"]);n(["hotels/recentlyViewedHotels"],function(e){e.visitedLocation(require("page-model").LOC_ID)})});
define("utils/ScrollInContainer",["lib/jquery-amd","ta/Core/TA.Event","utils/throttle"],function(t,e,o){function i(i){function n(){var e=t(i.bottomAnchor);e.length||(A=!0)}function s(e,o){if(!A&&"undefined"!=typeof d){var n=l.height()-(h.offset().top-l.offset().top),s="fixed"===h.css("position")||"absolute"===h.css("position");if(s||!(n<=h.outerHeight(!0))){e=e||window.event;var r,p=i.topMargin+(t(i.topDodgeFixed).outerHeight()||0);r=i.topAnchor?t(i.topAnchor).offset().top+t(i.topAnchor).height():l.offset().top;var w,v=t(i.listingSelector).length,b=(l.height()+h.height())/2,y=t(window).scrollTop()+p,x=0,k=0;if(y>r){var z=t(i.bottomAnchor);if(z.length){if(x=z.offset().top,x-r<=h.height())return void h.css({position:"static",width:l.width()})}else x=r+l.height();x-=f(),y+h.height()>=x?(w="absolute",k=i.bottomMargin,k+=c?r+l.height()-x:a.height()+a.offset().top-(z.length?z.offset().top:0)):w="fixed"}else w="static";if(i.doubleRailTest&&v>=20&&y>b&&!S&&(ta.trackEventOnPage("DoubleRailAd","Impression","",1,!0),S=!0),w!==m||o||!e||"resize"===e.type){if(e&&"resize"===e.type&&"right"===i.stickySide){var M=a.width();g+=M-u,u=M}if(m=w,"fixed"===w)h.css({bottom:"auto",top:p,left:l.offset().left+d});else if("absolute"===w){var R=h.offset().left,D=l.offset().left;g=c?R-D:R-a.offset().left,h.css({bottom:k,top:"auto",left:g})}if(h.css({position:m,width:l.width()}),"center"===i.stickySide){var T=l.innerWidth()/2-h.width()/2;"fixed"===w&&(T+=l.offset().left),h.css("left",T)}}}}}function f(){var e=t(x),o=i.bottomMargin;return"Restaurant_Review"===window.pageServlet&&e.length>0&&(o+=750),o}function r(e){var i=Date.now();s(e);var n=Date.now()-i;n>w&&(b++,b>=v&&(t(window).off("scroll resize",r),t(window).on("scroll resize",o(s,300))))}var l,h,a,c,d,g,p,u,w=50,v=5,b=0,m="static",A=!1,y=!0,S=!1,x=".belowScrolingAd";i=t.extend({bottomMargin:0,topMargin:0,stickySide:"left",doubleRailTest:!1},i),this.init=function(f,w){var v=t(i.bottomAnchor);if(v.length){t(window).on("scroll",o(n,500)),l=t(f),h&&h.is(w)||(h=t(w),a=h.offsetParent()),m="",u=a.width();var b=h.width();if(y){y=!1;var A=h.offset().left,S=l.offset().left;d=A-S,c=a.is(l),g=c?A-S:A-a.offset().left,t(window).on("scroll resize",r),e.on("page-changes-pending",this.test.bind(this))}else{var x=p-b;x&&(d+=x,"right"===i.stickySide&&(g+=x))}p=b,s()}},this.test=function(){s(null,!0)}}return i});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_hr_ad_wrapper","handlers",["handlers"]);t(["placement","ta/Core/TA.FireEvent","utils/ScrollInContainer"],function(e,t,n){function o(e){var t=document.getElementById(e.domId);t&&a.contains(t)&&i&&i.contains(t)&&d.offsetTop>c.offsetTop+c.offsetHeight&&s.init(i,c)}function r(){t.on("onAdRender",o),e.params.contentUpdatedEvent&&t.on(e.params.contentUpdatedEvent,s.test.bind(s))}var a=document.getElementById(e.id),i=a.querySelector(".ad_column_sticky"),c=i&&i.querySelector(".stickyAds"),d=a.querySelector(".bottom_anchor"),s=new n({topMargin:parseInt(e.params.topMargin,10)||24,bottomMargin:parseInt(e.params.bottomMargin,10)||18,stickySide:"center",topDodgeFixed:".persistent_tabs_header",topAnchor:a.querySelector(".top_anchor"),bottomAnchor:d}),p=a.querySelector(".hide-ad");if(p){var l=p.querySelector(".gptAd");l&&l.classList.add("inactive")}r()})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"resp_hr_rep_pro_ad_wrapper","handlers",["handlers"]);t(["placement","ta/Core/TA.FireEvent","utils/ScrollInContainer"],function(e,t,n){function r(){d.init(i,c)}function o(){r(),t.on("onAdRender",r),t.on(e.params.contentUpdatedEvent,d.test.bind(d))}var a=document.getElementById(e.id),i=a.querySelector(".ad_column_sticky"),c=i&&i.querySelector(".stickyAds"),p=a.querySelector(".bottom_anchor"),d=new n({topMargin:parseInt(e.params.topMargin,10)||24,bottomMargin:parseInt(e.params.bottomMargin,10)||18,stickySide:"center",topDodgeFixed:".persistent_tabs_header",topAnchor:a.querySelector(".top_anchor"),bottomAnchor:p});o()})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"hotel_impression_tracker","handlers",["handlers"]);n(["placement","ta/Core/TA.Event"],function(e,n){"use strict";var t=function(e,n){var t=document.createComment("Activity name for this tag: "+n+" hotel impression"),a=document.createElement("img");a.src=e,a.height="1",a.width="1",a.border="0",a.setAttribute("style","display:none"),document.body.appendChild(t),document.body.appendChild(a)};n.queueForLoad(function(){if(e.params&&e.params.hotelBrand&&e.params.impressionPixels)for(var n=e.params.impressionPixels.length,a=0;a<n;a++)t(e.params.impressionPixels[a],e.params.hotelBrand)},"Initialization of "+e.name)})});
define("ta/sales/metaClickComScoreTag",["ta/util/Error","ta/Core/TA.Event"],function(e,t){"use strict";function i(e){e&&(this.providerName=e.providerName,this.isOTAPixel=e.isOTAPixel,this.vendorName=e.vendorName,this.trackingPixel=e.trackingPixel,this.brandName=e.brandName,this.locationIds=e.locationIds,this.valid=!(!this.trackingPixel||!this.vendorName&&!this.providerName))}var n=["vendorname","provider","locationid"],r="TripAdvisor",a="NoProvider",o=[],d=/\[timestamp\]/,c=/\[OrderValue\]/,l=/\[Partner\]/,s=function(t){if(window.IS_DEBUG){if(!t)return void e.record(null,"Click attributes are empty, pathname="+window.location.pathname);for(var i=0;i<n.length;i++)t[n[i]]||e.record(null,"Missing click attribute: "+n[i]+". Pathname="+window.location.pathname)}},m=function(e,t){var i=t.locationIds,n=e.dataset.locationid||-1;return window.Array&&window.Array.isArray(i)?0==i.length||i.indexOf(n)>-1:!i||i.includes&&i.includes(n)},u=function(e){if(e&&e.dataset){s(e.dataset);for(var t=0;t<o.length;t++){var i=o[t],n=e.dataset.provider===i.providerName||i.providerName===a,d=e.dataset.vendorname===r,c=n&&!(i.isOTAPixel||i.vendorName===r||d),l=n&&d&&i.vendorName===r,u=i.isOTAPixel&&!(n||d);l?i.brandName&&!m(e,i)||f(e,i,"IB"):(c||u)&&f(e,i,"meta")}}},v=function(){return o.length},h=function(e,t,i){try{if(i)return e.replace(t,i)}catch(e){}return e},f=function(e,t,i){i+=t.isOTAPixel?" OTA":"";var n=t.trackingPixel;n=h(n,d,(new Date).getTime()),n=h(n,l,e.dataset.offerclient),n=h(n,c,encodeURI(e.dataset.pernight));var r=document.createComment("Activity name for this tag: "+t.providerName+" "+i+" click page view tag"),a=document.createElement("img");a.src=n,a.height="1",a.width="1",a.border="0",a.setAttribute("style","display:none"),require(["@ta/platform.runtime"],function(e){e.importBundle("@ta/platform.consent").then(function(e){e.requestConsent(e.CategoriesEnum.ADVERTISING,function(){document.body.appendChild(r),document.body.appendChild(a)})})})},p=function(){t.on("metaLinkClick",g.chkMetaClick)},g={};return g.chkMetaClick=function(e){v()&&u(e)},g.addTrackingProvider=function(t){var n=new i(t);n&&n.valid?o.push(n):e.record(null,"ta.sales.metaClickTag :: Tracker invalid : "+t.trackingPixel?t.trackingPixel:"missing tracking pixel")},g.registerEvents=function(){v()&&p()},g});
require(["ta/p13n/placements"],function(e){var r=e.define.bind(e,"meta_click_tracker","handlers",["handlers"]);r(["placement","ta/sales/metaClickComScoreTag"],function(e,r){"use strict";var n=function(e,n,t){r.addTrackingProvider(t)},t=function(e,n){r.registerEvents()};return{addTrackingProvider:n,registerEvents:t}})});
