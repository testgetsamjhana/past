(this.$WP=this.$WP||[]).push(["9pmixz",(t,s)=>{"use strict";var e,i,o,r,a,h,n,p,l,u,d,c,g,x,m,v,w,S,I,f,C,P,k,N,b,T,M,L=t=>{var{localize:s}=r();return x("div",{className:"rpenj R4 _Q f u j",children:x("span",{className:"iNXNY S2 H2 c b",children:s("carousel_progress_numbers",{photos:t.currentIndex,totalPhotos:t.numItems})})})},z={},_="registerState",y=({isRight:t,size:s,onClick:e,disabled:o,allowOverClicking:r})=>{var a;if(o){if(r)return null;a=t?"LErlQ Z1":"nsNbR Z1"}else a=t?"OqTrP Z1 _S":"pyuxf Z1 _S";return x("div",{className:i(a,s&&"small"===s?"WTPtd":null,"is-shown-at-tablet"),onClick:e,"data-clicksource":"CarouselArrow"})},O=({totalCount:t})=>{var{localize:s}=r(),e=a();return m("div",{className:"XZTLm _Q s l _U S5 Wh",children:[x(c,{name:"camera"}),"Â ",x("span",{className:i("is-shown-at-tablet","qPmnQ _S"),children:s("all_photos_parens",{nCount:e.formatNumber("integer",t)})}),x("span",{className:"is-hidden-tablet",children:e.formatNumber("integer",t)})]})},q={__key:57131967992197,id:"33f612a851854d900cf501018b70674e",loc:{},definitions:[]};return[()=>{k=L,(N=new l("photo-carousel",z)).setReducer(((t=z,s)=>{if(s.type===_){var e=s.uniqueId,i={currentIndex:s.newIndex,hasWrapped:s.hasWrapped},o={...t};return o[e]=i,o}return t})),t("PhotoCarousel$1",f=class extends e{static getDerivedStateFromProps({displayIndex:t,totalCount:s,photos:e},{currentIndex:i}){if(void 0===t)return null;var o=(s||e.length)-1;return t!==i?{currentIndex:Math.max(Math.min(t,o),0)}:null}constructor(t){super(t),this.swallow=t=>{t.stopPropagation()},this.previous=t=>{t.stopPropagation(),t.preventDefault(),this.nav(-1,!0,t),this.props.onNextTrackingProps&&n(this.props.onNextTrackingProps)},this.next=t=>{t.stopPropagation(),t.preventDefault(),this.nav(1,!0,t),this.props.onPreviousTrackingProps&&n(this.props.onPreviousTrackingProps)},this.nav=(t,s,e)=>{this.props.onNav&&this.props.onNav(t,s);var i=this.props.totalCount||this.props.photos.length,o=this.state.currentIndex+t;if(this.props.wrapPhotos||!(o>=i||o<0)){var r,a=this.state.hasWrapped;o>=i&&this.props.wrapPhotos&&(a=!0),(r=o<0?a?Math.max(Math.min(i,i+o),0):0:Math.max(Math.min(i,this.props.wrapPhotos?o%i:o),0))!==this.state.currentIndex&&(r>=this.props.photos.length-1-2&&this.props.onLoadLast&&this.props.onLoadLast(),this.setState({currentIndex:r,hasWrapped:a}),this.props.onPhotoChange&&this.props.onPhotoChange(r,e))}},this.swipeState={xStart:null,xLast:null,swipeThreshold:null},this.touchStart=t=>{t&&t.currentTarget&&t.touches&&1===t.touches.length&&(this.swipeState.swipeThreshold=.1*t.currentTarget.clientWidth,this.swipeState.xStart=t.touches[0].pageX-t.currentTarget.offsetLeft,this.swipeState.xLast=null)},this.touchMove=t=>{if(t&&t.currentTarget&&t.touches&&1===t.touches.length&&null!==this.swipeState.swipeThreshold&&null!==this.swipeState.xStart){this.swipeState.xLast=t.touches[0].pageX-t.currentTarget.offsetLeft;var s=this.swipeState.xStart-this.swipeState.xLast;this.swipeState.swipeThreshold<=Math.abs(s)&&this.touchEnd(t)}},this.touchEnd=t=>{if(null===this.swipeState.swipeThreshold||null===this.swipeState.xLast||null===this.swipeState.xStart)return this.swipeState.xStart=null,void(this.swipeState.xLast=null);var s=this.swipeState.xStart-this.swipeState.xLast;this.swipeState.swipeThreshold<=Math.abs(s)&&(this.swipeState.xStart=null,this.swipeState.xLast=null,this.nav(s/Math.abs(s),!1,t))};var s=0,e=!1,{uniqueId:i}=this.props;if(this.props.saveReduxState&&i){var o,r,a=(t=>{return(s=u().getState(),N.getFrom(s))[t];var s})(i);s=null!=(o=null==a?void 0:a.currentIndex)?o:0,e=null!=(r=null==a?void 0:a.hasWrapped)&&r}this.state={currentIndex:s,hasWrapped:e}}componentDidUpdate(){var{uniqueId:t}=this.props;this.props.saveReduxState&&t&&u().dispatch(((t,s,e)=>N.action({type:_,uniqueId:t,newIndex:s,hasWrapped:e}))(t,this.state.currentIndex,this.state.hasWrapped))}render(){var{maxIndicatorDots:t=5}=this.props,s=this.props.totalCount||this.props.photos.length,e=this.props.hideArrows?"QQLSH":null,r=this.state.currentIndex>0||this.state.hasWrapped,a=s>1&&(this.state.currentIndex<s-1||this.props.wrapPhotos),n=!this.props.noCta,l=this.state.currentIndex===this.props.photos.length-1&&this.props.totalCount!==this.props.photos.length,u=()=>{this.props.onPhotoMouseover&&this.props.onPhotoMouseover(l)};return m("div",{className:i("FSYKZ _S",e),style:{width:this.props.width,height:this.props.height},onClick:()=>{var t=this.props.photos[Math.min(this.state.currentIndex,this.props.photos.length-1)];this.props.onClick&&t&&this.props.onClick(t.id)},onTouchStart:t=>{this.touchStart(t),u()},onTouchMove:this.touchMove,onTouchEnd:this.touchEnd,onMouseEnter:u,children:[x("ul",{className:"VBGdb",children:this.props.photos.map(((t,s)=>x("li",{"data-testid":t.id,className:i("FQKMe",this.props.overflowHidden?"_h":null,this.state.currentIndex===s?"HeqAo":null),children:x(h,{shouldLoad:Math.abs(this.state.currentIndex-s)<=2,children:this.props.imageContainer?this.props.imageContainer(t):x(d,{sources:t.photoSizes,width:"100%",height:this.props.photoHeight||"100%",notLazy:!this.props.lazyLoadImages,ssrContainerDimensions:0===this.state.currentIndex?this.props.ssrContainerDimensions:void 0,fitStrategy:this.props.fitStrategy,backgroundSizeCalculator:this.props.backgroundSizeCalculator,centerImage:this.props.centerImage})})},t.id)))}),this.props.children?x("div",{className:"epBTZ",children:this.props.children({currentIndex:this.state.currentIndex})}):null,n?m(v,{children:[x("div",{className:"UNNen Z1 _S",children:m("span",{className:"PDqBH d S7 n q Vm",children:[x(c,{name:"expand"})," ",x(o,{id:"full_view"})]})}),x("div",{className:"rtEgV"})]}):null,x(y,r?{isRight:!1,size:this.props.arrowSize,onClick:this.previous,disabled:!1,allowOverClicking:this.props.allowOverClicking}:{isRight:!1,size:this.props.arrowSize,onClick:this.swallow,disabled:!0,allowOverClicking:this.props.allowOverClicking}),x(y,a?{isRight:!0,size:this.props.arrowSize,onClick:this.next,disabled:!1,allowOverClicking:this.props.allowOverClicking}:{isRight:!0,size:this.props.arrowSize,onClick:this.swallow,disabled:!0,allowOverClicking:this.props.allowOverClicking}),!!this.props.showOptimusBadge&&x("div",{className:"IFKIs u",children:x(p,{variant:"plus-logo-short-white",height:21})}),this.props.badgeTopLeft&&!this.props.showOptimusBadge&&x("div",{className:"KqtfM u",children:this.props.badgeTopLeft}),this.props.showIndicatorDots&&s?x(g,{numDots:Math.min(t,s),numItems:s,currentIndex:this.state.currentIndex}):null,this.props.showProgress&&x(k,{currentIndex:this.state.currentIndex+1,numItems:s})]})}}),b=f,t("Photostrip$1",C=class extends e{constructor(...t){super(...t),this.state={currentIndex:0},this.onPhotoClick=t=>{this.setState({currentIndex:t}),this.props.onPhotoSelected&&this.props.onPhotoSelected(t)}}static getDerivedStateFromProps({selectedIndex:t,photos:s},{currentIndex:e}){if(void 0===t)return null;var i=s.length-1;return t!==e?{currentIndex:Math.max(Math.min(t,i),0)}:null}render(){if(!this.props.photos.length)return null;var t=Math.max(Math.min(this.state.currentIndex,this.props.photos.length-1),0),s=this.props.numItemsInRow?this.props.numItemsInRow:this.props.photos.length,e=0!==s?1/s:0;return x("div",{className:"nTdOo f K",children:this.props.photos.map(((s,o)=>x("div",{className:i("sjGtH _T _S",t===o?"oQxrA":null),style:{flexBasis:`calc(${100*e-.01}% - 2px)`},onClick:()=>this.onPhotoClick(o),children:x(d,{sources:s.photoSizes,height:"100%",width:"100%"})},s.id)))})}}),T=C,M=O,t("LocationPhotoCarouselPagingProvider$1",P=class extends e{constructor(...t){super(...t),this.state={currentIndex:0},this.getPhotos=(t,s)=>{var e=[];return e.length<this.props.pageSize&&t.photos&&e.push(...t.photos),s&&t.thumbnail&&(e=[t.thumbnail,...e.filter((s=>s.id!==t.thumbnail.id))]),(e=[...new Map(e.map((t=>[t.id,t]))).values()])||[]},this.getOffset=t=>t>=1?t+1:0,this.getNextPageOnClick=()=>{this.getNextPage(this.state.currentIndex)},this.getNextPage=t=>{t<(this.photoCount||0)-1&&this.setState({currentIndex:t+this.props.pageSize})},this.photoCount=null}render(){if(this.props.locationId<0)return this.props.children({photos:[],photoCount:0,getNextPage:()=>{}});var t=this.getOffset(this.state.currentIndex),s={locationId:this.props.locationId,plimit:this.props.pageSize,poffset:t,filter:S()};return x(w,{query:q,variables:s,children:({fetching:s,data:e})=>e&&e.locations&&e.locations[0]?(s||null!==this.photoCount||(this.photoCount=e.locations[0].photoCount),x(I,{data:s||!e.locations||0===e.locations.length?[]:this.getPhotos(e.locations[0],0===t),identifier:t=>String(t.id),children:t=>this.props.children({photos:t,photoCount:this.photoCount||0,getNextPage:s?()=>{}:this.getNextPageOnClick})})):null})}}),t({LocationPhotoCarouselPagingProvider:P,PhotoCarousel:b,PhotoCount:M,Photostrip:T})},[t=>e=t.Component,t=>i=t.default,t=>(o=t.default,r=t.useLocalize,a=t.useIntlFormatter),t=>h=t.default,t=>n=t.default,t=>p=t.default,t=>(l=t.PrivateStateAccessor,u=t.getStore),t=>d=t.ResponsiveImage,t=>c=t.Icon,t=>g=t.default,t=>(x=t.jsx,m=t.jsxs,v=t.Fragment),t=>w=t.Query,t=>S=t.getMediaFilterToRetrieveAllPhotos,t=>I=t.default]]},["1o4yt4","fkji80","17thqz","18vod4","4axon3","sw5ax0","45ddp0","76j3t0","1ybxsm","yk7it8","121h32","1mqwhq","13w1vr","13ky3c"]]);
