(this.$WP=this.$WP||[]).push(["y591su",(e,t)=>{"use strict";var i,l,n,a,r,o,c,u,s,d,m,g,p,v,f,h,y,I,b,S,T,_,w,E,D,k,O,C,R,L,N,H,A,P,B,G,U,x,V,z,M,q,j,W,F,K,Q,X,Y,J,Z,$,ee,te,ie,le,ne,ae,re,oe,ce,ue,se,de,me,ge,pe,ve,fe,he,ye,Ie,be,Se,Te,_e,we,Ee="reefInterstitialData",De="interact",ke="visible",Oe="USER",Ce=e=>e?new Map(JSON.parse(e)):new Map,Re=(e,t,i)=>{var l=Ce(e).get(t),n=(new Date).getTime();return l&&(null==l?void 0:l.find((e=>e.key===i&&(!e.ttl||e.ttl>=n))))||null},Le=(e,t,i,l)=>{var n;return((null==(n=Re(e,t,i))?void 0:n.value)||l)+0},Ne=(e,t,i)=>{var l;return(null==(l=Re(e,t,i))?void 0:l.value)||""},He=(e,t,i,l)=>{var n,a;return!!(null!=(n=null==(a=Re(e,t,i))?void 0:a.value)?n:l)},Ae=(e,t,i,l)=>{var n,a=null==(n=Re(e,t,i))?void 0:n.value;return a&&"object"==typeof a?a[l]:null},Pe=()=>N.get(Ee)||"",Be=(e,t,i)=>{var l,n=e.get(t),a=(new Date).getTime();n=(null==(l=n)?void 0:l.filter((e=>e.key!==i.key&&(!e.ttl||e.ttl>=a))))||[];var r=i;return r.ttl&&(r.ttl+=a),n.push(r),e.set(t,n),e},Ge=(e,t,i,l)=>{if(null!=e){var n=Ce(Pe());Be(n,e,{key:t,value:i,ttl:l}),N.set(Ee,JSON.stringify(Array.from(n.entries())))}},Ue=(e,t,i)=>{if(null!=e){var l=Pe(),n=Ae(l,e,ke,t);Ge(e,ke,{[t]:null==n?1:n+1},i)}},xe=(e,t,i)=>{var l=Ce(H.get(Ee)||"");Be(l,e,{key:t,value:i}),H.set(Ee,JSON.stringify(Array.from(l.entries())))},Ve=({variant:e,displayType:t,displayCount:i,currentSessionId:l})=>{var[n,a]=m(null);return g((()=>{if(e){var n=ze({variant:e,displayType:t,displayCount:i,currentSessionId:l});a(n)}}),[e,t,i,l]),n},ze=({variant:e,displayType:t,displayCount:i,currentSessionId:l})=>{var n=ae.getStorageKey(),a=ae.getObjectValueFromStorage(n,e,ke,"PER_USER"===t?Oe:l);return!(i&&a&&a>=i)},Me=["Hotel_Review","Attraction_Review","AttractionProductReview"],qe=({onDismiss:e,...t})=>{var i,n=l(),a=re({variant:t.variant,displayType:t.displayType,displayCount:null!=(i=t.displayCount)?i:null,currentSessionId:n});return g((()=>{!1===a&&h((()=>{e()}))}),[a,e]),a?w(je,{onDismiss:e,...t}):null},je=({interstitialType:e,variant:t,displayType:i,triggerAction:n,triggerActionSeconds:a,interstitialContent:r,onDismiss:o})=>{var c=oe[e]||null,[u,s]=m(!1),d=l(),{content:p,eligible:v}=r(),f=R((()=>{var e="PER_USER"===i;ae.saveObjectValueToLocalStorage(t,e?Oe:d,e?ne:ie)}));g((()=>{!1!==v&&c||h((()=>{o()}))}),[v,c,o]);var y=null==a?5e3:1e3*a;return g((()=>{var e;v&&"AFTER_SECONDS"===n&&(e=setTimeout((()=>{s(!0)}),null!=y?y:5e3));var t=()=>{v&&"EXIT"===n&&s(!0)};return document.addEventListener("mouseleave",t),()=>{clearTimeout(e),document.removeEventListener("mouseleave",t)}}),[v,n,y,o]),null!=c&&v&&u?w(c,{ref:f,children:p}):null},We=()=>{var[e,t]=m(!1);return g((()=>{if("undefined"!=typeof matchMedia){var e=matchMedia("screen and (max-width: 1023px) and (min-aspect-ratio: 5/3)"),i=()=>{e.matches?t(!0):t(!1)},l="addEventListener"in e;return l?e.addEventListener("change",i):e.addListener(i),i(),()=>{l?e.removeEventListener("change",i):e.removeListener(i)}}}),[]),e},Fe=({dates:e,disclaimer:t,title:i,primaryInfo:l,secondaryInfo:n,merchandisingText:a,rating:r,reviewCount:c,thumbnail:u,topMetaOffer:s,enforceMaxImageSize:d=!1,height:m,width:g,titleSize:p="title-04",bubbleRatingSize:v="medium",label:f})=>{var{localize:h}=o();return E("div",{children:[E("div",{className:F("BdAYm",{UVcQf:d,Asldx:!d,kDAyL:!!s}),children:[w("div",{className:"_T",children:w(X,{source:u,sizeHint:"200px",height:m,width:g,aspectRatio:"1:1"})}),E("div",{className:"ohntd e",children:[f&&f,e,i&&w(x,{variant:p,children:i}),null!=n&&s&&w(x,{variant:"supporting-01",children:n}),r&&c&&c>0&&w("div",{className:"aVdix",children:s?w(K,{size:"medium",rating:r,label:w(x,{variant:"supporting-01",children:h("mobile_reviews_plural",{0:c})})}):w(Q,{size:v,rating:r,numReviews:c})}),null!=l&&w(x,{variant:"supporting-01",children:l}),null!=n&&!s&&w(x,{variant:"supporting-01",children:n}),null!=a&&w(x,{variant:"supporting-03",children:a}),s]})]}),t]})},Ke=({condition:e,wrapper:t,children:i})=>e?t(i):i,Qe=({url:e,onClose:t,onClick:i,children:l,actionButtonLocale:n})=>{var a="MOBILE"===U(),r=We(),{localize:c}=o();return E(D,{children:[w("div",{className:"jXPbc _Q","data-automation":"interstitialClose",children:w(z,{variant:"clear",icon:W,"aria-label":c.string("common_Close"),size:"small",onClick:t})}),E(se,{wrapper:t=>w(q,{theme:"none",href:e,onClick:i,target:"_blank",children:t}),condition:!!e,children:[l,n&&w("div",{className:"yfVIw f F",children:w(V,{variant:"primary",size:a||r?"small":"medium",children:n})})]})]})},Xe=["Hotels","HotelHighlight","Hotel_Review","HotelsList","HotelsNear","SmartDeals","ShowUserReviews"],Ye=["Home","ShowForum","ShowTopic","Tourism"],Je=["Test A"],Ze="HOTELS_RETARGETING",$e=[[]],et=(e,t)=>(null==e?void 0:e.hotels_retargeting_int_meta_v1_1684338130)&&t.includes(null==e?void 0:e.hotels_retargeting_int_meta_v1_1684338130)||!1,tt=e=>{var t=e=>e<10?`0${e}`:e,i=e.getFullYear(),l=e.getMonth()+1,n=e.getDate();return`${i}-${t(l)}-${t(n)}`},it={__key:0x91ff20c9c82e,id:"91ff20c9c82e36be6070fd1cc0d6bb97",loc:{},definitions:[]},lt={__key:18690689365160,id:"10ffc3e674a8193b60a3c456e94db4e3",loc:{},definitions:[]},nt={urlTemplate:null,maxHeight:null,maxWidth:null},at={__key:0xa28bd73a4dd9,id:"a28bd73a4dd9a0e9bacd517e411cf318",loc:{},definitions:[]},rt="TAPS",ot="hotelsRetargetingInterstitial",ct=(e,t)=>{var{params:i}=a(),l=L(),n=B(),r=G(),o=u().formatDate("date_short",new Date(e.visitedTime),"America/New_York");return{trackInteraction:f((({actionType:a,actionSubType:r,additionalClientData:c})=>{var u={actionType:a,actionSubType:r,additionalClientData:c,itemName:ot,itemId:`${e.locationId}`,page:l,geoId:"geoId"in i&&i.geoId||null,locationId:"locationId"in i&&i.locationId||null,team:rt,customData:JSON.stringify({isDatedOffer:!t.isUndated,offerProvider:t.provider,lastVisit:o,lastVisitTimestamp:e.visitedTime})};JSON.stringify(u),n(u)}),[n,e,t,o,i,l]),trackImpression:f((()=>{var n={itemName:ot,itemId:`${e.locationId}`,page:l,geoId:"geoId"in i&&i.geoId||null,locationId:"locationId"in i&&i.locationId||null,team:rt,customData:JSON.stringify({isDatedOffer:!t.isUndated,offerProvider:t.provider,lastVisit:o,lastVisitTimestamp:e.visitedTime})};r(n),JSON.stringify(n)}),[r,e,t,o,i,l])}},ut=()=>{var[e,t]=m(null),[r,o]=m(!1),u=(()=>{var e,t,l,r,o,c,u,s,d,m,g,p,v,f,h,y,I,b,S,T,_,w,E,D,k,O,C,R,L,N,H,A,P=n(),B=a(),[{data:G,fetching:U}]=i({query:it,variables:{recentLocationsLimit:10,uid:P}}),x="Hotel_Review"===B.page||"ShowUserReviews"===B.page?B.params.detailId:null,V=null==G||null==(e=G.insightProfile)||null==(t=e.locations)?void 0:t.filter((e=>{var t,i,l,n,a;return"ACCOMMODATION"===(null==e||null==(t=e.location)?void 0:t.placeType)&&(null==e||null==(i=e.location)||null==(l=i.locationV2)?void 0:l.locationId)!==x&&(null==e||null==(n=e.location)||null==(a=n.defaultUrl)?void 0:a.startsWith("/Hotel_Review"))})),z=V&&V.length>0?V[0]:null,M=null!=(l=null==z||null==(r=z.location)||null==(o=r.locationV2)?void 0:o.locationId)?l:-1,[{data:q,fetching:j}]=i({query:lt,variables:{locationId:M},pause:-1===M}),W={locationId:M,parentGeoId:null!=(c=null==z||null==(u=z.location)||null==(s=u.locationV2)||null==(d=s.hierarchy)?void 0:d.parentGeoId)?c:-1,rating:null!=(m=null==z||null==(g=z.location)||null==(p=g.reviewSummary)?void 0:p.rating)?m:-1,count:null!=(v=null==z||null==(f=z.location)||null==(h=f.reviewSummary)?void 0:h.count)?v:-1,name:null!=(y=null==z||null==(I=z.location)||null==(b=I.locationV2)||null==(S=b.names)?void 0:S.name)?y:"",longOnlyHierarchyTypeaheadV2:null!=(T=null==z||null==(_=z.location)||null==(w=_.locationV2)||null==(E=w.names)?void 0:E.longOnlyHierarchyTypeaheadV2)?T:"",url:null!=(D=null==z||null==(k=z.location)?void 0:k.defaultUrl)?D:"",urlHH:null!=(O=null==q||null==(C=q.Routing_canonicalize)||null==(R=C[0])?void 0:R.url)?O:"",photoSizeDynamic:null!=(L=null==z||null==(N=z.location)||null==(H=N.thumbnail)?void 0:H.photoSizeDynamic)?L:nt,visitedTime:null!=(A=null==z?void 0:z.timestamp)?A:-1},F=Object.entries(W).some((([,e])=>-1===e||""===e||JSON.stringify(e)===JSON.stringify(nt)));return{...W,fetching:U||j,isUndefinedLastBrowsedHotel:F}})(),s=(e=>{var t,r,o,u=a(),s=c(),d=n(),m=l(),{hotels:g}=A(),p=v((e=>{var t={rooms:(null==e?void 0:e.rooms)||1,adults:(null==e?void 0:e.adults)||2,childAgesPerRoom:e&&(null==e?void 0:e.childAgesPerRoom)||$e};if(e&&e.checkInDate&&e.checkOutDate)return{isDefault:e.defaultDates,checkInDate:tt(e.checkInDate),checkOutDate:tt(e.checkOutDate),...t};var i,l=((i=new Date).setDate(i.getDate()+(7-i.getDay()+7)%7+7),i),n=new Date(l),a=new Date(n.setDate(n.getDate()+1));return{isDefault:(null==e?void 0:e.defaultDates)||!0,checkInDate:tt(l),checkOutDate:tt(a),...t}})(g)),{isOptimusSubscriber:f}=P(),h={locationId:e,currencyCode:s,requestCaller:u.page,checkIn:p.current.checkInDate,checkOut:p.current.checkOutDate,usedDefaultDates:p.current.isDefault,rooms:p.current.rooms,adults:p.current.adults,childAgesPerRoom:p.current.childAgesPerRoom,sessionId:m,impressionPlacement:"hotel-retargeting-interstitial",pageLoadUID:d},[{data:y}]=i({query:at,pause:-1===e||!0===f,variables:h});if(null!=y&&null!=(t=y.HPS_getWebHROffers)&&t.complete&&null!=y&&null!=(r=y.HPS_getWebHROffers)&&r.chevronOffers){var I=y.HPS_getWebHROffers.chevronOffers;if(I&&I.length>0){var b,S=I[0];if(null!=S&&S.providerDisplayName&&null!=S&&S.providerLogoUrl&&null!=S&&null!=(b=S.additionalData)&&b.commerceUrl&&null!=S&&S.priceText)return{isUndated:p.current.isDefault,checkInDate:p.current.checkInDate,checkOutDate:p.current.checkOutDate,isDisplayableOffer:!0,isComplete:y.HPS_getWebHROffers.complete,provider:S.providerDisplayName,logoUrl:S.providerLogoUrl,displayPrice:S.priceText,strikethroughPrice:S.strikeThroughText,commerceUrl:S.additionalData.commerceUrl}}}return{isUndated:p.current.isDefault,checkInDate:p.current.checkInDate,checkOutDate:p.current.checkOutDate,isDisplayableOffer:!1,isComplete:(null==y||null==(o=y.HPS_getWebHROffers)?void 0:o.complete)||!1}})(u.locationId),d=L(),p=l(),h=C({experimentKeys:["hotels_retargeting_int_meta_v1_1684338130"]}),I=y((()=>null===e||u.fetching||!s.isComplete),[e,u,s]),b=y((()=>e&&!I&&s.isDisplayableOffer),[e,I,s]),{trackInteraction:S,trackImpression:T}=me(u,s),_=R((()=>{S({actionType:"other",actionSubType:"eligibilibity",additionalClientData:"visible"}),T()})),E=v(new Date),D=f((()=>{var e=E.current.setSeconds(E.current.getSeconds()+30);ae.saveValueToLocalStorage(Ze,De+u.locationId,e,le),t(!1)}),[u]),k=f((e=>{e.stopPropagation(),S({actionType:"click",actionSubType:"hotelCta"}),D()}),[S,D]),O=f((e=>{e.stopPropagation(),S({actionType:"click",actionSubType:"commerceCta"}),D()}),[S,D]),N=f((()=>{S({actionType:"click",actionSubType:"dismiss"}),D()}),[S,D]),H=f((e=>{o(!0),S(e)}),[S]);return g((()=>{if(!u.fetching&&!r&&s.isComplete){var e=!u.isUndefinedLastBrowsedHotel&&(({lastBrowsedHotel:e,page:t,currentSessionId:i,abTest:l,now:n,onControlBucket:a})=>{var r=Ye.includes(t)||Xe.includes(t),o=Xe.includes(t),c=(({lastBrowsedHotel:e,currentSessionId:t,now:i})=>{var{locationId:l,visitedTime:n}=e,a=Ze,r=ae.getStorageKey(),o=new Date(i.getTime()).setDate(i.getDate()-30);return!(((e,t,i)=>ae.getNumberFromStorage(e,"HOTELS_RETARGETING",De+i,-1))(r,0,l)>n||n<o||ae.getStringFromStorage(r,a,ke)===t)})({lastBrowsedHotel:e,currentSessionId:i,now:n}),u=et(l,"control"),s=et(l,Je);return c&&r&&u&&a({actionType:"other",actionSubType:"eligibility",additionalClientData:"nonVisible"}),null===l?null:(!o||!et(l,["Test A"]))&&(r&&s&&c||!1)})({lastBrowsedHotel:u,page:d,currentSessionId:p,abTest:h,now:E.current,onControlBucket:H});t(e)}}),[u,s,d,p,h,E,r,H]),g((()=>{b||I||t(!1)}),[b,I]),{content:y((()=>w(ge,{ref:_,lastBrowsedHotel:u,abTest:h,topMetaOffer:s,onClose:N,onHotelClick:k,onCommerceClick:O})),[_,u,h,s,N,k,O]),eligible:b}},st=["test"],dt="EXPERIENCES_RETARGETING",mt=["AttractionsNear","AttractionsFusion","Attraction_Review","AttractionProductsFusion","AttractionProductReview"],gt={urlTemplate:null,maxHeight:null,maxWidth:null},pt=(e,t)=>(null==e?void 0:e.exp_retargeting_interstitial_v1_1681494745)&&t.includes(null==e?void 0:e.exp_retargeting_interstitial_v1_1681494745)||!1,vt={__key:0x5d564ed2a704,id:"5d564ed2a7044ab02ccfedf79a7909b7",loc:{},definitions:[]},ft={__key:0x88fa21409049,id:"88fa21409049f38a3cfd306cceb941b9",loc:{},definitions:[]},ht={__key:98515156919393,id:"599958eee4612e5aefbae47ee0495992",loc:{},definitions:[]},yt={__key:0xa9a310fb542b,id:"a9a310fb542b03f721d53389f506986e",loc:{},definitions:[]},It="experiencesRetargetingInterstitial",bt=e=>{var{params:t}=a(),i=L(),l=B(),n=G(),r=u().formatDate("date_short",new Date(e.visitedTime),"America/New_York");return{trackInteraction:f((({actionType:n,actionSubType:a,additionalClientData:o})=>{l({actionType:n,actionSubType:a,additionalClientData:o,itemName:It,itemId:`${e.locationId}`,page:i,geoId:"geoId"in t&&t.geoId||null,locationId:"locationId"in t&&t.locationId||null,customData:JSON.stringify({lastVisit:r,lastVisitTimestamp:e.visitedTime,label:e.label,productCode:e.productCode})})}),[l,e,r,t,i]),trackImpression:f((()=>{n({itemName:It,itemId:`${e.locationId}`,page:i,geoId:"geoId"in t&&t.geoId||null,locationId:"locationId"in t&&t.locationId||null,customData:JSON.stringify({lastVisit:r,lastVisitTimestamp:e.visitedTime,label:e.label,productCode:e.productCode})})}),[n,e,r,t,i])}},St=({url:e,lastBrowsedExperience:t,now:i,onInteraction:l})=>{var n="MOBILE"===U(),a=We(),{trackInteraction:o,trackImpression:c}=ve(t),u=R((()=>{o({actionType:"other",actionSubType:"eligibilibity",additionalClientData:"visible"}),c()})),s=f((()=>{var e=i.setSeconds(i.getSeconds()+30);ae.saveValueToLocalStorage(dt,De+t.locationId,e,le),l()}),[t,i,l]),d=f((()=>{o({actionType:"click",actionSubType:"cta"}),s()}),[o,s]),m=f((()=>{o({actionType:"click",actionSubType:"dismiss"}),s()}),[o,s]),{rating:g,count:p,name:v,longOnlyHierarchyTypeaheadV2:h,photoSizeDynamic:y,label:I}=t,b=w("div",{className:"kaYqN",children:h}),S=fe[I]||fe.DEFAULT,T=w("div",{children:$({isBestSeller:"BEST_SELLER"===I,isLtso:"LIKELY_TO_SELL_OUT"===I,isSpecialOffer:!1,isRNPLEligible:!1})});return w(de,{url:e,onClick:d,onClose:m,actionButtonLocale:w(r,{id:"content_widget_view_now"}),children:E("div",{className:"YhbUS",ref:u,children:[w(x,{variant:n||a?"title-04":"title-03",marginBottom:"spacing-03",children:S}),w(se,{wrapper:e=>w(j,{theme:"standalone",children:e}),condition:!!e,children:w("div",{className:"wsWfm",children:w("div",{className:"jXenT f e",children:w(ue,{title:v,secondaryInfo:b,rating:g,reviewCount:p,thumbnail:y,enforceMaxImageSize:!0,height:n||a?100:130,width:n||a?100:130,titleSize:n||a?"title-05":"title-04",bubbleRatingSize:n||a?"small":"medium",label:T})})})})]})})},Tt=()=>{var e=v(new Date),t=l(),[r,o]=m(null),[u,d]=m(!1),p=(()=>{var e,t,l,r=n(),o=c(),u=s(),d=Y(),m=J(),g=!!m,{page:p,params:v}=a(),f="geoId"in v&&v.geoId||-1,h=!!pe.get(f),[{data:I,fetching:b}]=i({query:vt,variables:{recentLocationsLimit:10,uid:r,currency:o},pause:h}),{experience:S,location:T}=y((()=>{var e,t,i,l,n,a,r,o="AttractionProductReview"===p?v.detailId:null,c=null==I||null==(e=I.insightProfile)||null==(t=e.locations)?void 0:t.filter((e=>{var t,i,l;return"ACTIVITY"===(null==e||null==(t=e.location)?void 0:t.placeType)&&(null==e||null==(i=e.location)||null==(l=i.defaultUrl)?void 0:l.startsWith("/AttractionProductReview"))})),u=c&&c.length>0?c[0]:null,s=c&&c.length>1?c[1]:null,d=(null==u||null==(i=u.location)||null==(l=i.locationV2)?void 0:l.locationId)!==o?u:null,m=null===d?s:d;return{experience:m,location:null!=(n=null==m||null==(a=m.location)||null==(r=a.locationV2)?void 0:r.locationId)?n:-1}}),[p,v,I]),[{data:_,fetching:w}]=i({query:ft,variables:{locationId:T},pause:-1===T}),E=null!=(e=null==_||null==(t=_.Routing_canonicalize)||null==(l=t[0])?void 0:l.url)?e:"",D=mt.includes(p),[{data:k,fetching:O}]=i({query:ht,variables:{cartless:!1,currency:o,locale:u,memberId:m,taUniqueId:d},pause:!D||-1===T}),[{data:C,fetching:R}]=i({query:ht,variables:{cartless:!0,currency:o,locale:u,memberId:m,taUniqueId:d},pause:!D||-1===T}),L=y((()=>{var e=null==k?void 0:k.cartCheckoutSummary,t=e&&e.itemCount,i=null==C?void 0:C.cartCheckoutSummary,l=i&&i.itemCount;return Boolean(t&&e.itemCount>0||l&&i.itemCount>0)}),[k,C]),[{data:N,fetching:H}]=i({query:yt,pause:-1===T||!g}),A=y((()=>{var e,t,i=null==N?void 0:N.upcomingBookings;return i&&i.length>0&&null!=(e=null==(t=i.filter(Boolean)[0].tourBookings)?void 0:t.map((e=>null==e?void 0:e.productCode)).filter(Boolean))?e:[]}),[N]),{isFetchingExperience:P,experience:B,isUndefined:G}=y((()=>{var e=b||w||O||R||H,t=(({experienceLocation:e,highlightUrl:t})=>{var i,l,n,a,r,o,c,u,s,d,m,g,p,v,f,h,y,I,b,S,T,_,w,E,D,k,O,C,R,L,N,H,A,P=null==e||null==(i=e.location)||null==(l=i.locationV2)?void 0:l.details,B="LocationSelection_AttractionProductDetails"===(null==P?void 0:P.__typename),G=B?null==(n=P.productDetails)?void 0:n.productCode:null,U=B&&null!=(a=P.productDetails)&&a.productLabels&&(null==(r=P.productDetails)||null==(o=r.productLabels)?void 0:o.length)>0?P.productDetails.productLabels[0]:null;return{locationId:null!=(c=null==e||null==(u=e.location)||null==(s=u.locationV2)?void 0:s.locationId)?c:-1,parentGeoId:null!=(d=null==e||null==(m=e.location)||null==(g=m.locationV2)||null==(p=g.hierarchy)?void 0:p.parentGeoId)?d:-1,rating:null!=(v=null==e||null==(f=e.location)||null==(h=f.reviewSummary)?void 0:h.rating)?v:-1,count:null!=(y=null==e||null==(I=e.location)||null==(b=I.reviewSummary)?void 0:b.count)?y:-1,name:null!=(S=null==e||null==(T=e.location)||null==(_=T.locationV2)||null==(w=_.names)?void 0:w.name)?S:"",longOnlyHierarchyTypeaheadV2:null!=(E=null==e||null==(D=e.location)||null==(k=D.locationV2)||null==(O=k.names)?void 0:O.longOnlyHierarchyTypeaheadV2)?E:"",url:null!=(C=null==e||null==(R=e.location)?void 0:R.defaultUrl)?C:"",urlAph:t,photoSizeDynamic:null!=(L=null==e||null==(N=e.location)||null==(H=N.thumbnail)?void 0:H.photoSizeDynamic)?L:gt,visitedTime:null!=(A=null==e?void 0:e.timestamp)?A:-1,productCode:null!=G?G:"",label:null!=U?U:""}})({experienceLocation:S,highlightUrl:E});return{isFetchingExperience:e,experience:t,isUndefined:Object.entries(t).some((([e,t])=>"label"!==e&&(-1===t||""===t||Z(t,gt))))}}),[S,E,b,w,O,R,H]);return y((()=>({...B,fetching:P,isUndefinedLastBrowsedExperience:G,upcomingBookingsProductCodes:A,cartOrCheckoutHasItems:L,isSuppressedGeoId:h})),[B,P,G,A,L,h])})(),h=C({experimentKeys:["exp_retargeting_interstitial_v1_1681494745"]}),I=f((()=>{var e=p.upcomingBookingsProductCodes.includes(p.productCode);return!(p.isUndefinedLastBrowsedExperience||p.cartOrCheckoutHasItems||e||p.isSuppressedGeoId)}),[p]),b=y((()=>null===r||p.fetching),[r,p]),S=y((()=>r&&!b),[r,b]),{trackInteraction:T}=ve(p),_=f((e=>{d(!0),T(e)}),[T]),E=()=>o(!1);return g((()=>{if(!p.fetching&&!u){var t=!!I()&&(({lastBrowsedExperience:e,now:t,abTest:i,onControlBucket:l})=>{var n=(({lastBrowsedExperience:e,now:t})=>{var{locationId:i,visitedTime:l}=e,n=ae.getStorageKey(),a=new Date(t.getTime()).setDate(t.getDate()-30),r=new Date(t.getTime()).setMinutes(t.getMinutes()-30);return!(((e,t,i)=>ae.getNumberFromStorage(e,"EXPERIENCES_RETARGETING",De+i,-1))(n,0,i)>l||l>r||l<a)})({lastBrowsedExperience:e,now:t}),a=pt(i,"control"),r=pt(i,st);return null===i?null:(n&&a&&l({actionType:"other",actionSubType:"eligibilibity",additionalClientData:"nonVisible"}),r&&n||!1)})({lastBrowsedExperience:p,now:e.current,abTest:h,onControlBucket:_});o(t)}}),[p,e,h,u,_,I]),g((()=>{S||b||(ae.saveObjectValueToLocalStorage(dt,t,ie),o(!1))}),[S,b,t]),{content:y((()=>w(he,{url:p.urlAph,lastBrowsedExperience:p,onInteraction:E,now:e.current})),[p,e]),eligible:S}},_t=({tier:e,...t})=>{var i=`reef-interstitial-${t.variant}`;return k({factory:({dismiss:e})=>(e=>w(ce,{...t,onDismiss:e}))(e),eventTypes:[i],key:i,tier:e}),null},wt=({interstitialType:e,variant:t,displayType:i,triggerAction:l,tier:n,...a})=>{var r=t?ye[t]:ye.DEFAULT;return null!=e&&null!=t&&null!=i&&null!=l&&null!=n&&"function"==typeof r?w(_t,{...a,interstitialType:e,variant:t,displayType:i,triggerAction:l,tier:n,interstitialContent:r}):null},Et=({section:e})=>{var{interstitialType:t,variant:i,displayType:l,displayCount:n,triggerAction:a,triggerActionSeconds:r,tier:o}=e,c=(e=>null!=e&&Ie[e]||null)(t);return null==c?null:w(c,{interstitialType:t,variant:i,displayType:l,displayCount:n,triggerAction:a,triggerActionSeconds:r,tier:o})},Dt="IPGggjy++6MSbQG5eff2USBrGh60isM6+mb0IyIm7HEoA0pavHo8ZegLdKuAXMwlSVAUioSqSfbhWNo8k7pG6A==",kt="IPGggjy++6MSbQG5eff2USBrGh60isM6+mb0IyIm7HEqXfV3HzV7e05O2IcEfNAJ",Ot="IPGggjy++6MSbQG5eff2UYmPZfStH2m26R5yrjWH9qjaxtN4egnIGOD/DetFZpdR",Ct=["Home","Tourism","Hotels","Hotel_Review","HotelHighlight","HotelsList","HotelsNear","Attractions","Attraction_Review","Attraction_Products","AttractionProductReview","ShowTopic","ShowForum","ShowUserReview"],Rt={__key:0xcc2e96c84842,id:"cc2e96c8484242be88fc3690f06c5e38",loc:{},definitions:[]},Lt=({type:e,variant:t,feedStatus:i})=>{var l,n=null==i?null:we.get(i),a=null!=e?e:kt,r=null!=t?t:kt;return Te.useIsomorphicIncrement(null==n?0:1,"RECO_EVERGREEN_PROMO"===a?Dt:null!=(l=_e.get(`${a}_${r}`))?l:kt,null!=n?n:Ot),null},Nt={DESKTOP:"DESKTOP",TABLET:"TABLET_WEB",MOBILE:"MOBILE_WEB"},Ht=()=>{var e,t,r=c(),o=n(),u=l(),{page:s,params:p}=a(),{userAgentCategory:v}=d();!function(e){var[t,i]=m(!1),l=Se.useIncrementCallback(),n=!t&&Ct.includes(e),a=f((e=>{e.clientY<=0&&(i(!0),l())}),[l]);g((()=>(n&&document.addEventListener("mouseleave",a),()=>{document.removeEventListener("mouseleave",a)})),[a,n])}(s);var h="geoId"in p&&p.geoId||null,[{data:y,error:b,fetching:S}]=i({query:Rt,variables:{uid:o,sessionId:u,currency:r,sessionType:Nt[v],locationId:h,page:s}}),T=(({data:e,error:t,fetching:i})=>{var l,n,a,r;return i?null:null!=(null==t?void 0:t.networkError)?"network_error":null!=(null==t?void 0:t.graphQLErrors)?"graphql_error":!0===(null==e||null==(l=e.feed)||null==(n=l.status)?void 0:n.partial)?"partial_feed":0===(null!=(a=null==e||null==(r=e.feed)?void 0:r.sectionGroups)?a:[]).filter(Boolean).length?"empty_feed":"ok"})({data:y,error:b,fetching:S});if(S)return null;if(!y||b)return E(D,{children:[w(_,{placementKey:"INTERSTITIAL",feedStatus:T}),w(Lt,{feedStatus:T})]});var k=(null!=(e=null==y||null==(t=y.feed)?void 0:t.sectionGroups)?e:[]).filter(Boolean).map((e=>"Mixer_SingleSection"===(null==e?void 0:e.__typename)?null==e?void 0:e.section:null)).filter(Boolean);return 0===k.length?null:E(D,{children:[w(_,{placementKey:"INTERSTITIAL",feedStatus:T}),k.map((e=>E(I,{children:[w(Lt,{type:e.interstitialType,variant:e.variant,feedStatus:T}),w(be,{section:e},e.sectionId)]},e.sectionId)))]})};return[()=>{ne=12*(le=30*(ie=864e5)),ae={getNumberFromStorage:Le,getBooleanFromStorage:He,getStringFromStorage:Ne,getObjectValueFromStorage:Ae,getStorageKey:Pe,saveValueToLocalStorage:Ge,saveObjectValueToLocalStorage:Ue,saveValueToSessionStorage:xe},re=Ve,oe={TOAST:p((function({children:e},t){var[i,l]=m(!0),n=v(null),a=L(),r="MOBILE"===U(),o=f((()=>{l(!0),Me.includes(a)&&r&&n.current&&n.current instanceof HTMLDivElement&&window.pageYOffset>300&&l(!1)}),[r,a,n]);return te("scroll",o),w(ee,{ref:n,hideBackdrop:!0,disableBlockScroll:!0,className:"VpFpT D w",children:w("div",{ref:t,className:F("Fjfzk f e H Gg Ra",{dhZoz:!i}),children:e})})}))},ce=qe,ue=Fe,se=Ke,de=Qe,me=ct,ge=p((function({lastBrowsedHotel:e,abTest:t,topMetaOffer:i,onClose:l,onHotelClick:n,onCommerceClick:a},o){var c="MOBILE"===U(),s=We(),d=c||s,m=u(),{rating:g,count:p,name:v,longOnlyHierarchyTypeaheadV2:f,photoSizeDynamic:h}=e,y=w("div",{className:"XeQat",children:f}),I=et(t,"Test A"),b=(I?i.commerceUrl:e.url)||e.url;return i.isDisplayableOffer&&i.commerceUrl&&i.provider&&i.displayPrice&&w(de,{url:e.url,onClick:n,onClose:l,children:E("div",{className:"fHpuP",ref:o,children:[E(x,{variant:d?"title-04":"title-03",marginBottom:"spacing-03",children:[w(r,{id:"prices_may_have_changed_interstitial"})," "]}),w("div",{className:"qUZKX",children:w("div",{className:"FZkKW f e",children:w(ue,{dates:E(x,{variant:"supporting-02",children:[m.formatDate("week_date_short_year_long",new Date(i.checkInDate))," - ",m.formatDate("week_date_short_year_long",new Date(i.checkOutDate))]}),disclaimer:w("div",{className:"ewKnA",children:w(x,{variant:"supporting-02",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod"})}),title:w("div",{className:"bIBvK",children:v}),secondaryInfo:y,rating:g,reviewCount:p,thumbnail:h,topMetaOffer:w("a",{href:b,target:"_blank",onClick:I?a:n,className:"_Z",children:E("div",{className:"BsebC _Z",children:[E("div",{className:"XHsrH",children:[E("div",{className:"ojfkl",children:[i.strikethroughPrice&&w("span",{className:"KXYWO Cb Wa",children:w(x,{variant:I?"supporting-03":"title-05",color:"strikethroughText",marginBottom:"spacing-02",children:i.strikethroughPrice})}),w("span",{className:I?"qiPiv":"WwaVd _T",children:w(x,{variant:I?"supporting-03":"title-05",marginBottom:"spacing-02",children:i.displayPrice})})]}),I&&E("div",{className:"FoZgz",children:[w(x,{variant:"supporting-02",display:"inline",children:i.provider}),w(M,{size:16})]})]}),w("div",{className:"orWiv _T",children:w(V,{target:"_blank",href:b,variant:"commerce",size:"small",children:w("div",{className:"wVASA",children:w(r,{id:"view_deal_button_cta"})})})})]})}),enforceMaxImageSize:!0,height:d?80:130,width:d?80:130,titleSize:d?"title-05":"title-04",bubbleRatingSize:d?"small":"medium"})})})]})})})),pe=new Map([[28970,"Washington DC"],[54171,"Charleston"],[35805,"Chicago"]]),ve=bt,fe={BEST_SELLER:w(r,{id:"experiences_retargeting_social_proof_title"}),LIKELY_TO_SELL_OUT:w(r,{id:"experiences_retargeting_urgency_title"}),DEFAULT:w(r,{id:"last_viewed_hotels_interstitial_title"})},he=St,ye={HOTELS_RETARGETING:ut,EXPERIENCES_RETARGETING:Tt,DEFAULT:()=>({})},Ie={RECO_EVERGREEN_PROMO:O,TOAST:wt},be=Et,Se=new b({metricName:"oRKXgWqBI9jehajWLUBNpMuCrQ4GD1rvC/Nm6UAqsOEpGlQe62x2Fd0LSfrc73qR",version:0,additionalLabels:["oRKXgWqBI9jehajWLUBNpKJjzPxEHg1R3QmGdwBRGKmESfCLTL1demUtO3qB9inSqbRAuwKz8+CaOAydtClqJg=="],labelHooks:[S]}),Te=new b({metricName:"IPGggjy++6MSbQG5eff2Ues+FxaoNhiMclrp7dl0Uz+3fC1OlO4iA8rRWVvaPMqqYmtbq/gdPbHYvcz9q2oQMGhQI72I02JTE17b8e0r8Vg=",version:0,additionalLabels:["IPGggjy++6MSbQG5eff2UXLvzfsQhqYiG/2bLzmnqsVHzHrNxLmOUfPiQ3dBdO+tLH1Gxh7D7cf4iarIXw7OQg=="],labelHooks:[S,T]}),_e=new Map([["TOAST_HOTELS_RETARGETING","IPGggjy++6MSbQG5eff2USBrGh60isM6+mb0IyIm7HGQlsqxsB5szuOcEzcC9wipxNeHRzn01q+/0TP8dtKvmQ=="],["TOAST_EXPERIENCES_RETARGETING","IPGggjy++6MSbQG5eff2USBrGh60isM6+mb0IyIm7HG1z+zk8K8scEsNeK8fhnZ7KyF4syhWByW8zB9uzh9VEV5hiXJ3zCK2iYyzm9nVYSQ="],["RECO_EVERGREEN_PROMO",Dt]]),we=new Map([["network_error","IPGggjy++6MSbQG5eff2UYmPZfStH2m26R5yrjWH9qircBiIPCEz4z1HeuAfxIpy7VFMSOPMXf5/nixfONlabA=="],["graphql_error","IPGggjy++6MSbQG5eff2UYmPZfStH2m26R5yrjWH9qgtMp0nTcSh3jpjy88r0UI28yyCz4VtlDV/rBR+Xtjhqg=="],["partial_feed","IPGggjy++6MSbQG5eff2UYmPZfStH2m26R5yrjWH9qinJm+/7boTbgRQk9UV4fv38Tb9z3GLGfVn0ZgK5V08oQ=="],["empty_feed","IPGggjy++6MSbQG5eff2UYmPZfStH2m26R5yrjWH9qhApcrKW4wwXxUlvwVgxdXc"],["ok",Ot]]),e("default",Ht)},[e=>i=e.useQuery,e=>l=e.useSessionId,e=>(n=e.usePageviewUid,a=e.useRoute),e=>(r=e.default,o=e.useLocalize,c=e.useCurrency,u=e.useIntlFormatter,s=e.useLanguage),e=>d=e.useUserAgent,e=>(m=e.useState,g=e.useEffect,p=e.forwardRef,v=e.useRef,f=e.useCallback,h=e.startTransition,y=e.useMemo,I=e.Fragment),e=>(b=e.Counter,S=e.useSourceLabel,T=e.useRenderLabel),e=>_=e.MixerFeedStatusCounter,e=>(w=e.jsx,E=e.jsxs,D=e.Fragment),e=>k=e.usePopupHierarchyRender,e=>O=e.RecoAds,e=>C=e.default,e=>R=e.useOnVisible,e=>L=e.default,e=>N=e.default,e=>H=e.default,e=>A=e.useTravelInfo,e=>P=e.default,e=>B=e.default,e=>G=e.default,e=>U=e.useViewportCategory,e=>x=e.default,e=>(V=e.default,z=e.CircularButton),e=>M=e.default,e=>(q=e.default,j=e.LinkStyle),e=>W=e.default,e=>F=e.default,e=>(K=e.BubbleRatingWithLabel,Q=e.BubbleRatingWithReviewCount),e=>X=e.default,e=>Y=e.useDeviceId,e=>J=e.useUserId,e=>Z=e.default,e=>$=e.buildProductDataLabels,e=>ee=e.ModalBase,e=>te=e.useWindow]]},["1mqwhq","1al4vi","fgwvq1","17thqz","1nnprh","1o4yt4","183pm0","00m0uy","121h32","1xo1is","1dlfdm","gugp1d","13btuy","eqoaya","19b9b1","tp1g68","1etaac","1g6kun","1r73jw","xg719z","1ys6v1","1essqv","jppfwt","1evvug","lr6tb6","1qkjm8","fkji80","1bkeq2","34bu7w","p5p2yo","52far5","b5nukb","7ovr7c","1uzmmz","ltllz9"]]);
