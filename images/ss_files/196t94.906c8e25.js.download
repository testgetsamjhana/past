(this.$WP=this.$WP||[]).push(["196t94",(e,t)=>{"use strict";var i,n,o,r,a,s,l,c,u,d,m,p,g,f,v,h,y,_,b,S,T,k,N,w,C,P,B,x,D,L,I,K,O,M,R,E,F,j,q,z,A,U,X=()=>{var{localize:e}=a(),t=()=>e("soft_login_banner_text"),i=l(s,{variant:"title-05",display:"inline",children:e("soft_login_banner_title")}),n=l("div",{className:"EblnO",children:l(s,{variant:"supporting-01",display:"inline",marginLeft:"spacing-00",marginTop:"spacing-01",children:t()})}),o=l("div",{className:"iWkln",children:l(s,{variant:"title-06",display:"inline",marginLeft:"spacing-01",marginTop:"spacing-00",children:t()})});return c("div",{className:"iBiJj",children:[i,n,o]})},Y=()=>{var e=C(),t=w(),i=P(),n=B(),o=x(),r=D();return({impressionKey:a,itemName:s,itemType:l,customData:c})=>{var u={page:t,pageUid:i,sessionId:n,geoId:r,userId:o,team:"Other",impressionKey:a,itemName:s,itemType:l,customData:JSON.stringify(c)};e(u)}},W=()=>{var e=I(),t=w(),i=P(),n=B(),o=x(),r=D();return({impressionKey:a,itemName:s,itemType:l,actionType:c,actionSubType:u,customData:d})=>{var m={page:t,pageUid:i,sessionId:n,geoId:r,userId:o,team:"Other",impressionKey:a,itemName:s,itemType:l,actionType:c,actionSubType:u,customData:JSON.stringify(d)};e(m)}},G=()=>l("div",{className:"bKtFP",children:l(n,{size:"small",variant:"primary",children:l(r,{id:"soft_login_banner_button"})})}),H=()=>{var e=u(),t=F(),n=j(),{funnelKey:o}=d(h),r=w(),{bucket:a}=S({pause:!1,skipImpression:!0}),{bucket:s}=T({pause:!1,logImpression:!1}),{hotels:g,attractions:f}=b(),v=m((()=>{var e={variant:s||a};if("HotelsFusion"===r){var t=!(null==g||!g.checkInDate||null==g||!g.checkOutDate||null!=g&&g.defaultDates);return{...e,isDated:t}}if(q.has(r)){var i=!(null==f||!f.fromDate||null==f||!f.toDate);return{...e,isDated:i}}return e}),[a,s,r,g,f]),k=_(15e3,"SoftLoginBanner","MembershipBounce15s",t,v),N=_(3e4,"SoftLoginBanner","MembershipBounce30s",t,v),C=y((()=>{t({impressionKey:o,itemName:"SoftLoginBanner",itemType:"MembershipBanner",customData:v}),k(),N()})),P=p((()=>{n({impressionKey:o,itemName:"SoftLoginBanner",itemType:"MembershipBanner",actionType:"click",actionSubType:"cta",customData:v}),e({flowOrigin:"login",isFullWidthMobile:!0,onSuccess:e=>{t({customData:{...v,newMember:!(null==e||!e.hasCreatedMember)},impressionKey:o,itemName:"SuccessfulLogin",itemType:"MemberLoginFlow"})},onClose:()=>{n({impressionKey:o,itemType:"MembershipPrompt",itemName:"SoftLoginBanner",actionType:"click",actionSubType:"close",customData:v})}})}),[n,e,t,v,o]);return c("div",{className:"ZMdlv Pj PX Pw PJ _S f Fi",role:"link",onClick:P,onKeyPress:P,tabIndex:0,ref:C,children:[l(i,{className:"ZSNFY",src:"img2/brand_refresh/Tripadvisor_logoset_solid_white.svg",alt:"Tripadvisor logo"}),c("div",{className:"emVeP",children:[l(E,{}),l(G,{})]})]})},J=({onClose:e,reference:t})=>{var{localize:i}=a();return l("span",{className:"lrXUp _T",children:l(o,{icon:K,size:"small",onClick:t=>{t.stopPropagation(),e()},"aria-label":i.string("tooltip_close"),ref:t})})},V=({onClose:e,onClick:t,title:i,text:o,buttonText:r,reference:a})=>{var u=g(null);return c("div",{ref:a,className:"onZPv _S f H e _V Ra Gg Pk PY Px PK",onClick:t,role:"presentation",children:[c("div",{className:"f k",children:[l(s,{elementType:"div",variant:"title-04",marginBottom:"spacing-02",children:i}),l(J,{onClose:e,reference:u})]}),l("div",{children:o}),!!r&&l("div",{children:l("div",{className:"fHVdP _m Mj",children:l(n,{fullWidth:!0,children:r})})})]})},Z=({triggerRef:e,onClick:t,title:i,text:n,buttonText:o,position:r,alignEdge:a,shiftX:s,shiftY:c,shiftArrow:u,hideOnScrollX:_,hideOnScrollY:S,autoFocus:T,isUpdatedOnScroll:C,skipSessionCheck:P,softLoginExperiment:B,dismiss:x,isTriggerRefStickied:D})=>{var I,K,E,q,z,U=g(null),[X,Y]=f(!1),[W,G]=f(null==(I=e.current)?void 0:I.getBoundingClientRect().left),[H,J]=f(null==(K=e.current)?void 0:K.getBoundingClientRect().top),Z=k(B,P),$=N(B),[Q,ee]=f(!(null==D||!D.current)),te=F(),ie=j(),{funnelKey:ne}=d(h),oe=w(),{attractions:re}=b();switch(B){case"heart_icon":E="heart_icon_prompt",q="SoftLoginSave",z="SaveModalPrompt";break;case"global_nav_review":E="review_global_nav_prompt",q="SoftLoginReview",z="ReviewGlobalNavPrompt";break;case"global_nav_sign_in":E="sign_in_global_nav_prompt",q="SoftLoginSignIn",z="SignInGlobalNavPrompt";break;default:throw L(B),new Error(`Experiment not considered ${B}`)}var ae=m((()=>{var e={variant:E};if(A.has(oe)){var t=!(null==re||!re.fromDate||null==re||!re.toDate);return{...e,isDated:t}}return e}),[E,oe,re]),se=y((()=>{X&&te({impressionKey:ne,itemName:q,itemType:z,customData:ae})}));v((()=>Y(Z)),[Z]),v((()=>{var t,i;G(null==(t=e.current)?void 0:t.getBoundingClientRect().left),J(null==(i=e.current)?void 0:i.getBoundingClientRect().top)}),[e]),v((()=>{X&&$()}));var le=p((()=>{Y(!1),null==x||x()}),[x]);M("Escape",le);var ce=t=>{var i,n,o=(null==(i=e.current)?void 0:i.getBoundingClientRect().left)!==W,r=(null==(n=e.current)?void 0:n.getBoundingClientRect().top)!==H;"wheel"!==t.type&&"scroll"!==t.type&&"touchmove"!==t.type||!(_&&o||S&&r)||le();var a=!(null==D||!D.current);D&&a!==Q&&ee(a)};R("click",(e=>{var t;"click"===e.type&&e.target instanceof Node&&(null==(t=U.current)||!t.contains(e.target))&&le()}),void 0),R("wheel",ce,void 0),R("scroll",ce,void 0),R("touchmove",ce,void 0);var ue=p((()=>{le(),ie({impressionKey:ne,itemName:q,itemType:z,actionType:"click",actionSubType:"close",customData:ae})}),[le,ie,ne,q,z,ae]),de=p((()=>{le(),ie({impressionKey:ne,itemName:q,itemType:z,actionType:"click",actionSubType:"cta",customData:ae}),t()}),[le,ie,ne,q,z,ae,t]),me=l("div",{ref:se,children:l(V,{onClose:ue,onClick:de,title:i,text:n,buttonText:o,reference:U})});return v((()=>{e.current||null==x||x()}),[e,x]),e.current?X&&l("div",{children:l(O,{target:e.current,position:r,alignEdge:a,shiftX:s,shiftY:c,shiftArrow:u,unstyled:!0,showArrowWhenUnstyled:!0,autoFocus:!!T,isUpdatedOnScroll:!!C,fixed:Q,children:me})}):null},$=({triggerRef:e,onSave:t,position:i,alignEdge:n,shiftX:o,shiftY:r,shiftArrow:s,hideOnScrollX:c,hideOnScrollY:u})=>{var{localize:d}=a();return l(U,{triggerRef:e,onClick:t,title:d.string("soft_login_heart_icon_tooltip_title"),text:d.string("soft_login_heart_icon_tooltip_text"),buttonText:d.string("soft_login_heart_icon_tooltip_save_button"),position:i,alignEdge:n,shiftX:o,shiftY:r,shiftArrow:s,hideOnScrollX:c,hideOnScrollY:u,autoFocus:!0,softLoginExperiment:"heart_icon"})};return[()=>{E=X,F=Y,j=W,q=new Set(["AttractionsFusion","AttractionProductsFusion"]),z=H,A=new Set(["AttractionsFusion"]),e({SaveTooltip:$,SoftLoginBanner:z,SoftLoginTooltip:U=Z})},[e=>i=e.CdnImage,e=>(n=e.default,o=e.CircularButton),e=>(r=e.default,a=e.useLocalize),e=>s=e.default,e=>(l=e.jsx,c=e.jsxs),e=>u=e.default,e=>(d=e.useContext,m=e.useMemo,p=e.useCallback,g=e.useRef,f=e.useState,v=e.useEffect),e=>h=e.FunnelTracking,e=>y=e.useOnVisible,e=>_=e.useBounceTracking,e=>b=e.useTravelInfo,e=>(S=e.useListPageMembershipBannerBucket,T=e.useMembershipBannerAndHeartIconBucket,k=e.useIsSoftLoginPromptSessionEligible,N=e.useUpdateSoftLoginPromptSessions),e=>w=e.default,e=>C=e.default,e=>P=e.usePageviewUid,e=>B=e.useSessionId,e=>x=e.useUserId,e=>(D=e.useGeoId,L=e.exhaustivenessCheck),e=>I=e.default,e=>K=e.default,e=>O=e.default,e=>M=e.useKeyboardEvent,e=>R=e.useWindow]]},["1s6q22","jppfwt","17thqz","1essqv","121h32","lchj5q","1o4yt4","1kkqcv","13btuy","19n7e2","1etaac","1rfo7h","eqoaya","xg719z","fgwvq1","1al4vi","52far5","a2qxj9","1r73jw","1qkjm8","1x9dv9","1gttbj","ltllz9"]]);
